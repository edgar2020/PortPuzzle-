/*! For license information please see main.2e20089c.js.LICENSE.txt */
(()=>{"use strict";var e={463:(e,t,n)=>{var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case T:return"Profiler";case E:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ee=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function Ce(e){Ie?Ee?Ee.push(e):Ee=[e]:Ie=e}function ke(){if(Ie){var e=Ie,t=Ee;if(Ee=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ne(e,t){return e(t)}function xe(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Ee)&&(xe(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,It,Et,Tt,Ct=!1,kt=[],Nt=null,xt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==xt&&Bt(xt,e),null!==At&&Bt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Mt(Nt,e,t,n,r,i),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return En}var Cn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Cn),Nn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Dn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,_e(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Er={};function Tr(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Ir[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Tr("animationend"),kr=Tr("animationiteration"),Nr=Tr("animationstart"),xr=Tr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(kr,"onAnimationIteration"),Rr(Nr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(xr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}De((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xn;break;case Cr:case kr:case Nr:l=yn;break;case xr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Kn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ii=-1;function Ei(e){return{current:e}}function Ti(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function Ci(e,t){Ii++,Si[Ii]=e.current,e.current=t}var ki={},Ni=Ei(ki),xi=Ei(!1),Ai=ki;function Di(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(xi),Ti(Ni)}function Oi(e,t,n){if(Ni.current!==ki)throw Error(s(168));Ci(Ni,t),Ci(xi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ai=Ni.current,Ci(Ni,e),Ci(xi,xi.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(xi),Ti(Ni),Ci(Ni,e)):Ti(xi),Ci(xi,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ei(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Cs=null;function ks(e){null===Cs?Cs=[e]:Cs.push(e)}function Ns(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,xs(e,r)}function xs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,xs(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,xs(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ps(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Ri(t)?Ai:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Ri(t)?Ai:Ni.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Gs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ei(Xs),eo=Ei(Xs),to=Ei(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),Ci(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Ci(eo,e),Ci(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function ko(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function No(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=mo,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=xs(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return ko().memoizedState}function Bo(e,t,n,r){var i=Co();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return ko().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ns(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ns(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Co();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Al.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:xo,useRef:Vo,useState:function(){return xo(No)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(ko(),go.memoizedState,e)},useTransition:function(){return[xo(No)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(No)},useDebugValue:Yo,useDeferredValue:function(e){var t=ko();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(No)[0],ko().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),da(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Pl),Pl|=r;return _a(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Ri(n)?Ai:Ni.current;return s=Di(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Na(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Di(t,c=Ri(n)?Ai:Ni.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ks(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||xi.current||As?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||zs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Di(t,l=Ri(n)?Ai:Ni.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ks(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||xi.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||zs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Pa,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,xs(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Ha(t),null;case 3:return r=t.stateNode,io(),Ti(xi),Ti(Ni),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Pa(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Pa(e,t),null===e&&zr(t.stateNode.containerInfo),Ha(t),null;case 10:return Ss(t.type._context),Ha(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,Ci(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(xi),Ti(Ni),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,Tl=Math.ceil,Cl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Nl=b.ReactCurrentBatchConfig,xl=0,Al=null,Dl=null,Rl=0,Pl=0,Ol=Ei(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,Vl=null,Bl=null,zl=0,ql=1/0,Kl=null,Wl=!1,Gl=null,Hl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&xl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&xl)&&e===Al||(e===Al&&(0===(2&xl)&&(Ul|=n),4===Ll&&lc(e,Rl)),ic(e,r),1===n&&0===xl&&0===(1&t.mode)&&(ql=Je()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&xl)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&xl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=xl;xl|=2;var o=mc();for(Al===e&&Rl===t||(Kl=null,ql=Je()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),Cl.current=o,xl=i,null!==Dl?t=0:(Al=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,Kl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Bl,Kl),t);break}Sc(e,Bl,Kl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Bl,Kl),r);break}Sc(e,Bl,Kl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&xl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,Kl),ic(e,Je()),null}function uc(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(ql=Je()+500,ji&&zi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&xl)&&Ic();var t=xl;xl|=1;var n=Nl.transition,r=wt;try{if(Nl.transition=null,wt=1,e)return e()}finally{wt=r,Nl.transition=n,0===(6&(xl=t))&&zi()}}function dc(){Pl=Ol.current,Ti(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ti(xi),Ti(Ni),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Dl=e=Oc(e.current,null),Rl=Pl=t,Ll=0,Ml=null,jl=Ul=Fl=0,Bl=Vl=null,null!==Cs){for(t=0;t<Cs.length;t++)if(null!==(r=(n=Cs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Cs=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,kl.current=null,null===n||null===n.return){Ll=1,Ml=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Al,Rl)}function yc(e,t){var n=xl;xl|=2;var r=mc();for(Al===e&&Rl===t||(Kl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_s(),xl=n,Cl.current=r,null!==Dl)throw Error(s(261));return Al=null,Rl=0,Ll}function vc(){for(;null!==Dl;)bc(Dl)}function wc(){for(;null!==Dl&&!Ye();)bc(Dl)}function bc(e){var t=El(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?_c(e):Dl=t,kl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Pl)))return void(Dl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ll=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var r=wt,i=Nl.transition;try{Nl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Dl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var a=wt;wt=1;var l=xl;xl|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),$e(),xl=l,wt=a,Nl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,zi()}(e,t,n,r)}finally{Nl.transition=i,wt=r}return null}function Ic(){if(null!==Yl){var e=bt($l),t=Nl.transition,n=wt;try{if(Nl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Tc(l,l.return,S)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(xl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Nl.transition=t}}return!1}function Ec(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Je()-zl?fc(e,0):jl|=n),ic(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=xs(e,t))&&(yt(e,t,n),ic(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ac(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Mc(n.children,i,o,t);case E:a=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case x:return(e=Rc(13,n,t,i)).elementType=x,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case k:a=9;break e;case N:a=11;break e;case D:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function zc(e){if(!e)return ki;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Ps(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ci(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ci(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Di(t,Ni.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(r),e=gs(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Na(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!xi.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ps(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Es(t,n),qs(t,r,i),Ws(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Kc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&xl)&&(ql=Je()+500,zi()))}break;case 13:hc((function(){var t=xs(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},St=function(e){if(13===e.tag){var t=xs(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=xs(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=uc,xe=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ce,ke,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),x(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+N(a=e[c],c);l+=x(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=x(a=a.value,t,i,u=s+N(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{e.exports=n(117)},184:(e,t,n)=>{e.exports=n(374)},813:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!x());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,E=!1,T=null,C=-1,k=5,N=-1;function x(){return!(t.unstable_now()-N<k)}function A(){if(null!==T){var e=t.unstable_now();N=e;var n=!0;try{n=T(!0,e)}finally{n?I():(E=!1,T=null)}}else E=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){y(A,0)};function P(e){T=e,E||(E=!0,I())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".b5dccad1.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="keoghs_website:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/WebPortPuzzles/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkkeoghs_website=self.webpackChunkkeoghs_website||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>Te,SDK_VERSION:()=>Nt,_DEFAULT_ENTRY_NAME:()=>gt,_addComponent:()=>bt,_addOrOverwriteComponent:()=>_t,_apps:()=>vt,_clearComponents:()=>Tt,_components:()=>wt,_getProvider:()=>It,_registerComponent:()=>St,_removeServiceInstance:()=>Et,deleteApp:()=>Rt,getApp:()=>At,getApps:()=>Dt,initializeApp:()=>xt,onLog:()=>Ot,registerVersion:()=>Pt,setLogLevel:()=>Lt});var t=n(791),r=n.t(t,2),i=n(250);const s=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var a;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,u=i.history,p=a.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=a.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let b={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=a.Push;let r=d(b.location,e,t);n&&n(r,e),g=y()+1;let o=h(r,g),l=b.createHref(r);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}s&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,t){p=a.Replace;let r=d(b.location,e,t);n&&n(r,e),g=y();let i=h(r,g),o=b.createHref(r);u.replaceState(i,"",o),s&&m&&m({action:p,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=N(i[o],A(r));return s}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=R([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:k(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:\w+$/,_=3,S=2,I=1,E=10,T=-2,C=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=T),t&&(r+=S),n.filter((e=>!C(e))).reduce(((e,t)=>e+(b.test(t)?_:""===t?I:E)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=x({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:R([i,c.pathname]),pathnameBase:P(R([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=R([i,c.pathnameBase]))}return s}function x(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return u(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return decodeURI(e)}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const R=e=>e.join("/").replace(/\/\/+/g,"/"),P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");Error;function O(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const L=["post","put","patch","delete"],M=(new Set(L),["get",...L]);new Set(M),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}const U=t.createContext(null);const j=t.createContext(null);const V=t.createContext(null);const B=t.createContext(null);const z=t.createContext({outlet:null,matches:[],isDataRoute:!1});const q=t.createContext(null);function K(){return null!=t.useContext(B)}function W(){return K()||c(!1),t.useContext(B).location}function G(e,n,r){K()||c(!1);let{navigator:i}=t.useContext(V),{matches:s}=t.useContext(z),o=s[s.length-1],l=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let h,d=W();if(n){var f;let e="string"===typeof n?p(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),h=e}else h=d;let m=h.pathname||"/",g=y(e,{pathname:"/"===u?m:m.slice(u.length)||"/"});let v=J(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:R([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r);return n&&v?t.createElement(B.Provider,{value:{location:F({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:a.Pop}},v):v}function H(){let e=function(){var e;let n=t.useContext(q),r=Z(X.UseRouteError),i=ee(X.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=O(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const Q=t.createElement(H,null);class Y extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(z.Provider,{value:this.props.routeContext},t.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(U);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(z.Provider,{value:n},i)}function J(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let o=e,a=null==(i=r)?void 0:i.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,i,s)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Q);let u=n.concat(o.slice(0,s+1)),h=()=>{let n;return n=l?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement($,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(Y,{location:r.location,revalidation:r.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var X=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(X||{});function Z(e){let n=t.useContext(j);return n||c(!1),n}function ee(e){let n=function(e){let n=t.useContext(z);return n||c(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}r.startTransition;function te(e){c(!1)}function ne(e){let{basename:n="/",children:r=null,location:i,navigationType:s=a.Pop,navigator:o,static:l=!1}=e;K()&&c(!1);let u=n.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:u,navigator:o,static:l})),[u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:y="default"}=i,v=t.useMemo((()=>{let e=D(d,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:y},navigationType:s}}),[u,d,f,m,g,y,s]);return null==v?null:t.createElement(V.Provider,{value:h},t.createElement(B.Provider,{children:r,value:v}))}function re(e){let{children:t,location:n}=e;return G(ie(t),n)}new Promise((()=>{}));t.Component;function ie(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ie(e.props.children,s));e.type!==te&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ie(e.props.children,s)),r.push(o)})),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const se=r.startTransition;function oe(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))}),(function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:g}=i||{},y=t.useCallback((e=>{g&&se?se((()=>h(e))):h(e)}),[h,g]);return t.useLayoutEffect((()=>l.listen(y)),[l,y]),t.createElement(ne,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ae,le;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ae||(ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(le||(le={}));const ce=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ce(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new he;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function(e){return function(e){const t=ce(e);return ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fe=function(e){try{return ue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=pe(e[n],t[n]));return e}const me=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ge=()=>{try{return me()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/WebPortPuzzles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&fe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ye=()=>{var e;return null===(e=ge())||void 0===e?void 0:e.config};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function we(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function be(){var e;const t=null===(e=ge())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function _e(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Se(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ie(){const e=we();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ee(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Te extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ke,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Te(n,s,t)}}const ke=/\{\$([^}]+)}/g;function Ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ae(n)&&Ae(s)){if(!xe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ae(e){return null!==e&&"object"===typeof e}function De(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Re(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Pe(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Oe(e,t){const n=new Le(e,t);return n.subscribe.bind(n)}class Le{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Me),void 0===r.error&&(r.error=Me),void 0===r.complete&&(r.complete=Me);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Me(){}function Fe(e){return e&&e._delegate?e._delegate:e}class Ue{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const je="[DEFAULT]";class Ve{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ve;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:je})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===je?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.component?this.component.multipleInstances?e:je:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ve(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ze=[];var qe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(qe||(qe={}));const Ke={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},We=qe.INFO,Ge={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},He=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ge[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Qe{constructor(e){this.name=e,this._logLevel=We,this._logHandler=He,this._userLogHandler=null,ze.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ke[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...t),this._logHandler(this,qe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...t),this._logHandler(this,qe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,qe.INFO,...t),this._logHandler(this,qe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,qe.WARN,...t),this._logHandler(this,qe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...t),this._logHandler(this,qe.ERROR,...t)}}const Ye=(e,t)=>t.some((t=>e instanceof t));let $e,Je;const Xe=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap;let rt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ze.get(e);if("objectStoreNames"===t)return e.objectStoreNames||et.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ot(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function it(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Je||(Je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(at(this),n),ot(Xe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ot(e.apply(at(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(at(this),t,...r);return et.set(s,t.sort?t.sort():[t]),ot(s)}}function st(e){return"function"===typeof e?it(e):(e instanceof IDBTransaction&&function(e){if(Ze.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ze.set(e,t)}(e),Ye(e,$e||($e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,rt):e)}function ot(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ot(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Xe.set(t,e)})).catch((()=>{})),nt.set(t,e),t}(e);if(tt.has(e))return tt.get(e);const t=st(e);return t!==e&&(tt.set(e,t),nt.set(t,e)),t}const at=e=>nt.get(e);const lt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],ut=new Map;function ht(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ut.get(t))return ut.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ct.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!lt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ut.set(t,s),s}rt=(e=>({...e,get:(t,n,r)=>ht(t,n)||e.get(t,n,r),has:(t,n)=>!!ht(t,n)||e.has(t,n)}))(rt);class dt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ft="@firebase/app",pt="0.9.25",mt=new Qe("@firebase/app"),gt="[DEFAULT]",yt={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,wt=new Map;function bt(e,t){try{e.container.addComponent(t)}catch(n){mt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _t(e,t){e.container.addOrOverwriteComponent(t)}function St(e){const t=e.name;if(wt.has(t))return mt.debug("There were multiple attempts to register component ".concat(t,".")),!1;wt.set(t,e);for(const n of vt.values())bt(n,e);return!0}function It(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Et(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gt;It(e,t).clearInstance(n)}function Tt(){wt.clear()}const Ct=new Ce("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ue("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}const Nt="10.7.1";function xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:gt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ct.create("bad-app-name",{appName:String(i)});if(n||(n=ye()),!n)throw Ct.create("no-options");const s=vt.get(i);if(s){if(xe(n,s.options)&&xe(r,s.config))return s;throw Ct.create("duplicate-app",{appName:i})}const o=new Be(i);for(const l of wt.values())o.addComponent(l);const a=new kt(n,r,o);return vt.set(i,a),a}function At(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;const t=vt.get(e);if(!t&&e===gt&&ye())return xt();if(!t)throw Ct.create("no-app",{appName:e});return t}function Dt(){return Array.from(vt.values())}async function Rt(e){const t=e.name;vt.has(t)&&(vt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Pt(e,t,n){var r;let i=null!==(r=yt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void mt.warn(e.join(" "))}St(new Ue("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ot(e,t){if(null!==e&&"function"!==typeof e)throw Ct.create("invalid-log-argument");!function(e,t){for(const n of ze){let r=null;t&&t.level&&(r=Ke[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:qe[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Lt(e){var t;t=e,ze.forEach((e=>{e.setLogLevel(t)}))}const Mt="firebase-heartbeat-database",Ft=1,Ut="firebase-heartbeat-store";let jt=null;function Vt(){return jt||(jt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ot(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ot(o.result),e.oldVersion,e.newVersion,ot(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Mt,Ft,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ut)}}).catch((e=>{throw Ct.create("idb-open",{originalErrorMessage:e.message})}))),jt}async function Bt(e,t){try{const n=(await Vt()).transaction(Ut,"readwrite"),r=n.objectStore(Ut);await r.put(t,zt(e)),await n.done}catch(n){if(n instanceof Te)mt.warn(n.message);else{const e=Ct.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});mt.warn(e.message)}}}function zt(e){return"".concat(e.name,"!").concat(e.options.appId)}class qt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Kt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Gt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=de(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Kt(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ee()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Vt();return await t.transaction(Ut).objectStore(Ut).get(zt(e))}catch(t){if(t instanceof Te)mt.warn(t.message);else{const e=Ct.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});mt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Bt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Bt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Gt(e){return de(JSON.stringify({version:2,heartbeats:e})).length}var Ht;Ht="",St(new Ue("platform-logger",(e=>new dt(e)),"PRIVATE")),St(new Ue("heartbeat",(e=>new qt(e)),"PRIVATE")),Pt(ft,pt,Ht),Pt(ft,pt,"esm2017"),Pt("fire-js","");class Qt{constructor(e,t){this._delegate=e,this.firebase=t,bt(e,new Ue("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Rt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){bt(this._delegate,e)}_addOrOverwriteComponent(e){_t(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Yt=new Ce("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const $t=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ne(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Pt,setLogLevel:Lt,onLog:Ot,apps:null,SDK_VERSION:Nt,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(St(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Yt.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&pe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ne(n,e=e||gt))throw Yt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Qt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){pe(n,e)},createSubscribe:Oe,ErrorFactory:Ce,deepExtend:pe}),n}(),Jt=new Qe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Jt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Jt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xt=$t;!function(e){Pt("@firebase/app-compat","0.2.25",e)}();Xt.registerVersion("firebase","10.7.1","app-compat");var Zt,en="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},tn={},nn=nn||{},rn=en||self;function sn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function on(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var an="closure_uid_"+(1e9*Math.random()>>>0),ln=0;function cn(e,t,n){return e.call.apply(e.bind,arguments)}function un(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hn(e,t,n){return(hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:un).apply(null,arguments)}function dn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function pn(){this.s=this.s,this.o=this.o}pn.prototype.s=!1,pn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,an)&&e[an]||(e[an]=++ln))},pn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function gn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function yn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(sn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function vn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}vn.prototype.h=function(){this.defaultPrevented=!0};var wn=function(){if(!rn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};rn.addEventListener("test",e,t),rn.removeEventListener("test",e,t)}catch(n){}return e}();function bn(e){return/^[\s\xa0]*$/.test(e)}function _n(){var e=rn.navigator;return e&&(e=e.userAgent)?e:""}function Sn(e){return-1!=_n().indexOf(e)}function In(e){return In[" "](e),e}In[" "]=function(){};var En,Tn,Cn=Sn("Opera"),kn=Sn("Trident")||Sn("MSIE"),Nn=Sn("Edge"),xn=Nn||kn,An=Sn("Gecko")&&!(-1!=_n().toLowerCase().indexOf("webkit")&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),Dn=-1!=_n().toLowerCase().indexOf("webkit")&&!Sn("Edge");function Rn(){var e=rn.document;return e?e.documentMode:void 0}e:{var Pn="",On=function(){var e=_n();return An?/rv:([^\);]+)(\)|;)/.exec(e):Nn?/Edge\/([\d\.]+)/.exec(e):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Dn?/WebKit\/(\S+)/.exec(e):Cn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(On&&(Pn=On?On[1]:""),kn){var Ln=Rn();if(null!=Ln&&Ln>parseFloat(Pn)){En=String(Ln);break e}}En=Pn}if(rn.document&&kn){var Mn=Rn();Tn=Mn||(parseInt(En,10)||void 0)}else Tn=void 0;var Fn=Tn;function Un(e,t){if(vn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(An){e:{try{In(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Un.$.h.call(this)}}fn(Un,vn);var jn={2:"touch",3:"pen",4:"mouse"};Un.prototype.h=function(){Un.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vn="closure_listenable_"+(1e6*Math.random()|0),Bn=0;function zn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Bn,this.fa=this.ia=!1}function qn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Kn(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Wn(e){const t={};for(const n in e)t[n]=e[n];return t}const Gn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hn(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Gn.length;t++)n=Gn[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qn(e){this.src=e,this.g={},this.h=0}function Yn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=mn(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(qn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $n(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Qn.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$n(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new zn(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Jn="closure_lm_"+(1e6*Math.random()|0),Xn={};function Zn(e,t,n,r,i){if(r&&r.once)return tr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Zn(e,t[s],n,r,i);return null}return n=lr(n),e&&e[Vn]?e.O(t,n,on(r)?!!r.capture:!!r,i):er(e,t,n,!1,r,i)}function er(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=on(i)?!!i.capture:!!i,a=or(e);if(a||(e[Jn]=a=new Qn(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=sr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ir(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function tr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)tr(e,t[s],n,r,i);return null}return n=lr(n),e&&e[Vn]?e.P(t,n,on(r)?!!r.capture:!!r,i):er(e,t,n,!0,r,i)}function nr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)nr(e,t[s],n,r,i);else r=on(r)?!!r.capture:!!r,n=lr(n),e&&e[Vn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$n(s=e.g[t],n,r,i))&&(qn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=or(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$n(t,n,r,i)),(n=-1<e?t[e]:null)&&rr(n))}function rr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Vn])Yn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ir(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=or(t))?(Yn(n,e),0==n.h&&(n.src=null,t[Jn]=null)):qn(e)}}}function ir(e){return e in Xn?Xn[e]:Xn[e]="on"+e}function sr(e,t){if(e.fa)e=!0;else{t=new Un(t,this);var n=e.listener,r=e.la||e.src;e.ia&&rr(e),e=n.call(r,t)}return e}function or(e){return(e=e[Jn])instanceof Qn?e:null}var ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function lr(e){return"function"===typeof e?e:(e[ar]||(e[ar]=function(t){return e.handleEvent(t)}),e[ar])}function cr(){pn.call(this),this.i=new Qn(this),this.S=this,this.J=null}function ur(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new vn(t,e);else if(t instanceof vn)t.target=t.target||e;else{var i=t;Hn(t=new vn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=hr(o,r,!0,t)&&i}if(i=hr(o=t.g=e,r,!0,t)&&i,i=hr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=hr(o=t.g=n[s],r,!1,t)&&i}function hr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Yn(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}fn(cr,pn),cr.prototype[Vn]=!0,cr.prototype.removeEventListener=function(e,t,n,r){nr(this,e,t,n,r)},cr.prototype.N=function(){if(cr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qn(n[r]);delete t.g[e],t.h--}}this.J=null},cr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},cr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var dr=rn.JSON.stringify;function fr(){var e=br;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var pr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new mr),(e=>e.reset()));class mr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function yr(e){rn.setTimeout((()=>{throw e}),0)}let vr,wr=!1,br=new class{constructor(){this.h=this.g=null}add(e,t){const n=pr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_r=()=>{const e=rn.Promise.resolve(void 0);vr=()=>{e.then(Sr)}};var Sr=()=>{for(var e;e=fr();){try{e.h.call(e.g)}catch(n){yr(n)}var t=pr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}wr=!1};function Ir(e,t){cr.call(this),this.h=e||1,this.g=t||rn,this.j=hn(this.qb,this),this.l=Date.now()}function Er(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Tr(e,t,n){if("function"===typeof e)n&&(e=hn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hn(e.handleEvent,e)}return 2147483647<Number(t)?-1:rn.setTimeout(e,t||0)}function Cr(e){e.g=Tr((()=>{e.g=null,e.i&&(e.i=!1,Cr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}fn(Ir,cr),(Zt=Ir.prototype).ga=!1,Zt.T=null,Zt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ur(this,"tick"),this.ga&&(Er(this),this.start()))}},Zt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zt.N=function(){Ir.$.N.call(this),Er(this),delete this.g};class kr extends pn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(e){pn.call(this),this.h=e,this.g={}}fn(Nr,pn);var xr=[];function Ar(e,t,n,r){Array.isArray(n)||(n&&(xr[0]=n.toString()),n=xr);for(var i=0;i<n.length;i++){var s=Zn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Dr(e){Kn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&rr(e)}),e),e.g={}}function Rr(){this.g=!0}function Pr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return dr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Nr.prototype.N=function(){Nr.$.N.call(this),Dr(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rr.prototype.Ea=function(){this.g=!1},Rr.prototype.info=function(){};var Or={},Lr=null;function Mr(){return Lr=Lr||new cr}function Fr(e){vn.call(this,Or.Ta,e)}function Ur(e){const t=Mr();ur(t,new Fr(t))}function jr(e,t){vn.call(this,Or.STAT_EVENT,e),this.stat=t}function Vr(e){const t=Mr();ur(t,new jr(t,e))}function Br(e,t){vn.call(this,Or.Ua,e),this.size=t}function zr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return rn.setTimeout((function(){e()}),t)}Or.Ta="serverreachability",fn(Fr,vn),Or.STAT_EVENT="statevent",fn(jr,vn),Or.Ua="timingevent",fn(Br,vn);var qr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wr(){}function Gr(e){return e.h||(e.h=e.i())}function Hr(){}Wr.prototype.h=null;var Qr,Yr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $r(){vn.call(this,"d")}function Jr(){vn.call(this,"c")}function Xr(){}function Zr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Nr(this),this.P=ti,e=xn?125:void 0,this.V=new Ir(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}fn($r,vn),fn(Jr,vn),fn(Xr,Wr),Xr.prototype.g=function(){return new XMLHttpRequest},Xr.prototype.i=function(){return{}},Qr=new Xr;var ti=45e3,ni={},ri={};function ii(e,t,n){e.L=1,e.A=Ii(vi(t)),e.u=n,e.S=!0,si(e,null)}function si(e,t){e.G=Date.now(),ci(e),e.B=vi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Mi(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ei,e.g=Fs(e.l,n?t:null,!e.u),0<e.O&&(e.M=new kr(hn(e.Pa,e,e.g),e.O)),Ar(e.U,e.g,"readystatechange",e.nb),t=e.I?Wn(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ur(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function oi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ai(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=li(e,n),r==ri){4==t&&(e.s=4,Vr(14),i=!1),Pr(e.j,e.m,null,"[Incomplete Response]");break}if(r==ni){e.s=4,Vr(15),Pr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Pr(e.j,e.m,r,null),pi(e,r)}oi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Vr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xs(t),t.M=!0,Vr(11))):(Pr(e.j,e.m,n,"[Invalid Chunked Response]"),fi(e),di(e))}function li(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ri:(n=Number(t.substring(n,r)),isNaN(n)?ni:(r+=1)+n>t.length?ri:(t=t.slice(r,r+n),e.o=r+n,t))}function ci(e){e.Y=Date.now()+e.P,ui(e,e.P)}function ui(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=zr(hn(e.lb,e),t)}function hi(e){e.C&&(rn.clearTimeout(e.C),e.C=null)}function di(e){0==e.l.H||e.J||Rs(e.l,e)}function fi(e){hi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Er(e.V),Dr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function pi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||qi(n.i,e)))if(!e.K&&qi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ds(n),_s(n)}Ns(n),Vr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zr(hn(n.ib,n),6e3));if(1>=zi(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Os(n,11)}else if((e.K||n.g==e)&&Ds(n),!bn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ki(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Si(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ms(r,r.J?r.pa:null,r.Y),o.K){Wi(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(hi(a),ci(a)),r.g=o}else ks(r);0<n.j.length&&Is(n)}else"stop"!=c[0]&&"close"!=c[0]||Os(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Os(n,7):bs(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ur()}catch(c){}}function mi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(sn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(sn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Zt=Zr.prototype).setTimeout=function(e){this.P=e},Zt.nb=function(e){e=e.target;const t=this.M;t&&3==ps(e)?t.l():this.Pa(e)},Zt.Pa=function(e){try{if(e==this.g)e:{const u=ps(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||xn||this.g&&(this.h.h||this.g.ja()||ms(this.g)))){this.J||4!=u||7==t||Ur(),hi(this);var n=this.g.da();this.ca=n;t:if(oi(this)){var r=ms(this.g);e="";var i=r.length,s=4==ps(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){fi(this),di(this);var o="";break t}this.h.i=new rn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bn(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Vr(12),fi(this),di(this);break e}Pr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pi(this,n)}this.S?(ai(this,u,o),xn&&this.i&&3==u&&(Ar(this.U,this.V,"tick",this.mb),this.V.start())):(Pr(this.j,this.m,o,null),pi(this,o)),4==u&&fi(this),this.i&&!this.J&&(4==u?Rs(this.l,this):(this.i=!1,ci(this)))}else(function(e){const t={};e=(e.g&&2<=ps(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(bn(e[r]))continue;var n=gr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Vr(12)):(this.s=0,Vr(13)),fi(this),di(this)}}}catch(u){}},Zt.mb=function(){if(this.g){var e=ps(this.g),t=this.g.ja();this.o<t.length&&(hi(this),ai(this,e,t),this.i&&4!=e&&ci(this))}},Zt.cancel=function(){this.J=!0,fi(this)},Zt.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ur(),Vr(17)),fi(this),this.s=2,di(this)):ui(this,this.Y-e)};var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof yi){this.h=e.h,wi(this,e.j),this.s=e.s,this.g=e.g,bi(this,e.m),this.l=e.l;var t=e.i,n=new Ri;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_i(this,n),this.o=e.o}else e&&(t=String(e).match(gi))?(this.h=!1,wi(this,t[1]||"",!0),this.s=Ei(t[2]||""),this.g=Ei(t[3]||"",!0),bi(this,t[4]),this.l=Ei(t[5]||"",!0),_i(this,t[6]||"",!0),this.o=Ei(t[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}function vi(e){return new yi(e)}function wi(e,t,n){e.j=n?Ei(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _i(e,t,n){t instanceof Ri?(e.i=t,function(e,t){t&&!e.j&&(Pi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Oi(this,t),Mi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ti(t,Ai)),e.i=new Ri(t,e.h))}function Si(e,t,n){e.i.set(t,n)}function Ii(e){return Si(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ei(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ti(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ci),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ci(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ti(t,ki,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ti(t,ki,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ti(n,"/"==n.charAt(0)?xi:Ni,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ti(n,Di)),e.join("")};var ki=/[#\/\?@]/g,Ni=/[#\?:]/g,xi=/[#\?]/g,Ai=/[#\?@]/g,Di=/#/g;function Ri(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Oi(e,t){Pi(e),t=Fi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Li(e,t){return Pi(e),t=Fi(e,t),e.g.has(t)}function Mi(e,t,n){Oi(e,t),0<n.length&&(e.i=null,e.g.set(Fi(e,t),gn(n)),e.h+=n.length)}function Fi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Zt=Ri.prototype).add=function(e,t){Pi(this),this.i=null,e=Fi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Zt.forEach=function(e,t){Pi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Zt.ta=function(){Pi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Zt.Z=function(e){Pi(this);let t=[];if("string"===typeof e)Li(this,e)&&(t=t.concat(this.g.get(Fi(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Zt.set=function(e,t){return Pi(this),this.i=null,Li(this,e=Fi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Zt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Zt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ui=class{constructor(e,t){this.g=e,this.map=t}};function ji(e){this.l=e||Vi,rn.PerformanceNavigationTiming?e=0<(e=rn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(rn.g&&rn.g.Ka&&rn.g.Ka()&&rn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vi=10;function Bi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zi(e){return e.h?1:e.g?e.g.size:0}function qi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ki(e,t){e.g?e.g.add(t):e.h=t}function Wi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gi(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return gn(e.i)}ji.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Hi,Qi=class{stringify(e){return rn.JSON.stringify(e,void 0)}parse(e){return rn.JSON.parse(e,void 0)}};function Yi(){this.g=new Qi}function $i(e,t,n){const r=n||"";try{mi(e,(function(e,n){let i=e;on(e)&&(i=dr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ji(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Xi(e){this.l=e.ec||null,this.j=e.ob||!1}function Zi(e,t){cr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=es,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn(Xi,Wr),Xi.prototype.g=function(){return new Zi(this.l,this.j)},Xi.prototype.i=(Hi={},function(){return Hi}),fn(Zi,cr);var es=0;function ts(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ns(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rs(e)}function rs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Zt=Zi.prototype).open=function(e,t){if(this.readyState!=es)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rs(this)},Zt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||rn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Zt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ns(this)),this.readyState=es},Zt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof rn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ts(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Zt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ns(this):rs(this),3==this.readyState&&ts(this)}},Zt.Za=function(e){this.g&&(this.response=this.responseText=e,ns(this))},Zt.Ya=function(e){this.g&&(this.response=e,ns(this))},Zt.ka=function(){this.g&&ns(this)},Zt.setRequestHeader=function(e,t){this.v.append(e,t)},Zt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Zt.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var is=rn.JSON.parse;function ss(e){cr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=os,this.L=this.M=!1}fn(ss,cr);var os="",as=/^https?$/i,ls=["POST","PUT"];function cs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,us(e),ds(e)}function us(e){e.F||(e.F=!0,ur(e,"complete"),ur(e,"error"))}function hs(e){if(e.h&&"undefined"!=typeof nn&&(!e.C[1]||4!=ps(e)||2!=e.da()))if(e.v&&4==ps(e))Tr(e.La,0,e);else if(ur(e,"readystatechange"),4==ps(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(gi)[1]||null;!i&&rn.self&&rn.self.location&&(i=rn.self.location.protocol.slice(0,-1)),r=!as.test(i?i.toLowerCase():"")}n=r}if(n)ur(e,"complete"),ur(e,"success");else{e.m=6;try{var s=2<ps(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",us(e)}}finally{ds(e)}}}function ds(e,t){if(e.g){fs(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ur(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function fs(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(rn.clearTimeout(e.A),e.A=null)}function ps(e){return e.g?e.g.readyState:0}function ms(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case os:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Io){return null}}function gs(e){let t="";return Kn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ys(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gs(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Si(e,t,n))}function vs(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ws(e){this.Ga=0,this.j=[],this.l=new Rr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vs("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vs("baseRetryDelayMs",5e3,e),this.hb=vs("retryDelaySeedMs",1e4,e),this.eb=vs("forwardChannelMaxRetries",2,e),this.xa=vs("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ji(e&&e.concurrentRequestLimit),this.Ja=new Yi,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function bs(e){if(Ss(e),3==e.H){var t=e.W++,n=vi(e.I);if(Si(n,"SID",e.K),Si(n,"RID",t),Si(n,"TYPE","terminate"),Ts(e,n),(t=new Zr(e,e.l,t)).L=2,t.A=Ii(vi(n)),n=!1,rn.navigator&&rn.navigator.sendBeacon)try{n=rn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&rn.Image&&((new Image).src=t.A,n=!0),n||(t.g=Fs(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ci(t)}Ls(e)}function _s(e){e.g&&(xs(e),e.g.cancel(),e.g=null)}function Ss(e){_s(e),e.u&&(rn.clearTimeout(e.u),e.u=null),Ds(e),e.i.cancel(),e.m&&("number"===typeof e.m&&rn.clearTimeout(e.m),e.m=null)}function Is(e){if(!Bi(e.i)&&!e.m){e.m=!0;var t=e.Na;vr||_r(),wr||(vr(),wr=!0),br.add(t,e),e.C=0}}function Es(e,t){var n;n=t?t.m:e.W++;const r=vi(e.I);Si(r,"SID",e.K),Si(r,"RID",n),Si(r,"AID",e.V),Ts(e,r),e.o&&e.s&&ys(r,e.o,e.s),n=new Zr(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Cs(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ki(e.i,n),ii(n,r,t)}function Ts(e,t){e.na&&Kn(e.na,(function(e,n){Si(t,n,e)})),e.h&&mi({},(function(e,n){Si(t,n,e)}))}function Cs(e,t,n){n=Math.min(e.j.length,n);var r=e.h?hn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{$i(a,e,"req"+n+"_")}catch(Va){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function ks(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;vr||_r(),wr||(vr(),wr=!0),br.add(t,e),e.A=0}}function Ns(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=zr(hn(e.Ma,e),Ps(e,e.A)),e.A++,!0)}function xs(e){null!=e.B&&(rn.clearTimeout(e.B),e.B=null)}function As(e){e.g=new Zr(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=vi(e.wa);Si(t,"RID","rpc"),Si(t,"SID",e.K),Si(t,"AID",e.V),Si(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Si(t,"TO",e.qa),Si(t,"TYPE","xmlhttp"),Ts(e,t),e.o&&e.s&&ys(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ii(vi(t)),n.u=null,n.S=!0,si(n,e)}function Ds(e){null!=e.v&&(rn.clearTimeout(e.v),e.v=null)}function Rs(e,t){var n=null;if(e.g==t){Ds(e),xs(e),e.g=null;var r=2}else{if(!qi(e.i,t))return;n=t.F,Wi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ur(r=Mr(),new Br(r,n)),Is(e)}else ks(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(zi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=zr(hn(e.Na,e,t),Ps(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ns(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Os(e,5);break;case 4:Os(e,10);break;case 3:Os(e,6);break;default:Os(e,2)}}function Ps(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Os(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=hn(e.pb,e);n||(n=new yi("//www.google.com/images/cleardot.gif"),rn.location&&"http"==rn.location.protocol||wi(n,"https"),Ii(n)),function(e,t){const n=new Rr;if(rn.Image){const r=new Image;r.onload=dn(Ji,n,r,"TestLoadImage: loaded",!0,t),r.onerror=dn(Ji,n,r,"TestLoadImage: error",!1,t),r.onabort=dn(Ji,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=dn(Ji,n,r,"TestLoadImage: timeout",!1,t),rn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vr(2);e.H=0,e.h&&e.h.za(t),Ls(e),Ss(e)}function Ls(e){if(e.H=0,e.ma=[],e.h){const t=Gi(e.i);0==t.length&&0==e.j.length||(yn(e.ma,t),yn(e.ma,e.j),e.i.i.length=0,gn(e.j),e.j.length=0),e.h.ya()}}function Ms(e,t,n){var r=n instanceof yi?vi(n):new yi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bi(r,r.m);else{var i=rn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new yi(null);r&&wi(s,r),t&&(s.g=t),i&&bi(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Si(r,n,t),Si(r,"VER",e.ra),Ts(e,r),r}function Fs(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ss(new Xi({ob:n})):new ss(e.va)).Oa(e.J),t}function Us(){}function js(){if(kn&&!(10<=Number(Fn)))throw Error("Environmental error: no available transport.")}function Vs(e,t){cr.call(this),this.g=new ws(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!bn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qs(this)}function Bs(e){$r.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zs(){Jr.call(this),this.status=1}function qs(e){this.g=e}function Ks(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ws(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Gs(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Zt=ss.prototype).Oa=function(e){this.M=e},Zt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qr.g(),this.C=this.u?Gr(this.u):Gr(Qr),this.g.onreadystatechange=hn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void cs(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=rn.FormData&&e instanceof rn.FormData,!(0<=mn(ls,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fs(this),0<this.B&&((this.L=function(e){return kn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hn(this.ua,this)):this.A=Tr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){cs(this,s)}},Zt.ua=function(){"undefined"!=typeof nn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},Zt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ur(this,"complete"),ur(this,"abort"),ds(this))},Zt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ds(this,!0)),ss.$.N.call(this)},Zt.La=function(){this.s||(this.G||this.v||this.l?hs(this):this.kb())},Zt.kb=function(){hs(this)},Zt.isActive=function(){return!!this.g},Zt.da=function(){try{return 2<ps(this)?this.g.status:-1}catch(Hi){return-1}},Zt.ja=function(){try{return this.g?this.g.responseText:""}catch(Hi){return""}},Zt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),is(t)}},Zt.Ia=function(){return this.m},Zt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Zt=ws.prototype).ra=8,Zt.H=1,Zt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Zr(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Wn(s),Hn(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Cs(this,i,t),Si(n=vi(this.I),"RID",e),Si(n,"CVER",22),this.F&&Si(n,"X-HTTP-Session-Id",this.F),Ts(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(gs(s)))+"&"+t:this.o&&ys(n,this.o,s)),Ki(this.i,i),this.bb&&Si(n,"TYPE","init"),this.P?(Si(n,"$req",t),Si(n,"SID","null"),i.aa=!0,ii(i,n,null)):ii(i,n,t),this.H=2}}else 3==this.H&&(e?Es(this,e):0==this.j.length||Bi(this.i)||Es(this))},Zt.Ma=function(){if(this.u=null,As(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zr(hn(this.jb,this),e)}},Zt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vr(10),_s(this),As(this))},Zt.ib=function(){null!=this.v&&(this.v=null,_s(this),Ns(this),Vr(19))},Zt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Vr(2)):(this.l.info("Failed to ping google.com"),Vr(1))},Zt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Zt=Us.prototype).Ba=function(){},Zt.Aa=function(){},Zt.za=function(){},Zt.ya=function(){},Zt.isActive=function(){return!0},Zt.Va=function(){},js.prototype.g=function(e,t){return new Vs(e,t)},fn(Vs,cr),Vs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Vr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ms(e,null,e.Y),Is(e)},Vs.prototype.close=function(){bs(this.g)},Vs.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=dr(e),e=n);t.j.push(new Ui(t.fb++,e)),3==t.H&&Is(t)},Vs.prototype.N=function(){this.g.h=null,delete this.j,bs(this.g),delete this.g,Vs.$.N.call(this)},fn(Bs,$r),fn(zs,Jr),fn(qs,Us),qs.prototype.Ba=function(){ur(this.g,"a")},qs.prototype.Aa=function(e){ur(this.g,new Bs(e))},qs.prototype.za=function(e){ur(this.g,new zs)},qs.prototype.ya=function(){ur(this.g,"b")},fn(Ks,(function(){this.blockSize=-1})),Ks.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ks.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ws(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ws(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ws(this,r),i=0;break}}this.h=i,this.i+=t},Ks.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Hs={};function Qs(e){return-128<=e&&128>e?function(e,t){var n=Hs;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Gs([0|e],0>e?-1:0)})):new Gs([0|e],0>e?-1:0)}function Ys(e){if(isNaN(e)||!isFinite(e))return Js;if(0>e)return no(Ys(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=$s;return new Gs(t,0)}var $s=4294967296,Js=Qs(0),Xs=Qs(1),Zs=Qs(16777216);function eo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function to(e){return-1==e.h}function no(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Gs(n,~e.h).add(Xs)}function ro(e,t){return e.add(no(t))}function io(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function so(e,t){this.g=e,this.h=t}function oo(e,t){if(eo(t))throw Error("division by zero");if(eo(e))return new so(Js,Js);if(to(e))return t=oo(no(e),t),new so(no(t.g),no(t.h));if(to(t))return t=oo(e,no(t)),new so(no(t.g),t.h);if(30<e.g.length){if(to(e)||to(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Xs,r=t;0>=r.X(e);)n=ao(n),r=ao(r);var i=lo(n,1),s=lo(r,1);for(r=lo(r,2),n=lo(n,2);!eo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=lo(r,1),n=lo(n,1)}return t=ro(e,i.R(t)),new so(i,t)}for(i=Js;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ys(n)).R(t);to(o)||0<o.X(e);)o=(s=Ys(n-=r)).R(t);eo(s)&&(s=Xs),i=i.add(s),e=ro(e,o)}return new so(i,e)}function ao(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Gs(n,e.h)}function lo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Gs(i,e.h)}(Zt=Gs.prototype).ea=function(){if(to(this))return-no(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:$s+r)*t,t*=$s}return e},Zt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(eo(this))return"0";if(to(this))return"-"+no(this).toString(e);for(var t=Ys(Math.pow(e,6)),n=this,r="";;){var i=oo(n,t).g,s=((0<(n=ro(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(eo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Zt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Zt.X=function(e){return to(e=ro(this,e))?-1:eo(e)?0:1},Zt.abs=function(){return to(this)?no(this):this},Zt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Gs(n,-2147483648&n[n.length-1]?-1:0)},Zt.R=function(e){if(eo(this)||eo(e))return Js;if(to(this))return to(e)?no(this).R(no(e)):no(no(this).R(e));if(to(e))return no(this.R(no(e)));if(0>this.X(Zs)&&0>e.X(Zs))return Ys(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,io(n,2*r+2*i),n[2*r+2*i+1]+=s*l,io(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,io(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,io(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Gs(n,0)},Zt.gb=function(e){return oo(this,e).h},Zt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Gs(n,this.h&e.h)},Zt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Gs(n,this.h|e.h)},Zt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Gs(n,this.h^e.h)},js.prototype.createWebChannel=js.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Kr.COMPLETE="complete",Hr.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",cr.prototype.listen=cr.prototype.O,ss.prototype.listenOnce=ss.prototype.P,ss.prototype.getLastError=ss.prototype.Sa,ss.prototype.getLastErrorCode=ss.prototype.Ia,ss.prototype.getStatus=ss.prototype.da,ss.prototype.getResponseJson=ss.prototype.Wa,ss.prototype.getResponseText=ss.prototype.ja,ss.prototype.send=ss.prototype.ha,ss.prototype.setWithCredentials=ss.prototype.Oa,Ks.prototype.digest=Ks.prototype.l,Ks.prototype.reset=Ks.prototype.reset,Ks.prototype.update=Ks.prototype.j,Gs.prototype.add=Gs.prototype.add,Gs.prototype.multiply=Gs.prototype.R,Gs.prototype.modulo=Gs.prototype.gb,Gs.prototype.compare=Gs.prototype.X,Gs.prototype.toNumber=Gs.prototype.ea,Gs.prototype.toString=Gs.prototype.toString,Gs.prototype.getBits=Gs.prototype.D,Gs.fromNumber=Ys,Gs.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return no(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ys(Math.pow(n,8)),i=Js,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ys(Math.pow(n,o)),i=i.R(o).add(Ys(a))):i=(i=i.R(r)).add(Ys(a))}return i};var co=tn.createWebChannelTransport=function(){return new js},uo=tn.getStatEventTarget=function(){return Mr()},ho=tn.ErrorCode=qr,fo=tn.EventType=Kr,po=tn.Event=Or,mo=tn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},go=(tn.FetchXmlHttpFactory=Xi,tn.WebChannel=Hr),yo=tn.XhrIo=ss,vo=tn.Md5=Ks,wo=tn.Integer=Gs;const bo="@firebase/firestore";class _o{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_o.UNAUTHENTICATED=new _o(null),_o.GOOGLE_CREDENTIALS=new _o("google-credentials-uid"),_o.FIRST_PARTY=new _o("first-party-uid"),_o.MOCK_USER=new _o("mock-user");let So="10.7.0";const Io=new Qe("@firebase/firestore");function Eo(){return Io.logLevel}function To(e){if(Io.logLevel<=qe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(No);Io.debug("Firestore (".concat(So,"): ").concat(e),...i)}}function Co(e){if(Io.logLevel<=qe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(No);Io.error("Firestore (".concat(So,"): ").concat(e),...i)}}function ko(e){if(Io.logLevel<=qe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(No);Io.warn("Firestore (".concat(So,"): ").concat(e),...i)}}function No(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function xo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(So,") INTERNAL ASSERTION FAILED: ")+e;throw Co(t),new Error(t)}function Ao(e,t){e||xo()}function Do(e,t){return e}const Ro={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Po extends Te{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Lo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Mo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_o.UNAUTHENTICATED)))}shutdown(){}}class Fo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Uo{constructor(e){this.t=e,this.currentUser=_o.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{To("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(To("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(To("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ao("string"==typeof t.accessToken),new Lo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ao(null===e||"string"==typeof e),new _o(e)}}class jo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=_o.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new jo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(_o.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&To("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,To("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{To("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):To("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ao("string"==typeof e.token),this.R=e.token,new Bo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ko{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=qo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Wo(e,t){return e<t?-1:e>t?1:0}function Go(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ho(e){return e+"\0"}class Qo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Po(Ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Po(Ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Po(Ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Po(Ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qo.fromMillis(Date.now())}static fromDate(e){return Qo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Qo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wo(this.nanoseconds,e.nanoseconds):Wo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yo(e)}static min(){return new Yo(new Qo(0,0))}static max(){return new Yo(new Qo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $o{constructor(e,t,n){void 0===t?t=0:t>e.length&&xo(),void 0===n?n=e.length-t:n>e.length-t&&xo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jo extends $o{construct(e,t,n){return new Jo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Po(Ro.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Jo(e)}static emptyPath(){return new Jo([])}}const Xo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zo extends $o{construct(e,t,n){return new Zo(e,t,n)}static isValidIdentifier(e){return Xo.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zo(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Po(Ro.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Po(Ro.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Po(Ro.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Po(Ro.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zo(t)}static emptyPath(){return new Zo([])}}class ea{constructor(e){this.path=e}static fromPath(e){return new ea(Jo.fromString(e))}static fromName(e){return new ea(Jo.fromString(e).popFirst(5))}static empty(){return new ea(Jo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ea(new Jo(e.slice()))}}class ta{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function na(e){return e.fields.find((e=>2===e.kind))}function ra(e){return e.fields.filter((e=>2!==e.kind))}ta.UNKNOWN_ID=-1;class ia{constructor(e,t){this.fieldPath=e,this.kind=t}}class sa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sa(0,la.min())}}function oa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Yo.fromTimestamp(1e9===r?new Qo(n+1,0):new Qo(n,r));return new la(i,ea.empty(),t)}function aa(e){return new la(e.readTime,e.key,-1)}class la{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new la(Yo.min(),ea.empty(),-1)}static max(){return new la(Yo.max(),ea.empty(),-1)}}function ca(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ea.comparator(e.documentKey,t.documentKey),0!==n?n:Wo(e.largestBatchId,t.largestBatchId))}const ua="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ha{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function da(e){if(e.code!==Ro.FAILED_PRECONDITION||e.message!==ua)throw e;To("LocalStore","Unexpectedly lost primary lease")}class fa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fa?t:fa.resolve(t)}catch(e){return fa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fa.reject(t)}static resolve(e){return new fa(((t,n)=>{t(e)}))}static reject(e){return new fa(((t,n)=>{n(e)}))}static waitFor(e){return new fa(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=fa.resolve(!1);for(const n of e)t=t.next((e=>e?fa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new fa(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new fa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class pa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Oo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ya(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Sa(t.target.error);this.V.reject(new ya(e,n))}}static open(e,t,n,r){try{return new pa(t,e.transaction(r,n))}catch(e){throw new ya(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(To("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wa(t)}}class ma{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===ma.S(we())&&Co("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return To("SimpleDb","Removing database:",e),ba(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ee())return!1;if(ma.C())return!0;const e=we(),t=ma.S(e),n=0<t&&t<10,r=ma.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/WebPortPuzzles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(To("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ya(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Po(Ro.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Po(Ro.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ya(e,r))},r.onupgradeneeded=e=>{To("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{To("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=pa.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),fa.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(To("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ga{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ba(this.k.delete())}}class ya extends Po{constructor(e,t){super(Ro.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function va(e){return"IndexedDbTransactionError"===e.name}class wa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(To("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(To("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ba(n)}add(e){return To("SimpleDb","ADD",this.store.name,e,e),ba(this.store.add(e))}get(e){return ba(this.store.get(e)).next((t=>(void 0===t&&(t=null),To("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return To("SimpleDb","DELETE",this.store.name,e),ba(this.store.delete(e))}count(){return To("SimpleDb","COUNT",this.store.name),ba(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new fa(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new fa(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){To("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new fa(((n,r)=>{t.onerror=e=>{const t=Sa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new fa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ga(i),o=t(i.primaryKey,i.value,s);if(o instanceof fa){const e=o.catch((e=>(s.done(),fa.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>fa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ba(e){return new fa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Sa(e.target.error);n(t)}}))}let _a=!1;function Sa(e){const t=ma.S(we());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Po("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return _a||(_a=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ia{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){To("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{To("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){va(e)?To("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await da(e)}await this.ee(6e4)}))}}class Ea{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return fa.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return To("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(To("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=aa(t);ca(r,n)>0&&(n=r)})),new la(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ca(e){return null==e}function ka(e){return 0===e&&1/e==-1/0}function Na(e){return"number"==typeof e&&Number.isInteger(e)&&!ka(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function xa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Da(t)),t=Aa(e.get(n),t);return Da(t)}function Aa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Da(e){return e+"\x01\x01"}function Ra(e){const t=e.length;if(Ao(t>=2),2===t)return Ao("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Jo.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&xo(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:xo()}s=t+2}return new Jo(r)}Ta._e=-1;const Pa=["userId","batchId"];function Oa(e,t){return[e,xa(t)]}function La(e,t,n){return[e,xa(t),n]}const Ma={},Fa=["prefixPath","collectionGroup","readTime","documentId"],Ua=["prefixPath","collectionGroup","documentId"],ja=["collectionGroup","readTime","prefixPath","documentId"],Va=["canonicalId","targetId"],Ba=["targetId","path"],za=["path","targetId"],qa=["collectionId","parent"],Ka=["indexId","uid"],Wa=["uid","sequenceNumber"],Ga=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ha=["indexId","uid","orderedDocumentKey"],Qa=["userId","collectionPath","documentId"],Ya=["userId","collectionPath","largestBatchId"],$a=["userId","collectionGroup","largestBatchId"],Ja=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xa=[...Ja,"documentOverlays"],Za=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],el=Za,tl=[...el,"indexConfiguration","indexState","indexEntries"];class nl extends ha{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function rl(e,t){const n=Do(e);return ma.M(n.ae,t)}function il(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ol(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class al{constructor(e,t){this.comparator=e,this.root=t||cl.EMPTY}insert(e,t){return new al(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cl.BLACK,null,null))}remove(e){return new al(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:cl.RED,this.left=null!=r?r:cl.EMPTY,this.right=null!=i?i:cl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new cl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return cl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xo();if(this.right.isRed())throw xo();const e=this.left.check();if(e!==this.right.check())throw xo();return e+(this.isRed()?0:1)}}cl.EMPTY=null,cl.RED=!0,cl.BLACK=!1,cl.EMPTY=new class{constructor(){this.size=0}get key(){throw xo()}get value(){throw xo()}get color(){throw xo()}get left(){throw xo()}get right(){throw xo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new cl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ul{constructor(e){this.comparator=e,this.data=new al(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hl(this.data.getIterator())}getIteratorFrom(e){return new hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ul))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ul(this.comparator);return t.data=e,t}}class hl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dl(e){return e.hasNext()?e.getNext():void 0}class fl{constructor(e){this.fields=e,e.sort(Zo.comparator)}static empty(){return new fl([])}unionWith(e){let t=new ul(Zo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class pl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ml{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pl("Invalid base64 string: "+e):e}}(e);return new ml(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ml(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ml.EMPTY_BYTE_STRING=new ml("");const gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yl(e){if(Ao(!!e),"string"==typeof e){let t=0;const n=gl.exec(e);if(Ao(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vl(e.seconds),nanos:vl(e.nanos)}}function vl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wl(e){return"string"==typeof e?ml.fromBase64String(e):ml.fromUint8Array(e)}function bl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _l(e){const t=e.mapValue.fields.__previous_value__;return bl(t)?_l(t):t}function Sl(e){const t=yl(e.mapValue.fields.__local_write_time__.timestampValue);return new Qo(t.seconds,t.nanos)}class Il{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class El{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}const Tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cl={nullValue:"NULL_VALUE"};function kl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bl(e)?4:Bl(e)?9007199254740991:10:xo()}function Nl(e,t){if(e===t)return!0;const n=kl(e);if(n!==kl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sl(e).isEqual(Sl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yl(e.timestampValue),r=yl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wl(e.bytesValue).isEqual(wl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vl(e.geoPointValue.latitude)===vl(t.geoPointValue.latitude)&&vl(e.geoPointValue.longitude)===vl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vl(e.integerValue)===vl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vl(e.doubleValue),r=vl(t.doubleValue);return n===r?ka(n)===ka(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Go(e.arrayValue.values||[],t.arrayValue.values||[],Nl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(il(n)!==il(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Nl(n[i],r[i])))return!1;return!0}(e,t);default:return xo()}}function xl(e,t){return void 0!==(e.values||[]).find((e=>Nl(e,t)))}function Al(e,t){if(e===t)return 0;const n=kl(e),r=kl(t);if(n!==r)return Wo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vl(e.integerValue||e.doubleValue),r=vl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dl(e.timestampValue,t.timestampValue);case 4:return Dl(Sl(e),Sl(t));case 5:return Wo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wl(e),r=wl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wo(n[i],r[i]);if(0!==e)return e}return Wo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wo(vl(e.latitude),vl(t.latitude));return 0!==n?n:Wo(vl(e.longitude),vl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Al(n[i],r[i]);if(e)return e}return Wo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Tl.mapValue&&t===Tl.mapValue)return 0;if(e===Tl.mapValue)return 1;if(t===Tl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Wo(r[o],s[o]);if(0!==e)return e;const t=Al(n[r[o]],i[s[o]]);if(0!==t)return t}return Wo(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xo()}}function Dl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wo(e,t);const n=yl(e),r=yl(t),i=Wo(n.seconds,r.seconds);return 0!==i?i:Wo(n.nanos,r.nanos)}function Rl(e){return Pl(e)}function Pl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ea.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Pl(e.fields[i]));return n+"}"}(e.mapValue):xo()}function Ol(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ll(e){return!!e&&"integerValue"in e}function Ml(e){return!!e&&"arrayValue"in e}function Fl(e){return!!e&&"nullValue"in e}function Ul(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jl(e){return!!e&&"mapValue"in e}function Vl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Vl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Bl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function zl(e){return"nullValue"in e?Cl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ol(El.empty(),ea.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:xo()}function ql(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ol(El.empty(),ea.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Tl:xo()}function Kl(e,t){const n=Al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wl(e,t){const n=Al(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Gl{constructor(e){this.value=e}static empty(){return new Gl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!jl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=Zo.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());jl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Gl(Vl(this.value))}}function Hl(e){const t=[];return sl(e.fields,((e,n)=>{const r=new Zo([e]);if(jl(n)){const e=Hl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new fl(t)}class Ql{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ql(e,0,Yo.min(),Yo.min(),Yo.min(),Gl.empty(),0)}static newFoundDocument(e,t,n,r){return new Ql(e,1,t,Yo.min(),n,r,0)}static newNoDocument(e,t){return new Ql(e,2,t,Yo.min(),Yo.min(),Gl.empty(),0)}static newUnknownDocument(e,t){return new Ql(e,3,t,Yo.min(),Yo.min(),Gl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ql&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ql(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Yl{constructor(e,t){this.position=e,this.inclusive=t}}function $l(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ea.comparator(ea.fromName(o.referenceValue),n.key):Al(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Jl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nl(e.position[n],t.position[n]))return!1;return!0}class Xl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Zl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ec{}class tc extends ec{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hc(e,t,n):"array-contains"===t?new mc(e,n):"in"===t?new gc(e,n):"not-in"===t?new yc(e,n):"array-contains-any"===t?new vc(e,n):new tc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new dc(e,n):new fc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Al(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nc extends ec{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new nc(e,t)}matches(e){return rc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function rc(e){return"and"===e.op}function ic(e){return"or"===e.op}function sc(e){return oc(e)&&rc(e)}function oc(e){for(const t of e.filters)if(t instanceof nc)return!1;return!0}function ac(e){if(e instanceof tc)return e.field.canonicalString()+e.op.toString()+Rl(e.value);if(sc(e))return e.filters.map((e=>ac(e))).join(",");{const t=e.filters.map((e=>ac(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function lc(e,t){return e instanceof tc?function(e,t){return t instanceof tc&&e.op===t.op&&e.field.isEqual(t.field)&&Nl(e.value,t.value)}(e,t):e instanceof nc?function(e,t){return t instanceof nc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&lc(n,t.filters[r])),!0)}(e,t):void xo()}function cc(e,t){const n=e.filters.concat(t);return nc.create(n,e.op)}function uc(e){return e instanceof tc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rl(e.value))}(e):e instanceof nc?function(e){return e.op.toString()+" {"+e.getFilters().map(uc).join(" ,")+"}"}(e):"Filter"}class hc extends tc{constructor(e,t,n){super(e,t,n),this.key=ea.fromName(n.referenceValue)}matches(e){const t=ea.comparator(e.key,this.key);return this.matchesComparison(t)}}class dc extends tc{constructor(e,t){super(e,"in",t),this.keys=pc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fc extends tc{constructor(e,t){super(e,"not-in",t),this.keys=pc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ea.fromName(e.referenceValue)))}class mc extends tc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ml(t)&&xl(t.arrayValue,this.value)}}class gc extends tc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xl(this.value.arrayValue,t)}}class yc extends tc{constructor(e,t){super(e,"not-in",t)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xl(this.value.arrayValue,t)}}class vc extends tc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ml(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>xl(this.value.arrayValue,e)))}}class wc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function bc(e){return new wc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function _c(e){const t=Do(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ac(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ca(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Rl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Rl(e))).join(",")),t.ce=e}return t.ce}function Sc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Zl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!lc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jl(e.startAt,t.startAt)&&Jl(e.endAt,t.endAt)}function Ic(e){return ea.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ec(e,t){return e.filters.filter((e=>e instanceof tc&&e.field.isEqual(t)))}function Tc(e,t,n){let r=Cl,i=!0;for(const s of Ec(e,t)){let e=Cl,t=!0;switch(s.op){case"<":case"<=":e=zl(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Cl}Kl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Kl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Cc(e,t,n){let r=Tl,i=!0;for(const s of Ec(e,t)){let e=Tl,t=!0;switch(s.op){case">=":case">":e=ql(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Tl}Wl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class kc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Nc(e,t,n,r,i,s,o,a){return new kc(e,t,n,r,i,s,o,a)}function xc(e){return new kc(e)}function Ac(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dc(e){return null!==e.collectionGroup}function Rc(e){const t=Do(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ul(Zo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Xl(r,n))})),e.has(Zo.keyField().canonicalString())||t.le.push(new Xl(Zo.keyField(),n))}return t.le}function Pc(e){const t=Do(e);return t.he||(t.he=Oc(t,Rc(e))),t.he}function Oc(e,t){if("F"===e.limitType)return bc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Xl(e.field,t)}));const n=e.endAt?new Yl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yl(e.startAt.position,e.startAt.inclusive):null;return bc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Lc(e,t){const n=e.filters.concat([t]);return new kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Mc(e,t,n){return new kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fc(e,t){return Sc(Pc(e),Pc(t))&&e.limitType===t.limitType}function Uc(e){return"".concat(_c(Pc(e)),"|lt:").concat(e.limitType)}function jc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>uc(e))).join(", "),"]")),Ca(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Rl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Rl(e))).join(",")),"Target(".concat(t,")")}(Pc(e)),"; limitType=").concat(e.limitType,")")}function Vc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ea.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Rc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=$l(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rc(e),t))&&!(e.endAt&&!function(e,t,n){const r=$l(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rc(e),t))}(e,t)}function Bc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zc(e){return(t,n)=>{let r=!1;for(const i of Rc(e)){const e=qc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function qc(e,t,n){const r=e.field.isKeyField()?ea.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Al(r,i):xo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xo()}}class Kc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ol(this.inner)}size(){return this.innerSize}}const Wc=new al(ea.comparator);function Gc(){return Wc}const Hc=new al(ea.comparator);function Qc(){let e=Hc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Yc(e){let t=Hc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $c(){return Xc()}function Jc(){return Xc()}function Xc(){return new Kc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Zc=new al(ea.comparator),eu=new ul(ea.comparator);function tu(){let e=eu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const nu=new ul(Wo);function ru(){return nu}function iu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ka(t)?"-0":t}}function su(e){return{integerValue:""+e}}function ou(e,t){return Na(t)?su(t):iu(e,t)}class au{constructor(){this._=void 0}}function lu(e,t,n){return e instanceof hu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bl(t)&&(t=_l(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof du?fu(e,t):e instanceof pu?mu(e,t):function(e,t){const n=uu(e,t),r=yu(n)+yu(e.Ie);return Ll(n)&&Ll(e.Ie)?su(r):iu(e.serializer,r)}(e,t)}function cu(e,t,n){return e instanceof du?fu(e,t):e instanceof pu?mu(e,t):n}function uu(e,t){return e instanceof gu?function(e){return Ll(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class hu extends au{}class du extends au{constructor(e){super(),this.elements=e}}function fu(e,t){const n=vu(t);for(const r of e.elements)n.some((e=>Nl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class pu extends au{constructor(e){super(),this.elements=e}}function mu(e,t){let n=vu(t);for(const r of e.elements)n=n.filter((e=>!Nl(e,r)));return{arrayValue:{values:n}}}class gu extends au{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function yu(e){return vl(e.integerValue||e.doubleValue)}function vu(e){return Ml(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wu{constructor(e,t){this.field=e,this.transform=t}}class bu{constructor(e,t){this.version=e,this.transformResults=t}}class _u{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _u}static exists(e){return new _u(void 0,e)}static updateTime(e){return new _u(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Iu{}function Eu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ou(e.key,_u.none()):new xu(e.key,e.data,_u.none());{const n=e.data,r=Gl.empty();let i=new ul(Zo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Au(e.key,r,new fl(i.toArray()),_u.none())}}function Tu(e,t,n){e instanceof xu?function(e,t,n){const r=e.value.clone(),i=Ru(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Au?function(e,t,n){if(!Su(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ru(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Du(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cu(e,t,n,r){return e instanceof xu?function(e,t,n,r){if(!Su(e.precondition,t))return n;const i=e.value.clone(),s=Pu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Au?function(e,t,n,r){if(!Su(e.precondition,t))return n;const i=Pu(e.fieldTransforms,r,t),s=t.data;return s.setAll(Du(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Su(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ku(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=uu(r.transform,e||null);null!=i&&(null===n&&(n=Gl.empty()),n.set(r.field,i))}return n||null}function Nu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Go(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof du&&t instanceof du||e instanceof pu&&t instanceof pu?Go(e.elements,t.elements,Nl):e instanceof gu&&t instanceof gu?Nl(e.Ie,t.Ie):e instanceof hu&&t instanceof hu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xu extends Iu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Au extends Iu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Du(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ru(e,t,n){const r=new Map;Ao(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,cu(o,a,n[i]))}return r}function Pu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lu(e,s,t))}return r}class Ou extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lu extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Cu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Cu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Jc();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Eu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Yo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tu())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,((e,t)=>Nu(e,t)))&&Go(this.baseMutations,e.baseMutations,((e,t)=>Nu(e,t)))}}class Fu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ao(e.mutations.length===n.length);let r=Zc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Fu(e,t,n,r)}}class Uu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ju{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vu,Bu;function zu(e){switch(e){default:return xo();case Ro.CANCELLED:case Ro.UNKNOWN:case Ro.DEADLINE_EXCEEDED:case Ro.RESOURCE_EXHAUSTED:case Ro.INTERNAL:case Ro.UNAVAILABLE:case Ro.UNAUTHENTICATED:return!1;case Ro.INVALID_ARGUMENT:case Ro.NOT_FOUND:case Ro.ALREADY_EXISTS:case Ro.PERMISSION_DENIED:case Ro.FAILED_PRECONDITION:case Ro.ABORTED:case Ro.OUT_OF_RANGE:case Ro.UNIMPLEMENTED:case Ro.DATA_LOSS:return!0}}function qu(e){if(void 0===e)return Co("GRPC error has no .code"),Ro.UNKNOWN;switch(e){case Vu.OK:return Ro.OK;case Vu.CANCELLED:return Ro.CANCELLED;case Vu.UNKNOWN:return Ro.UNKNOWN;case Vu.DEADLINE_EXCEEDED:return Ro.DEADLINE_EXCEEDED;case Vu.RESOURCE_EXHAUSTED:return Ro.RESOURCE_EXHAUSTED;case Vu.INTERNAL:return Ro.INTERNAL;case Vu.UNAVAILABLE:return Ro.UNAVAILABLE;case Vu.UNAUTHENTICATED:return Ro.UNAUTHENTICATED;case Vu.INVALID_ARGUMENT:return Ro.INVALID_ARGUMENT;case Vu.NOT_FOUND:return Ro.NOT_FOUND;case Vu.ALREADY_EXISTS:return Ro.ALREADY_EXISTS;case Vu.PERMISSION_DENIED:return Ro.PERMISSION_DENIED;case Vu.FAILED_PRECONDITION:return Ro.FAILED_PRECONDITION;case Vu.ABORTED:return Ro.ABORTED;case Vu.OUT_OF_RANGE:return Ro.OUT_OF_RANGE;case Vu.UNIMPLEMENTED:return Ro.UNIMPLEMENTED;case Vu.DATA_LOSS:return Ro.DATA_LOSS;default:return xo()}}(Bu=Vu||(Vu={}))[Bu.OK=0]="OK",Bu[Bu.CANCELLED=1]="CANCELLED",Bu[Bu.UNKNOWN=2]="UNKNOWN",Bu[Bu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bu[Bu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bu[Bu.NOT_FOUND=5]="NOT_FOUND",Bu[Bu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bu[Bu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bu[Bu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bu[Bu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bu[Bu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bu[Bu.ABORTED=10]="ABORTED",Bu[Bu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bu[Bu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bu[Bu.INTERNAL=13]="INTERNAL",Bu[Bu.UNAVAILABLE=14]="UNAVAILABLE",Bu[Bu.DATA_LOSS=15]="DATA_LOSS";let Ku=null;function Wu(){return new TextEncoder}const Gu=new wo([4294967295,4294967295],0);function Hu(e){const t=Wu().encode(e),n=new vo;return n.update(t),new Uint8Array(n.digest())}function Qu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new wo([n,r],0),new wo([i,s],0)]}class Yu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $u("Invalid padding: ".concat(t));if(n<0)throw new $u("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new $u("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new $u("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=wo.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(wo.fromNumber(n)));return 1===r.compare(Gu)&&(r=new wo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Hu(e),[n,r]=Qu(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Yu(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Hu(e),[n,r]=Qu(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ju{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ju(Yo.min(),r,new al(Wo),Gc(),tu())}}class Xu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xu(n,t,tu(),tu(),tu())}}class Zu{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class eh{constructor(e,t){this.targetId=e,this.fe=t}}class th{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ml.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class nh{constructor(){this.ge=0,this.pe=sh(),this.ye=ml.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=tu(),t=tu(),n=tu();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xo()}})),new Xu(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=sh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ao(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class rh{constructor(e){this.Le=e,this.ke=new Map,this.qe=Gc(),this.Qe=ih(),this.Ke=new al(Wo)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:xo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Ic(i))if(0===n){const e=new ea(i.path);this.We(t,e,Ql.newNoDocument(e,Yo.min()))}else Ao(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Ku||Ku.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=wl(n).toUint8Array()}catch(e){if(e instanceof pl)return ko("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Yu(s,r,i)}catch(e){return ko(e instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Ic(i.target)){const t=new ea(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Ql.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=tu();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Ju(e,t,this.Ke,this.qe,n);return this.qe=Gc(),this.Qe=ih(),this.Ke=new al(Wo),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new nh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new ul(Wo),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||To("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new nh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ih(){return new al(ea.comparator)}function sh(){return new al(ea.comparator)}const oh={asc:"ASCENDING",desc:"DESCENDING"},ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lh={and:"AND",or:"OR"};class ch{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uh(e,t){return e.useProto3Json||Ca(t)?t:{value:t}}function hh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function dh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fh(e,t){return hh(e,t.toTimestamp())}function ph(e){return Ao(!!e),Yo.fromTimestamp(function(e){const t=yl(e);return new Qo(t.seconds,t.nanos)}(e))}function mh(e,t){return function(e){return new Jo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function gh(e){const t=Jo.fromString(e);return Ao(Uh(t)),t}function yh(e,t){return mh(e.databaseId,t.path)}function vh(e,t){const n=gh(t);if(n.get(1)!==e.databaseId.projectId)throw new Po(Ro.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Po(Ro.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ea(Sh(n))}function wh(e,t){return mh(e.databaseId,t)}function bh(e){const t=gh(e);return 4===t.length?Jo.emptyPath():Sh(t)}function _h(e){return new Jo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sh(e){return Ao(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ih(e,t,n){return{name:yh(e,t),fields:n.value.mapValue.fields}}function Eh(e,t,n){const r=vh(e,t.name),i=ph(t.updateTime),s=t.createTime?ph(t.createTime):Yo.min(),o=new Gl({mapValue:{fields:t.fields}}),a=Ql.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Th(e,t){let n;if(t instanceof xu)n={update:Ih(e,t.key,t.value)};else if(t instanceof Ou)n={delete:yh(e,t.key)};else if(t instanceof Au)n={update:Ih(e,t.key,t.data),updateMask:Fh(t.fieldMask)};else{if(!(t instanceof Lu))return xo();n={verify:yh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof hu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof du)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gu)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw xo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xo()}(e,t.precondition)),n}function Ch(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?_u.updateTime(ph(e.updateTime)):void 0!==e.exists?_u.exists(e.exists):_u.none()}(t.currentDocument):_u.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ao("REQUEST_TIME"===t.setToServerValue),n=new hu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new du(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new pu(e)}else"increment"in t?n=new gu(e,t.increment):xo();const r=Zo.fromServerFormat(t.fieldPath);return new wu(r,n)}(e,t))):[];if(t.update){t.update.name;const i=vh(e,t.update.name),s=new Gl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new fl(t.map((e=>Zo.fromServerFormat(e))))}(t.updateMask);return new Au(i,s,e,n,r)}return new xu(i,s,n,r)}if(t.delete){const r=vh(e,t.delete);return new Ou(r,n)}if(t.verify){const r=vh(e,t.verify);return new Lu(r,n)}return xo()}function kh(e,t){return{documents:[wh(e,t.path)]}}function Nh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=wh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=wh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Mh(nc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Oh(e.field),direction:Dh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=uh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xh(e){let t=bh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ao(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ah(e);return t instanceof nc&&sc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Xl(Lh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ca(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Yl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Yl(n,t)}(n.endAt)),Nc(t,i,o,s,a,"F",l,c)}function Ah(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lh(e.unaryFilter.field);return tc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Lh(e.unaryFilter.field);return tc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lh(e.unaryFilter.field);return tc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Lh(e.unaryFilter.field);return tc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xo()}}(e):void 0!==e.fieldFilter?function(e){return tc.create(Lh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return nc.create(e.compositeFilter.filters.map((e=>Ah(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xo()}}(e.compositeFilter.op))}(e):xo()}function Dh(e){return oh[e]}function Rh(e){return ah[e]}function Ph(e){return lh[e]}function Oh(e){return{fieldPath:e.canonicalString()}}function Lh(e){return Zo.fromServerFormat(e.fieldPath)}function Mh(e){return e instanceof tc?function(e){if("=="===e.op){if(Ul(e.value))return{unaryFilter:{field:Oh(e.field),op:"IS_NAN"}};if(Fl(e.value))return{unaryFilter:{field:Oh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ul(e.value))return{unaryFilter:{field:Oh(e.field),op:"IS_NOT_NAN"}};if(Fl(e.value))return{unaryFilter:{field:Oh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oh(e.field),op:Rh(e.op),value:e.value}}}(e):e instanceof nc?function(e){const t=e.getFilters().map((e=>Mh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ph(e.op),filters:t}}}(e):xo()}function Fh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Uh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class jh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ml.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new jh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vh{constructor(e){this.ut=e}}function Bh(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:yh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:hh(e,t.version.toTimestamp()),createTime:hh(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qh(t.version)};else{if(!t.isUnknownDocument())return xo();r.unknownDocument={path:n.path.toArray(),version:qh(t.version)}}return r}function zh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qh(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Kh(e){const t=new Qo(e.seconds,e.nanoseconds);return Yo.fromTimestamp(t)}function Wh(e,t){const n=(t.baseMutations||[]).map((t=>Ch(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Ch(e.ut,t))),i=Qo.fromMillis(t.localWriteTimeMs);return new Mu(t.batchId,i,n,r)}function Gh(e){const t=Kh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Kh(e.lastLimboFreeSnapshotVersion):Yo.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ao(1===e.documents.length),Pc(xc(bh(e.documents[0])))}(e.query):function(e){return Pc(xh(e))}(e.query),new jh(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ml.fromBase64String(e.resumeToken))}function Hh(e,t){const n=qh(t.snapshotVersion),r=qh(t.lastLimboFreeSnapshotVersion);let i;i=Ic(t.target)?kh(e.ut,t.target):Nh(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:_c(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qh(e){const t=xh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Mc(t,t.limit,"L"):t}function Yh(e,t){return new Uu(t.largestBatchId,Ch(e.ut,t.overlayMutation))}function $h(e,t){const n=t.path.lastSegment();return[e,xa(t.path.popLast()),n]}function Jh(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:qh(r.readTime),documentKey:xa(r.documentKey.path),largestBatchId:r.largestBatchId}}class Xh{getBundleMetadata(e,t){return Zh(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Kh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Zh(e).put(function(e){return{bundleId:e.id,createTime:qh(ph(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return ed(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Qh(e.bundledQuery),readTime:Kh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return ed(e).put(function(e){return{name:e.name,readTime:qh(ph(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Zh(e){return rl(e,"bundles")}function ed(e){return rl(e,"namedQueries")}class td{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new td(e,n)}getOverlay(e,t){return nd(e).get($h(this.userId,t)).next((e=>e?Yh(this.serializer,e):null))}getOverlays(e,t){const n=$c();return fa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Uu(t,i);r.push(this.lt(e,s))})),fa.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(xa(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(nd(e).H("collectionPathOverlayIndex",r))})),fa.waitFor(i)}getOverlaysForCollection(e,t,n){const r=$c(),i=xa(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return nd(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Yh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=$c();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nd(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Yh(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return nd(e).put(function(e,t,n){const[r,i,s]=$h(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Th(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function nd(e){return rl(e,"documentOverlays")}class rd{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(vl(e.integerValue));else if("doubleValue"in e){const n=vl(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),ka(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(wl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Bl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):xo()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ea.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function id(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function sd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=id(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}rd.St=new rd;class od{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=sd(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=sd(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ad{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class ld{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class cd{constructor(){this.Wt=new od,this.Gt=new ad(this.Wt),this.zt=new ld(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class ud{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ud(this.indexId,this.documentKey,this.arrayValue,n)}}function hd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=dd(e.arrayValue,t.arrayValue),0!==n?n:(n=dd(e.directionalValue,t.directionalValue),0!==n?n:ea.comparator(e.documentKey,t.documentKey)))}function dd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class fd{constructor(e){this.Jt=new ul(((e,t)=>Zo.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Ao(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=na(e);if(void 0!==t&&!this.tn(t))return!1;const n=ra(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new ul(Zo.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ia(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ia(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ia(n.field,"asc"===n.dir?0:1)));return new ta(ta.UNKNOWN_ID,this.collectionId,t,sa.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function pd(e){var t,n;if(Ao(e instanceof tc||e instanceof nc),e instanceof tc){if(e instanceof gc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>tc.create(e.field,"==",t))))||[];return nc.create(r,"or")}return e}const r=e.filters.map((e=>pd(e)));return nc.create(r,e.op)}function md(e){if(0===e.getFilters().length)return[];const t=wd(pd(e));return Ao(vd(t)),gd(t)||yd(t)?[t]:t.getFilters()}function gd(e){return e instanceof tc}function yd(e){return e instanceof nc&&sc(e)}function vd(e){return gd(e)||yd(e)||function(e){if(e instanceof nc&&ic(e)){for(const t of e.getFilters())if(!gd(t)&&!yd(t))return!1;return!0}return!1}(e)}function wd(e){if(Ao(e instanceof tc||e instanceof nc),e instanceof tc)return e;if(1===e.filters.length)return wd(e.filters[0]);const t=e.filters.map((e=>wd(e)));let n=nc.create(t,e.op);return n=Sd(n),vd(n)?n:(Ao(n instanceof nc),Ao(rc(n)),Ao(n.filters.length>1),n.filters.reduce(((e,t)=>bd(e,t))))}function bd(e,t){let n;return Ao(e instanceof tc||e instanceof nc),Ao(t instanceof tc||t instanceof nc),n=e instanceof tc?t instanceof tc?function(e,t){return nc.create([e,t],"and")}(e,t):_d(e,t):t instanceof tc?_d(t,e):function(e,t){if(Ao(e.filters.length>0&&t.filters.length>0),rc(e)&&rc(t))return cc(e,t.getFilters());const n=ic(e)?e:t,r=ic(e)?t:e,i=n.filters.map((e=>bd(e,r)));return nc.create(i,"or")}(e,t),Sd(n)}function _d(e,t){if(rc(t))return cc(t,e.getFilters());{const n=t.filters.map((t=>bd(e,t)));return nc.create(n,"or")}}function Sd(e){if(Ao(e instanceof tc||e instanceof nc),e instanceof tc)return e;const t=e.getFilters();if(1===t.length)return Sd(t[0]);if(oc(e))return e;const n=t.map((e=>Sd(e))),r=[];return n.forEach((t=>{t instanceof tc?r.push(t):t instanceof nc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:nc.create(r,e.op)}class Id{constructor(){this.on=new Ed}addToCollectionParentIndex(e,t){return this.on.add(t),fa.resolve()}getCollectionParents(e,t){return fa.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return fa.resolve()}deleteFieldIndex(e,t){return fa.resolve()}deleteAllFieldIndexes(e){return fa.resolve()}createTargetIndexes(e,t){return fa.resolve()}getDocumentsMatchingTarget(e,t){return fa.resolve(null)}getIndexType(e,t){return fa.resolve(0)}getFieldIndexes(e,t){return fa.resolve([])}getNextCollectionGroupToUpdate(e){return fa.resolve(null)}getMinOffset(e,t){return fa.resolve(la.min())}getMinOffsetFromCollectionGroup(e,t){return fa.resolve(la.min())}updateCollectionGroup(e,t,n){return fa.resolve()}updateIndexEntries(e,t){return fa.resolve()}}class Ed{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ul(Jo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ul(Jo.comparator)).toArray()}}const Td=new Uint8Array(0);class Cd{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Ed,this.an=new Kc((e=>_c(e)),((e,t)=>Sc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:xa(r)};return kd(e).put(i)}return fa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ho(t),""],!1,!0);return kd(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ra(r.parent))}return n}))}addFieldIndex(e,t){const n=xd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Ad(e);return i.next((e=>{n.put(Jh(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=xd(e),r=Ad(e),i=Nd(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=xd(e),n=Nd(e),r=Ad(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return fa.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new fd(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Nd(e);let r=!0;const i=new Map;return fa.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=tu();const r=[];return fa.forEach(i,((i,s)=>{To("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(_c(t)));const o=function(e,t){const n=na(t);if(void 0===n)return null;for(const r of Ec(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of ra(t))for(const t of Ec(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ra(t)){const t=0===i.kind?Tc(e,i.fieldPath,e.startAt):Cc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Yl(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of ra(t)){const t=0===i.kind?Cc(e,i.fieldPath,e.endAt):Tc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Yl(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return fa.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=ea.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return fa.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:md(nc.create(e.filters,"and")).map((t=>bc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):Td,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new ud(e,ea.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new ud(e,ea.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new fd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return fa.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new ul(Zo.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new cd;for(const r of ra(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);rd.St.ht(e,i)}return n.Ut()}In(e){const t=new cd;return rd.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new cd;return rd.St.ht(Ol(this.databaseId,t),n.jt(function(e){const t=ra(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new cd);let i=0;for(const s of ra(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&Ml(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);rd.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new cd;n.seed(e.Ut()),rd.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof tc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=xd(e),r=Ad(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return fa.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new sa(t.sequenceNumber,new la(Kh(t.readTime),new ea(Ra(t.documentKey)),t.largestBatchId)):sa.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ia(Zo.fromServerFormat(t),n)}));return new ta(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Wo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=xd(e),i=Ad(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>fa.forEach(t,(t=>i.put(Jh(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return fa.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?fa.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),fa.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?fa.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Nd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Nd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Nd(e);let i=new ul(hd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new ud(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new ul(hd);const r=this.dn(t,e);if(null==r)return n;const i=na(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ml(s))for(const i of s.arrayValue.values||[])n=n.add(new ud(t.indexId,e.key,this.In(i),r))}else n=n.add(new ud(t.indexId,e.key,Td,r));return n}yn(e,t,n,r,i){To("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=dl(s),l=dl(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=dl(o)):t?(i(a),a=dl(s)):(a=dl(s),l=dl(o))}}(r,i,hd,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),fa.waitFor(s)}fn(e){let t=1;return Ad(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>hd(e,t))).filter(((e,t,n)=>!t||0!==hd(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=hd(s,e),i=hd(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Td,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Td,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return hd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Dd)}getMinOffset(e,t){return fa.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||xo())))).next(Dd)}}function kd(e){return rl(e,"collectionParents")}function Nd(e){return rl(e,"indexEntries")}function xd(e){return rl(e,"indexConfiguration")}function Ad(e){return rl(e,"indexState")}function Dd(e){Ao(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ca(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new la(t.readTime,t.documentKey,n)}const Rd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Pd(e,Pd.DEFAULT_COLLECTION_PERCENTILE,Pd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Od(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Ao(1===a)})));const c=[];for(const u of n.mutations){const e=La(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return fa.waitFor(s).next((()=>c))}function Ld(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xo();t=e.noDocument}return JSON.stringify(t).length}Pd.DEFAULT_COLLECTION_PERCENTILE=10,Pd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pd.DEFAULT=new Pd(41943040,Pd.DEFAULT_COLLECTION_PERCENTILE,Pd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pd.DISABLED=new Pd(-1,0,0);class Md{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Ao(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Md(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ud(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=jd(e),s=Ud(e);return s.add({}).next((o=>{Ao("number"==typeof o);const a=new Mu(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Th(e.ut,t))),i=n.mutations.map((t=>Th(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new ul(((e,t)=>Wo(e.canonicalString(),t.canonicalString())));for(const e of r){const t=La(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Ma))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),fa.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Ud(e).get(t).next((e=>e?(Ao(e.userId===this.userId),Wh(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?fa.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ud(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ao(t.batchId>=n),i=Wh(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ud(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ud(e).W("userMutationsIndex",t).next((e=>e.map((e=>Wh(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Oa(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return jd(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Ra(a);if(o===this.userId&&t.path.isEqual(c))return Ud(e).get(l).next((e=>{if(!e)throw xo();Ao(e.userId===this.userId),i.push(Wh(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ul(Wo);const r=[];return t.forEach((t=>{const i=Oa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=jd(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Ra(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),fa.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Oa(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ul(Wo);return jd(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Ra(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ud(e).get(t).next((e=>{if(null===e)throw xo();Ao(e.userId===this.userId),n.push(Wh(this.serializer,e))})))})),fa.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Od(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),fa.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return fa.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return jd(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ra(e[1]);r.push(t)}else n.done()})).next((()=>{Ao(0===r.length)}))}))}containsKey(e,t){return Fd(e,this.userId,t)}Mn(e){return Vd(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Fd(e,t,n){const r=Oa(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return jd(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ud(e){return rl(e,"mutations")}function jd(e){return rl(e,"documentMutations")}function Vd(e){return rl(e,"mutationQueues")}class Bd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Bd(0)}static Nn(){return new Bd(-1)}}class zd{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Bd(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Yo.fromTimestamp(new Qo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>qd(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Ao(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return qd(e).Y(((s,o)=>{const a=Gh(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>fa.waitFor(i))).next((()=>r))}forEachTarget(e,t){return qd(e).Y(((e,n)=>{const r=Gh(n);t(r)}))}Bn(e){return Kd(e).get("targetGlobalKey").next((e=>(Ao(null!==e),e)))}Ln(e,t){return Kd(e).put("targetGlobalKey",t)}kn(e,t){return qd(e).put(Hh(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=_c(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return qd(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Gh(n);Sc(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Wd(e);return t.forEach((t=>{const s=xa(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),fa.waitFor(r)}removeMatchingKeys(e,t,n){const r=Wd(e);return fa.forEach(t,(t=>{const i=xa(t.path);return fa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Wd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wd(e);let i=tu();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ra(e[1]),s=new ea(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=xa(t.path),r=IDBKeyRange.bound([n],[Ho(n)],!1,!0);let i=0;return Wd(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return qd(e).get(t).next((e=>e?Gh(e):null))}}function qd(e){return rl(e,"targets")}function Kd(e){return rl(e,"targetGlobal")}function Wd(e){return rl(e,"targetDocuments")}function Gd(e,t){let[n,r]=e,[i,s]=t;const o=Wo(n,i);return 0===o?Wo(r,s):o}class Hd{constructor(e){this.Qn=e,this.buffer=new ul(Gd),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Gd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){To("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){va(e)?To("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await da(e)}await this.Gn(3e5)}))}}class Yd{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return fa.resolve(Ta._e);const n=new Hd(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(To("LruGarbageCollector","Garbage collection skipped; disabled"),fa.resolve(Rd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(To("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Rd):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(To("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Eo()<=qe.DEBUG&&To("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),fa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function $d(e,t){return new Yd(e,t)}class Jd{constructor(e,t){this.db=e,this.garbageCollector=$d(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return Xd(e,n)}removeReference(e,t,n){return Xd(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Xd(e,t)}Xn(e,t){return function(e,t){let n=!1;return Vd(e).Z((r=>Fd(e,r,t).next((e=>(e&&(n=!0),fa.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Yo.min()),Wd(e).delete(function(e){return[0,xa(e.path)]}(s)))))}));r.push(t)}})).next((()=>fa.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Xd(e,t)}Zn(e,t){const n=Wd(e);let r,i=Ta._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ta._e&&t(new ea(Ra(r)),i),i=l,r=a):i=Ta._e})).next((()=>{i!==Ta._e&&t(new ea(Ra(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xd(e,t){return Wd(e).put(function(e,t){return{targetId:0,path:xa(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Zd{constructor(){this.changes=new Kc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ql.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?fa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ef{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return sf(e).put(n)}removeEntry(e,t,n){return sf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],zh(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Ql.newInvalidDocument(t);return sf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(of(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Ql.newInvalidDocument(t)};return sf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(of(t))},((e,r)=>{n={document:this.tr(t,r),size:Ld(r)}})).next((()=>n))}getEntries(e,t){let n=Gc();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Gc(),r=new al(ea.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Ld(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return fa.resolve();let r=new ul(lf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(of(r.first()),of(r.last())),s=r.getIterator();let o=s.getNext();return sf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ea.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&lf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(of(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),zh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sf(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Gc();for(const i of e){const e=this.tr(ea.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Vc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Gc();const s=af(t,n),o=af(t,la.max());return sf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(ea.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new nf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return rf(e).get("remoteDocumentGlobalKey").next((e=>(Ao(!!e),e)))}er(e,t){return rf(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Eh(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ea.fromSegments(t.noDocument.path),r=Kh(t.noDocument.readTime);n=Ql.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xo();{const e=ea.fromSegments(t.unknownDocument.path),r=Kh(t.unknownDocument.version);n=Ql.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Qo(e[0],e[1]);return Yo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Yo.min()))return e}return Ql.newInvalidDocument(e)}}function tf(e){return new ef(e)}class nf extends Zd{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Kc((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new ul(((e,t)=>Wo(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Bh(this._r.serializer,s);r=r.add(i.path.popLast());const l=Ld(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Bh(this._r.serializer,s.convertToNoDocument(Yo.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),fa.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function rf(e){return rl(e,"remoteDocumentGlobal")}function sf(e){return rl(e,"remoteDocumentsV14")}function of(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function af(e,t){const n=t.documentKey.path.toArray();return[e,zh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Wo(n[s],r[s]),i)return i;return i=Wo(n.length,r.length),i||(i=Wo(n[n.length-2],r[r.length-2]),i||Wo(n[n.length-1],r[r.length-1]))}class cf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Cu(n.mutation,e,fl.empty(),Qo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,tu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tu();const r=$c();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Qc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$c();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,tu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Gc();const s=Xc(),o=Xc();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Au)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Cu(o.mutation,t,o.mutation.getFieldMask(),Qo.now())):s.set(t.key,fl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new cf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Xc();let r=new al(((e,t)=>e-t)),i=tu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||fl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||tu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Jc();l.forEach((e=>{if(!i.has(e)){const r=Eu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return fa.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ea.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):fa.resolve($c());let o=-1,a=i;return s.next((t=>fa.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?fa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,tu()))).next((e=>({batchId:o,changes:Yc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ea(t)).next((e=>{let t=Qc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Qc();return this.indexManager.getCollectionParents(e,i).next((o=>fa.forEach(o,(o=>{const a=function(e,t){return new kc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ql.newInvalidDocument(r)))}));let n=Qc();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Cu(s.mutation,r,fl.empty(),Qo.now()),Vc(t,r)&&(n=n.insert(e,r))})),n}))}}class hf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return fa.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ph(e.createTime)}}(t)),fa.resolve()}getNamedQuery(e,t){return fa.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Qh(e.bundledQuery),readTime:ph(e.readTime)}}(t)),fa.resolve()}}class df{constructor(){this.overlays=new al(ea.comparator),this.lr=new Map}getOverlay(e,t){return fa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$c();return fa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),fa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),fa.resolve()}getOverlaysForCollection(e,t,n){const r=$c(),i=t.length+1,s=new ea(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return fa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new al(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$c(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$c(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return fa.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Uu(t,n));let i=this.lr.get(t);void 0===i&&(i=tu(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class ff{constructor(){this.hr=new ul(pf.Pr),this.Ir=new ul(pf.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new pf(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new pf(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new ea(new Jo([])),n=new pf(t,e),r=new pf(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ea(new Jo([])),n=new pf(t,e),r=new pf(t,e+1);let i=tu();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new pf(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pf{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ea.comparator(e.key,t.key)||Wo(e.gr,t.gr)}static Tr(e,t){return Wo(e.gr,t.gr)||ea.comparator(e.key,t.key)}}class mf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new ul(pf.Pr)}checkEmpty(e){return fa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Mu(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new pf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fa.resolve(s)}lookupMutationBatch(e,t){return fa.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return fa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fa.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return fa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pf(t,0),r=new pf(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),fa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ul(Wo);return t.forEach((e=>{const t=new pf(e,0),r=new pf(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),fa.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ea.isDocumentKey(i)||(i=i.child(""));const s=new pf(new ea(i),0);let o=new ul(Wo);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),fa.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ao(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return fa.forEach(t.mutations,(r=>{const i=new pf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new pf(t,0),r=this.yr.firstAfterOrEqual(n);return fa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fa.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gf{constructor(e){this.Cr=e,this.docs=new al(ea.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return fa.resolve(n?n.document.mutableCopy():Ql.newInvalidDocument(t))}getEntries(e,t){let n=Gc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ql.newInvalidDocument(e))})),fa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Gc();const s=t.path,o=new ea(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ca(aa(o),n)<=0||(r.has(o.key)||Vc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return fa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){xo()}vr(e,t){return fa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new yf(this)}getSize(e){return fa.resolve(this.size)}}class yf extends Zd{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),fa.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class vf{constructor(e){this.persistence=e,this.Fr=new Kc((e=>_c(e)),Sc),this.lastRemoteSnapshotVersion=Yo.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ff,this.targetCount=0,this.Nr=Bd.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),fa.resolve()}getLastRemoteSnapshotVersion(e){return fa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fa.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),fa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),fa.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Bd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,fa.resolve()}updateTargetData(e,t){return this.kn(t),fa.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,fa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),fa.waitFor(i).next((()=>r))}getTargetCount(e){return fa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return fa.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),fa.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),fa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),fa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return fa.resolve(n)}containsKey(e,t){return fa.resolve(this.Or.containsKey(t))}}class wf{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ta(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new vf(this),this.indexManager=new Id,this.remoteDocumentCache=function(e){return new gf(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Vh(t),this.Kr=new hf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new df,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new mf(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){To("MemoryPersistence","Starting transaction:",e);const r=new bf(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return fa.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class bf extends ha{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Gr=new ff,this.zr=null}static jr(e){return new _f(e)}get Hr(){if(this.zr)return this.zr;throw xo()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),fa.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),fa.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),fa.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fa.forEach(this.Hr,(n=>{const r=ea.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Yo.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return fa.or([()=>fa.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Sf{constructor(e){this.serializer=e}N(e,t,n,r){const i=new pa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pa,{unique:!0}),e.createObjectStore("documentMutations")}(e),If(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=fa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),If(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pa,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return fa.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Qa});t.createIndex("collectionPathOverlayIndex",Ya,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",$a,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Fa});t.createIndex("documentKeyIndex",Ua),t.createIndex("collectionGroupIndex",ja)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ka}).createIndex("sequenceNumberIndex",Wa,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ga}).createIndex("documentKeyIndex",Ha,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Ld(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>fa.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>fa.forEach(n,(n=>{Ao(n.userId===t.userId);const r=Wh(this.serializer,n);return Od(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Jo(n),o=function(e){return[0,xa(e)]}(s);r.push(t.get(o).next((n=>n?fa.resolve():(n=>t.put({targetId:0,path:xa(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>fa.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:qa});const n=t.store("collectionParents"),r=new Ed,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:xa(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Jo(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Ra(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Gh(n),i=Hh(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ea(Jo.fromString(e.document.name).popFirst(5)):e.noDocument?ea.fromSegments(e.noDocument.path):e.unknownDocument?ea.fromSegments(e.unknownDocument.path):xo()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>fa.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=tf(this.serializer),i=new wf(_f.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:tu();Wh(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),fa.forEach(n,((e,n)=>{const s=new _o(n),o=td.ct(this.serializer,s),a=i.getIndexManager(s),l=Md.ct(s,this.serializer,a,i.referenceDelegate);return new uf(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new nl(t,Ta._e),e).next()}))}))}}function If(e){e.createObjectStore("targetDocuments",{keyPath:Ba}).createIndex("documentTargetsIndex",za,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Va,{unique:!0}),e.createObjectStore("targetGlobal")}const Ef="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tf{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Tf.D())throw new Po(Ro.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jd(this,r),this.Ii=t+"main",this.serializer=new Vh(a),this.Ti=new ma(this.Ii,this.ai,new Sf(this.serializer)),this.qr=new zd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tf(this.serializer),this.Kr=new Xh,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Co("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Po(Ro.FAILED_PRECONDITION,Ef);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Ta(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>kf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(va(e))return To("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return To("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Cf(e).get("owner").next((e=>fa.resolve(this.wi(e))))}Si(e){return kf(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=rl(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return fa.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?fa.resolve(!0):Cf(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Po(Ro.FAILED_PRECONDITION,Ef);return!1}}return!(!this.networkEnabled||!this.inForeground)||kf(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&To("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new nl(e,Ta._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>kf(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return Md.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cd(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return td.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){To("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?tl:14===e?el:13===e?Za:12===e?Xa:11===e?Ja:void xo()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new nl(r,this.Lr?this.Lr.next():Ta._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Co("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Po(Ro.FAILED_PRECONDITION,ua);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return Cf(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Po(Ro.FAILED_PRECONDITION,Ef)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cf(e).put("owner",t)}static D(){return ma.D()}pi(e){const t=Cf(e);return t.get("owner").next((e=>this.wi(e)?(To("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fa.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Co("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return To("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Co("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Co("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Cf(e){return rl(e,"owner")}function kf(e){return rl(e,"clientMetadata")}function Nf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class xf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=tu(),r=tu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xf(e,t.fromCache,n,r)}}class Af{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Df{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Af;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Eo()<=qe.DEBUG&&To("QueryEngine","SDK will not create cache indexes for query:",jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),fa.resolve()):(Eo()<=qe.DEBUG&&To("QueryEngine","Query:",jc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Eo()<=qe.DEBUG&&To("QueryEngine","The SDK decides to create cache indexes for query:",jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pc(t))):fa.resolve())}zi(e,t){if(Ac(t))return fa.resolve(null);let n=Pc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Mc(t,null,"F"),n=Pc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=tu(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Mc(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ac(t)||r.isEqual(Yo.min())?fa.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?fa.resolve(null):(Eo()<=qe.DEBUG&&To("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jc(t)),this.Xi(e,s,t,oa(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new ul(zc(e));return t.forEach(((t,r)=>{Vc(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Eo()<=qe.DEBUG&&To("QueryEngine","Using full collection scan to execute query:",jc(t)),this.Gi.getDocumentsMatchingQuery(e,t,la.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Rf{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new al(Wo),this.ns=new Kc((e=>_c(e)),Sc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uf(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Pf(e,t,n,r){return new Rf(e,t,n,r)}async function Of(e,t){const n=Do(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=tu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Lf(e){const t=Do(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Mf(e,t,n){let r=tu(),i=tu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Gc();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Yo.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):To("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function Ff(e,t){const n=Do(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Uf(e,t){const n=Do(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,fa.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new jh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function jf(e,t,n){const r=Do(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!va(e))throw e;To("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Vf(e,t,n){const r=Do(e);let i=Yo.min(),s=tu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Do(e),i=r.ns.get(n);return void 0!==i?fa.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Pc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Yo.min(),n?s:tu()))).next((e=>(qf(r,Bc(t),e),{documents:e,ls:s})))))}function Bf(e,t){const n=Do(e),r=Do(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function zf(e,t){const n=Do(e),r=n.rs.get(t)||Yo.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,oa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(qf(n,t,e),e)))}function qf(e,t,n){let r=e.rs.get(t)||Yo.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function Kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tu();const r=await Uf(e,Pc(Qh(t.bundledQuery))),i=Do(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=ph(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(ml.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function Wf(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Gf(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hf(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Qf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Po(r.error.code,r.error.message))),s?new Qf(e,t,r.state,i):(Co("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Po(n.error.code,n.error.message))),i?new Yf(e,n.state,r):(Co("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $f{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ru();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Na(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new $f(e,i):(Co("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Jf{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jf(t.clientId,t.onlineState):(Co("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Xf{constructor(){this.activeTargetIds=ru()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zf{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new al(Wo),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=Wf(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Xf),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(Wf(this.persistenceKey,n));if(e){const t=$f.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Hf(this.persistenceKey,e));if(n){const r=Yf.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hf(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return To("SharedClientState","READ",e,t),t}setItem(e,t){To("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){To("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(To("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Co("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Ta._e;if(null!=e)try{const n=JSON.parse(e);Ao("number"==typeof n),t=n}catch(e){Co("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ta._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new Qf(this.currentUser,e,t,n),i=Gf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=Gf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Hf(this.persistenceKey,e),i=new Yf(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return $f.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qf.Ts(new _o(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return Yf.Ts(r,t)}Ms(e){return Jf.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);To("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=ru();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class ep{constructor(){this.eo=new Xf,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Xf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tp{ro(e){}shutdown(){}}class np{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){To("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){To("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rp=null;function ip(){return null===rp?rp=268435456+Math.round(2147483648*Math.random()):rp++,"0x"+rp.toString(16)}const sp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class op{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const ap="WebChannelConnection";class lp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=ip(),o=this.So(e,t);To("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(To("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ko("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+So,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=sp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=ip();return new Promise(((s,o)=>{const a=new yo;a.setWithCredentials(!0),a.listenOnce(fo.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ho.NO_ERROR:const t=a.getResponseJson();To(ap,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ho.TIMEOUT:To(ap,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Po(Ro.DEADLINE_EXCEEDED,"Request time out"));break;case ho.HTTP_ERROR:const n=a.getStatus();if(To(ap,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ro).indexOf(t)>=0?t:Ro.UNKNOWN}(t.status);o(new Po(e,t.message))}else o(new Po(Ro.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Po(Ro.UNAVAILABLE,"Connection failed."));break;default:xo()}}finally{To(ap,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);To(ap,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=ip(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=co(),o=uo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");To(ap,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new op({co:t=>{d?To(ap,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(To(ap,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),To(ap,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,go.EventType.OPEN,(()=>{d||To(ap,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,go.EventType.CLOSE,(()=>{d||(d=!0,To(ap,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,go.EventType.ERROR,(t=>{d||(d=!0,ko(ap,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Po(Ro.UNAVAILABLE,"The operation could not be completed")))})),p(u,go.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ao(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){To(ap,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Vu[e];if(void 0!==t)return qu(t)}(t),i=o.message;void 0===n&&(n=Ro.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Po(n,i)),u.close()}else To(ap,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,po.STAT_EVENT,(t=>{t.stat===mo.PROXY?To(ap,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===mo.NOPROXY&&To(ap,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function cp(){return"undefined"!=typeof window?window:null}function up(){return"undefined"!=typeof document?document:null}function hp(e){return new ch(e,!0)}class dp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&To("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class fp{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new dp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Ro.RESOURCE_EXHAUSTED?(Co(t.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Ro.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Po(Ro.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return To("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(To("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pp extends fp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ao(void 0===t||"string"==typeof t),ml.fromBase64String(t||"")):(Ao(void 0===t||t instanceof Uint8Array),ml.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ro.UNKNOWN:qu(e.code);return new Po(t,e.message||"")}(o);n=new th(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vh(e,r.document.name),s=ph(r.document.updateTime),o=r.document.createTime?ph(r.document.createTime):Yo.min(),a=new Gl({mapValue:{fields:r.document.fields}}),l=Ql.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Zu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vh(e,r.document),s=r.readTime?ph(r.readTime):Yo.min(),o=Ql.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vh(e,r.document),s=r.removedTargetIds||[];n=new Zu([],s,i,null)}else{if(!("filter"in t))return xo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ju(r,i),o=e.targetId;n=new eh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Yo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Yo.min():t.readTime?ph(t.readTime):Yo.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=_h(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ic(r)?{documents:kh(e,r)}:{query:Nh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=dh(e,t.resumeToken);const r=uh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Yo.min())>0){n.readTime=hh(e,t.snapshotVersion.toTimestamp());const r=uh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=_h(this.serializer),t.removeTarget=e,this.e_(t)}}class mp extends fp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ao(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Ao(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ph(e.updateTime):ph(t);return n.isEqual(Yo.min())&&(n=ph(t)),new bu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ph(e.commitTime);return this.listener.I_(n,t)}return Ao(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=_h(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Th(this.serializer,e)))};this.e_(t)}}class gp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Po(Ro.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ro.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Po(Ro.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ro.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Po(Ro.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Co(t),this.f_=!1):To("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class vp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{kp(this)&&(To("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Do(e);t.C_.add(4),await bp(t),t.M_.set("Unknown"),t.C_.delete(4),await wp(t)}(this))}))})),this.M_=new yp(n,r)}}async function wp(e){if(kp(e))for(const t of e.v_)await t(!0)}async function bp(e){for(const t of e.v_)await t(!1)}function _p(e,t){const n=Do(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Cp(n)?Tp(n):Wp(n).Ho()&&Ip(n,t))}function Sp(e,t){const n=Do(e),r=Wp(n);n.D_.delete(t),r.Ho()&&Ep(n,t),0===n.D_.size&&(r.Ho()?r.Zo():kp(n)&&n.M_.set("Unknown"))}function Ip(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wp(e).u_(t)}function Ep(e,t){e.x_.Oe(t),Wp(e).c_(t)}function Tp(e){e.x_=new rh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Wp(e).start(),e.M_.g_()}function Cp(e){return kp(e)&&!Wp(e).jo()&&e.D_.size>0}function kp(e){return 0===Do(e).C_.size}function Np(e){e.x_=void 0}async function xp(e){e.D_.forEach(((t,n)=>{Ip(e,t)}))}async function Ap(e,t){Np(e),Cp(e)?(e.M_.w_(t),Tp(e)):e.M_.set("Unknown")}async function Dp(e,t,n){if(e.M_.set("Online"),t instanceof th&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){To("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rp(e,n)}else if(t instanceof Zu?e.x_.$e(t):t instanceof eh?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Yo.min()))try{const t=await Lf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(ml.EMPTY_BYTE_STRING,r.snapshotVersion)),Ep(e,t);const i=new jh(r.target,t,n,r.sequenceNumber);Ip(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){To("RemoteStore","Failed to raise snapshot:",t),await Rp(e,t)}}async function Rp(e,t,n){if(!va(t))throw t;e.C_.add(1),await bp(e),e.M_.set("Offline"),n||(n=()=>Lf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{To("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await wp(e)}))}function Pp(e,t){return t().catch((n=>Rp(e,n,t)))}async function Op(e){const t=Do(e),n=Gp(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Lp(t);)try{const e=await Ff(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Mp(t,e)}catch(e){await Rp(t,e)}Fp(t)&&Up(t)}function Lp(e){return kp(e)&&e.b_.length<10}function Mp(e,t){e.b_.push(t);const n=Gp(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Fp(e){return kp(e)&&!Gp(e).jo()&&e.b_.length>0}function Up(e){Gp(e).start()}async function jp(e){Gp(e).E_()}async function Vp(e){const t=Gp(e);for(const n of e.b_)t.P_(n.mutations)}async function Bp(e,t,n){const r=e.b_.shift(),i=Fu.from(r,t,n);await Pp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Op(e)}async function zp(e,t){t&&Gp(e).h_&&await async function(e,t){if(function(e){return zu(e)&&e!==Ro.ABORTED}(t.code)){const n=e.b_.shift();Gp(e).Yo(),await Pp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Op(e)}}(e,t),Fp(e)&&Up(e)}async function qp(e,t){const n=Do(e);n.asyncQueue.verifyOperationInProgress(),To("RemoteStore","RemoteStore received new credentials");const r=kp(n);n.C_.add(3),await bp(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await wp(n)}async function Kp(e,t){const n=Do(e);t?(n.C_.delete(2),await wp(n)):t||(n.C_.add(2),await bp(n),n.M_.set("Unknown"))}function Wp(e){return e.O_||(e.O_=function(e,t,n){const r=Do(e);return r.A_(),new pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:xp.bind(null,e),Io:Ap.bind(null,e),a_:Dp.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Cp(e)?Tp(e):e.M_.set("Unknown")):(await e.O_.stop(),Np(e))}))),e.O_}function Gp(e){return e.N_||(e.N_=function(e,t,n){const r=Do(e);return r.A_(),new mp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:jp.bind(null,e),Io:zp.bind(null,e),T_:Vp.bind(null,e),I_:Bp.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Op(e)):(await e.N_.stop(),e.b_.length>0&&(To("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class Hp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Hp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Po(Ro.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(e,t){if(Co("AsyncQueue","".concat(t,": ").concat(e)),va(e))return new Po(Ro.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Yp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ea.comparator(t.key,n.key):(e,t)=>ea.comparator(e.key,t.key),this.keyedMap=Qc(),this.sortedSet=new al(this.comparator)}static emptySet(e){return new Yp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Yp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $p{constructor(){this.B_=new al(ea.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):xo():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Jp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Jp(e,t,Yp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xp{constructor(){this.k_=void 0,this.listeners=[]}}class Zp{constructor(){this.queries=new Kc((e=>Uc(e)),Fc),this.onlineState="Unknown",this.q_=new Set}}async function em(e,t){const n=Do(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Xp),i)try{s.k_=await n.onListen(r)}catch(e){const n=Qp(e,"Initialization of query '".concat(jc(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&im(n)}async function tm(e,t){const n=Do(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function nm(e,t){const n=Do(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&im(n)}function rm(e,t,n){const r=Do(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function im(e){e.q_.forEach((e=>{e.next()}))}class sm{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=Jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class om{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class am{constructor(e){this.serializer=e}hs(e){return vh(this.serializer,e)}Ps(e){return e.metadata.exists?Eh(this.serializer,e.document,!1):Ql.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ph(e)}}class lm{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=Jo.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new am(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||tu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Do(e);let s=tu(),o=Gc();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await Uf(i,function(e){return Pc(xc(Jo.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Mf(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new am(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await Kf(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function cm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class um{constructor(e){this.key=e}}class hm{constructor(e){this.key=e}}class dm{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=tu(),this.mutatedKeys=tu(),this._a=zc(e),this.aa=new Yp(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new $p,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Vc(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xo()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new Jp(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new $p,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=tu(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new hm(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new um(n))})),t}da(e){this.ia=e.ls,this.oa=tu();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Jp.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class fm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class pm{constructor(e){this.key=e,this.Ra=!1}}class mm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Kc((e=>Uc(e)),Fc),this.fa=new Map,this.ga=new Set,this.pa=new al(ea.comparator),this.ya=new Map,this.wa=new ff,this.Sa={},this.ba=new Map,this.Da=Bd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function gm(e,t){const n=zm(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await Uf(n.localStore,Pc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ym(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&_p(n.remoteStore,e)}return i}async function ym(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await Vf(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Nm(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await Vf(e.localStore,t,!0),o=new dm(t,s.ls),a=o.ca(s.documents),l=Xu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Nm(e,n,c.Ta);const u=new fm(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function vm(e,t){const n=Do(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!Fc(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jf(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Sp(n.remoteStore,r.targetId),Cm(n,r.targetId)})).catch(da)):(Cm(n,r.targetId),await jf(n.localStore,r.targetId,!0))}async function wm(e,t){const n=Do(e);try{const e=await function(e,t){const n=Do(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ml.EMPTY_BYTE_STRING,Yo.min()).withLastLimboFreeSnapshotVersion(Yo.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=Gc(),l=tu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Mf(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(Yo.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return fa.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Ao(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Ao(r.Ra):e.removedDocuments.size>0&&(Ao(r.Ra),r.Ra=!1))})),await Dm(n,e,t)}catch(e){await da(e)}}function bm(e,t,n){const r=Do(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Do(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&im(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _m(e,t,n){const r=Do(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new al(ea.comparator);e=e.insert(s,Ql.newNoDocument(s,Yo.min()));const n=tu().add(s),i=new Ju(Yo.min(),new Map,new al(Wo),e,n);await wm(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),Am(r)}else await jf(r.localStore,t,!1).then((()=>Cm(r,t,n))).catch(da)}async function Sm(e,t){const n=Do(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Do(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=fa.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ao(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=tu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Tm(n,r,null),Em(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dm(n,e)}catch(e){await da(e)}}async function Im(e,t,n){const r=Do(e);try{const e=await function(e,t){const n=Do(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ao(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Tm(r,t,n),Em(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Dm(r,e)}catch(n){await da(n)}}function Em(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Tm(e,t,n){const r=Do(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Cm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||km(e,t)}))}function km(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Sp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Am(e))}function Nm(e,t,n){for(const r of n)r instanceof um?(e.wa.addReference(r.key,t),xm(e,r)):r instanceof hm?(To("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||km(e,r.key)):xo()}function xm(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(To("SyncEngine","New document in limbo: "+n),e.ga.add(r),Am(e))}function Am(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new ea(Jo.fromString(t)),r=e.Da.next();e.ya.set(r,new pm(n)),e.pa=e.pa.insert(n,r),_p(e.remoteStore,new jh(Pc(xc(n.path)),r,"TargetPurposeLimboResolution",Ta._e))}}async function Dm(e,t,n){const r=Do(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=xf.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Do(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>fa.forEach(t,(t=>fa.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>fa.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!va(e))throw e;To("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function Rm(e,t){const n=Do(e);if(!n.currentUser.isEqual(t)){To("SyncEngine","User change. New user:",t.toKey());const e=await Of(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Po(Ro.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Dm(n,e._s)}}function Pm(e,t){const n=Do(e),r=n.ya.get(t);if(r&&r.Ra)return tu().add(r.key);{let e=tu();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function Om(e,t){const n=Do(e),r=await Vf(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&Nm(n,t.targetId,i.Ta),i}async function Lm(e,t){const n=Do(e);return zf(n.localStore,t).then((e=>Dm(n,e)))}async function Mm(e,t,n,r){const i=Do(e),s=await function(e,t){const n=Do(e),r=Do(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):fa.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Op(i.remoteStore):"acknowledged"===n||"rejected"===n?(Tm(i,t,r||null),Em(i,t),function(e,t){Do(Do(e).mutationQueue).Fn(t)}(i.localStore,t)):xo(),await Dm(i,s)):To("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Fm(e,t,n){const r=Do(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await Uf(r.localStore,Pc(t[0]));for(const e of t){const t=r.ma.get(e),n=await Om(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Bf(r.localStore,o);e=await Uf(r.localStore,t),await ym(r,Um(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function Um(e){return Nc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jm(e){return function(e){return Do(Do(e).persistence).Bi()}(Do(e).localStore)}async function Vm(e,t,n,r){const i=Do(e);if(i.Ca)return void To("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await zf(i.localStore,Bc(s[0])),r=Ju.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ml.EMPTY_BYTE_STRING);await Dm(i,e,r);break}case"rejected":await jf(i.localStore,t,!0),Cm(i,t,r);break;default:xo()}}async function Bm(e,t,n){const r=zm(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){To("SyncEngine","Adding an already active target "+e);continue}const t=await Bf(r.localStore,e),n=await Uf(r.localStore,t);await ym(r,Um(t),n.targetId,!1,n.resumeToken),_p(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await jf(r.localStore,e,!1).then((()=>{Sp(r.remoteStore,e),Cm(r,e)})).catch(da)}}function zm(e){const t=Do(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_m.bind(null,t),t.Va.a_=nm.bind(null,t.eventManager),t.Va.Fa=rm.bind(null,t.eventManager),t}function qm(e){const t=Do(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Im.bind(null,t),t}class Km{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Pf(this.persistence,new Df,e.initialUser,this.serializer)}createPersistence(e){return new wf(_f.jr,this.serializer)}createSharedClientState(e){return new ep}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Wm extends Km{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await qm(this.xa.syncEngine),await Op(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Pf(this.persistence,new Df,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Qd(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ea(t,this.persistence);return new Ia(e.asyncQueue,n)}createPersistence(e){const t=Nf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pd.withCacheSize(this.cacheSizeBytes):Pd.DEFAULT;return new Tf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cp(),up(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ep}}class Gm extends Wm{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof Zf&&(this.sharedClientState.syncEngine={Ys:Mm.bind(null,t),Zs:Vm.bind(null,t),Xs:Bm.bind(null,t),Bi:jm.bind(null,t),Js:Lm.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Do(e);if(zm(n),qm(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Fm(n,e.toArray());n.Ca=!0,await Kp(n.remoteStore,!0);for(const r of t)_p(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Cm(n,i),jf(n.localStore,i,!0)))),Sp(n.remoteStore,i)})),await t,await Fm(n,e),function(e){const t=Do(e);t.ya.forEach(((e,n)=>{Sp(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new al(ea.comparator)}(n),n.Ca=!1,await Kp(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=cp();if(!Zf.D(t))throw new Po(Ro.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Nf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Hm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>bm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rm.bind(null,this.syncEngine),await Kp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zp}createDatastore(e){const t=hp(e.databaseInfo.databaseId),n=function(e){return new lp(e)}(e.databaseInfo);return function(e,t,n,r){return new gp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new vp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>bm(this.syncEngine,e,0)),np.D()?new np:new tp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new mm(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Do(e);To("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await bp(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function Qm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Co("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class $m{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Oo,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new om(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Jm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Po(Ro.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Do(e),r=_h(n.serializer)+"/documents",i={documents:t.map((e=>yh(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ao(!!t.found),t.found.name,t.found.updateTime;const n=vh(e,t.found.name),r=ph(t.found.updateTime),i=t.found.createTime?ph(t.found.createTime):Yo.min(),s=new Gl({mapValue:{fields:t.found.fields}});return Ql.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ao(!!t.missing),Ao(!!t.readTime);const n=vh(e,t.missing),r=ph(t.readTime);return Ql.newNoDocument(n,r)}(e,t):xo()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ao(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ou(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ea.fromPath(t);this.mutations.push(new Lu(n,this.precondition(n)))})),await async function(e,t){const n=Do(e),r=_h(n.serializer)+"/documents",i={writes:t.map((e=>Th(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xo();t=Yo.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Po(Ro.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yo.min())?_u.exists(!1):_u.updateTime(t):_u.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yo.min()))throw new Po(Ro.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _u.updateTime(t)}return _u.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Xm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new dp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new Jm(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Ca(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zu(t)}return!1}}class Zm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_o.UNAUTHENTICATED,this.clientId=Ko.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{To("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(To("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Po(Ro.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function eg(e,t){e.asyncQueue.verifyOperationInProgress(),To("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Of(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function tg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rg(e);To("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>qp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>qp(t.remoteStore,n))),e._onlineComponents=t}function ng(e){return"FirebaseError"===e.name?e.code===Ro.FAILED_PRECONDITION||e.code===Ro.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function rg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){To("FirestoreClient","Using user provided OfflineComponentProvider");try{await eg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ng(n))throw n;ko("Error using user provided cache. Falling back to memory cache: "+n),await eg(e,new Km)}}else To("FirestoreClient","Using default OfflineComponentProvider"),await eg(e,new Km);return e._offlineComponents}async function ig(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(To("FirestoreClient","Using user provided OnlineComponentProvider"),await tg(e,e._uninitializedComponentsProvider._online)):(To("FirestoreClient","Using default OnlineComponentProvider"),await tg(e,new Hm))),e._onlineComponents}function sg(e){return rg(e).then((e=>e.persistence))}function og(e){return rg(e).then((e=>e.localStore))}function ag(e){return ig(e).then((e=>e.remoteStore))}function lg(e){return ig(e).then((e=>e.syncEngine))}function cg(e){return ig(e).then((e=>e.datastore))}async function ug(e){const t=await ig(e),n=t.eventManager;return n.onListen=gm.bind(null,t.syncEngine),n.onUnlisten=vm.bind(null,t.syncEngine),n}function hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Ym({next:s=>{t.enqueueAndForget((()=>tm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Po(Ro.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Po(Ro.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new sm(xc(n.path),s,{includeMetadataChanges:!0,J_:!0});return em(e,o)}(await ug(e),e.asyncQueue,t,n,r))),r.promise}function dg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Ym({next:n=>{t.enqueueAndForget((()=>tm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Po(Ro.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new sm(n,s,{includeMetadataChanges:!0,J_:!0});return em(e,o)}(await ug(e),e.asyncQueue,t,n,r))),r.promise}function fg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Wu().encode(e):e,function(e,t){return new $m(e,t)}(function(e,t){if(e instanceof Uint8Array)return Qm(e,t);if(e instanceof ArrayBuffer)return Qm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,hp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Do(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Do(e),r=ph(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(cm(r));const i=new lm(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await Dm(e,o.ra,void 0),await function(e,t){const n=Do(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return ko("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await lg(e),i,r)}))}function pg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const mg=new Map;function gg(e,t,n){if(!n)throw new Po(Ro.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function yg(e,t,n,r){if(!0===t&&!0===r)throw new Po(Ro.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function vg(e){if(!ea.isDocumentKey(e))throw new Po(Ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wg(e){if(ea.isDocumentKey(e))throw new Po(Ro.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xo()}function _g(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Po(Ro.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bg(e);throw new Po(Ro.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Sg(e,t){if(t<=0)throw new Po(Ro.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Ig{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Po(Ro.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Po(Ro.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Po(Ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Po(Ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Po(Ro.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ig({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Po(Ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Po(Ro.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ig(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mo;switch(e.type){case"firstParty":return new Vo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Po(Ro.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mg.get(e);t&&(To("ComponentProvider","Removing Datastore"),mg.delete(e),t.terminate())}(this),Promise.resolve()}}function Tg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=_g(e,Eg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_o.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Po(Ro.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _o(s)}e._authCredentials=new Fo(new Lo(t,n))}}class Cg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cg(this.firestore,e,this._query)}}class kg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ng(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kg(this.firestore,e,this._key)}}class Ng extends Cg{constructor(e,t,n){super(e,t,xc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kg(this.firestore,null,new ea(e))}withConverter(e){return new Ng(this.firestore,e,this._path)}}function xg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),gg("collection","path",t),e instanceof Eg){const n=Jo.fromString(t,...r);return wg(n),new Ng(e,null,n)}{if(!(e instanceof kg||e instanceof Ng))throw new Po(Ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jo.fromString(t,...r));return wg(n),new Ng(e.firestore,null,n)}}function Ag(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),1===arguments.length&&(t=Ko.newId()),gg("doc","path",t),e instanceof Eg){const n=Jo.fromString(t,...r);return vg(n),new kg(e,null,new ea(n))}{if(!(e instanceof kg||e instanceof Ng))throw new Po(Ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jo.fromString(t,...r));return vg(n),new kg(e.firestore,e instanceof Ng?e.converter:null,new ea(n))}}function Dg(e,t){return e=Fe(e),t=Fe(t),(e instanceof kg||e instanceof Ng)&&(t instanceof kg||t instanceof Ng)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Rg(e,t){return e=Fe(e),t=Fe(t),e instanceof Cg&&t instanceof Cg&&e.firestore===t.firestore&&Fc(e._query,t._query)&&e.converter===t.converter}class Pg{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new dp(this,"async_queue_retry"),this.iu=()=>{const e=up();e&&To("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=up();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=up();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Oo;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!va(e))throw e;To("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Co("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=Hp.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&xo()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Og(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Lg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mg extends Eg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Pg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ug(this),this._firestoreClient.terminate()}}function Fg(e){return e._firestoreClient||Ug(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ug(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Il(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,pg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Zm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function jg(e,t,n){const r=new Oo;return e.asyncQueue.enqueue((async()=>{try{await eg(e,n),await tg(e,t),r.resolve()}catch(e){const n=e;if(!ng(n))throw n;ko("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Vg(e){return function(e){const t=new Oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Do(e);kp(n.remoteStore)||To("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Do(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=Qp(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await lg(e),t))),t.promise}(Fg(e=_g(e,Mg)))}function Bg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await sg(e),n=await ag(e);return t.setNetworkEnabled(!0),function(e){const t=Do(e);return t.C_.delete(0),wp(t)}(n)}))}(Fg(e=_g(e,Mg)))}function zg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await sg(e),n=await ag(e);return t.setNetworkEnabled(!1),async function(e){const t=Do(e);t.C_.add(0),await bp(t),t.M_.set("Offline")}(n)}))}(Fg(e=_g(e,Mg)))}function qg(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Do(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await og(e),t)))}(Fg(e=_g(e,Mg)),t).then((t=>t?new Cg(e,null,t.query):null))}function Kg(e){if(e._initialized||e._terminated)throw new Po(Ro.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wg(ml.fromBase64String(e))}catch(e){throw new Po(Ro.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Wg(ml.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Po(Ro.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hg{constructor(e){this._methodName=e}}class Qg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Po(Ro.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Po(Ro.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wo(this._lat,e._lat)||Wo(this._long,e._long)}}const Yg=/^__.*__$/;class $g{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Au(e,this.data,this.fieldMask,t,this.fieldTransforms):new xu(e,this.data,t,this.fieldTransforms)}}class Jg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xo()}}class Zg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Zg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return wy(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Xg(this.Iu)&&Yg.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ey{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hp(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Zg({Iu:e,methodName:t,gu:n,path:Zo.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ty(e){const t=e._freezeSettings(),n=hp(e._databaseId);return new ey(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ny(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);my("Data must be an object, but it was:",o,r);const a=fy(r,o);let l,c;if(s.merge)l=new fl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=gy(t,r,n);if(!o.contains(i))throw new Po(Ro.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));by(e,i)||e.push(i)}l=new fl(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new $g(new Gl(a),l,c)}class ry extends Hg{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ry}}function iy(e,t,n){return new Zg({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class sy extends Hg{_toFieldTransform(e){return new wu(e.path,new hu)}isEqual(e){return e instanceof sy}}class oy extends Hg{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=iy(this,e,!0),n=this.yu.map((e=>dy(e,t))),r=new du(n);return new wu(e.path,r)}isEqual(e){return this===e}}class ay extends Hg{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=iy(this,e,!0),n=this.yu.map((e=>dy(e,t))),r=new pu(n);return new wu(e.path,r)}isEqual(e){return this===e}}class ly extends Hg{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new gu(e.serializer,ou(e.serializer,this.wu));return new wu(e.path,t)}isEqual(e){return this===e}}function cy(e,t,n,r){const i=e.pu(1,t,n);my("Data must be an object, but it was:",i,r);const s=[],o=Gl.empty();sl(r,((e,r)=>{const a=vy(t,e,n);r=Fe(r);const l=i.Ru(a);if(r instanceof ry)s.push(a);else{const e=dy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new fl(s);return new Jg(o,a,i.fieldTransforms)}function uy(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[gy(t,r,n)],l=[i];if(s.length%2!=0)throw new Po(Ro.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(gy(t,s[d])),l.push(s[d+1]);const c=[],u=Gl.empty();for(let d=a.length-1;d>=0;--d)if(!by(c,a[d])){const e=a[d];let t=l[d];t=Fe(t);const n=o.Ru(e);if(t instanceof ry)c.push(e);else{const r=dy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new fl(c);return new Jg(u,h,o.fieldTransforms)}function hy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return dy(n,e.pu(r?4:3,t))}function dy(e,t){if(py(e=Fe(e)))return my("Unsupported field value:",t,e),fy(e,t);if(e instanceof Hg)return function(e,t){if(!Xg(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=dy(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Fe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ou(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qo.fromDate(e);return{timestampValue:hh(t.serializer,n)}}if(e instanceof Qo){const n=new Qo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hh(t.serializer,n)}}if(e instanceof Qg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wg)return{bytesValue:dh(t.serializer,e._byteString)};if(e instanceof kg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:mh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(bg(e)))}(e,t)}function fy(e,t){const n={};return ol(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sl(e,((e,r)=>{const i=dy(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function py(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qo||e instanceof Qg||e instanceof Wg||e instanceof kg||e instanceof Hg)}function my(e,t,n){if(!py(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=bg(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function gy(e,t,n){if((t=Fe(t))instanceof Gg)return t._internalPath;if("string"==typeof t)return vy(e,t);throw wy("Field path arguments must be of type string or ",e,!1,void 0,n)}const yy=new RegExp("[~\\*/\\[\\]]");function vy(e,t,n){if(t.search(yy)>=0)throw wy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Gg(...t.split("."))._internalPath}catch(fn){throw wy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function wy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Po(Ro.INVALID_ARGUMENT,a+e+l)}function by(e,t){return e.some((e=>e.isEqual(t)))}class _y{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sy extends _y{data(){return super.data()}}function Iy(e,t){return"string"==typeof t?vy(e,t):t instanceof Gg?t._internalPath:t._delegate._internalPath}function Ey(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Po(Ro.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class Cy extends Ty{}function ky(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ty&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof xy)).length,n=e.filter((e=>e instanceof Ny)).length;if(t>1||t>0&&n>0)throw new Po(Ro.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ny extends Cy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ny(e,t,n)}_apply(e){const t=this._parse(e);return Fy(e._query,t),new Cg(e.firestore,e.converter,Lc(e._query,t))}_parse(e){const t=ty(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Po(Ro.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){My(o,s);const t=[];for(const n of o)t.push(Ly(r,e,n));a={arrayValue:{values:t}}}else a=Ly(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||My(o,s),a=hy(n,t,o,"in"===s||"not-in"===s);return tc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class xy extends Ty{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:nc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Fy(n,i),n=Lc(n,i)}(e._query,t),new Cg(e.firestore,e.converter,Lc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ay extends Cy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ay(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(t,n)}(e._query,this._field,this._direction);return new Cg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new kc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Dy extends Cy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Dy(e,t,n)}_apply(e){return new Cg(e.firestore,e.converter,Mc(e._query,this._limit,this._limitType))}}class Ry extends Cy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ry(e,t,n)}_apply(e){const t=Oy(e,this.type,this._docOrFields,this._inclusive);return new Cg(e.firestore,e.converter,function(e,t){return new kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Py extends Cy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Py(e,t,n)}_apply(e){const t=Oy(e,this.type,this._docOrFields,this._inclusive);return new Cg(e.firestore,e.converter,function(e,t){return new kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Oy(e,t,n,r){if(n[0]=Fe(n[0]),n[0]instanceof _y)return function(e,t,n,r,i){if(!r)throw new Po(Ro.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Rc(e))if(o.field.isKeyField())s.push(Ol(t,r.key));else{const e=r.data.field(o.field);if(bl(e))throw new Po(Ro.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Yl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ty(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Po(Ro.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Dc(e)&&-1!==s.indexOf("/"))throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Jo.fromString(s));if(!ea.isDocumentKey(n))throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ea(n);a.push(Ol(t,i))}else{const e=hy(n,r,s);a.push(e)}}return new Yl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ly(e,t,n){if("string"==typeof(n=Fe(n))){if(""===n)throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dc(t)&&-1!==n.indexOf("/"))throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Jo.fromString(n));if(!ea.isDocumentKey(r))throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ol(e,new ea(r))}if(n instanceof kg)return Ol(e,n._key);throw new Po(Ro.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bg(n),"."))}function My(e,t){if(!Array.isArray(e)||0===e.length)throw new Po(Ro.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Fy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Po(Ro.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Po(Ro.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Uy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Qg(vl(e.latitude),vl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_l(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=yl(e);return new Qo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Jo.fromString(e);Ao(Uh(n));const r=new El(n.get(1),n.get(3)),i=new ea(n.popFirst(5));return r.isEqual(t)||Co("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function jy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vy extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kg(this.firestore,null,t)}}class By{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zy extends _y{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new qy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Iy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class qy extends zy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ky{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new By(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new qy(this._firestore,this._userDataWriter,n.key,n,new By(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Po(Ro.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new qy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new By(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new qy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new By(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Wy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xo()}}function Gy(e,t){return e instanceof zy&&t instanceof zy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ky&&t instanceof Ky&&e._firestore===t._firestore&&Rg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Hy extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kg(this.firestore,null,t)}}function Qy(e){e=_g(e,kg);const t=_g(e.firestore,Mg),n=Fg(t),r=new Hy(t);return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Do(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Po(Ro.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Qp(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await og(e),t,n))),n.promise}(n,e._key).then((n=>new zy(t,r,e._key,n,new By(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Yy(e){e=_g(e,Cg);const t=_g(e.firestore,Mg),n=Fg(t),r=new Hy(t);return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Vf(e,t,!0),i=new dm(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Qp(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await og(e),t,n))),n.promise}(n,e._query).then((n=>new Ky(t,r,e,n)))}function $y(e,t,n){e=_g(e,kg);const r=_g(e.firestore,Mg),i=jy(e.converter,t,n);return ev(r,[ny(ty(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,_u.none())])}function Jy(e,t,n){e=_g(e,kg);const r=_g(e.firestore,Mg),i=ty(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Fe(t))||t instanceof Gg?uy(i,"updateDoc",e._key,t,n,a):cy(i,"updateDoc",e._key,t),ev(r,[s.toMutation(e._key,_u.exists(!0))])}function Xy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Fe(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Og(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Og(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof kg)h=_g(e.firestore,Mg),d=xc(e._key.path),u={next:t=>{n[l]&&n[l](tv(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=_g(e,Cg);h=_g(t.firestore,Mg),d=t._query;const r=new Hy(h);u={next:e=>{n[l]&&n[l](new Ky(h,r,t,e))},error:n[l+1],complete:n[l+2]},Ey(e._query)}return function(e,t,n,r){const i=new Ym(r),s=new sm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>em(await ug(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>tm(await ug(e),s)))}}(Fg(h),d,c,u)}function Zy(e,t){return function(e,t){const n=new Ym(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Do(e).q_.add(t),t.next()}(await ug(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Do(e).q_.delete(t)}(await ug(e),n)))}}(Fg(e=_g(e,Mg)),Og(t)?t:{next:t})}function ev(e,t){return function(e,t){const n=new Oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qm(e);try{const e=await function(e,t){const n=Do(e),r=Qo.now(),i=t.reduce(((e,t)=>e.add(t.key)),tu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Gc(),l=tu();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=ku(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Au(e.key,t,Hl(t.value.mapValue),_u.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Yc(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new al(Wo)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Dm(r,e.changes),await Op(r.remoteStore)}catch(e){const t=Qp(e,"Failed to persist write");n.reject(t)}}(await lg(e),t,n))),n.promise}(Fg(e),t)}function tv(e,t,n){const r=n.docs.get(t._key),i=new Hy(e);return new zy(e,i,t._key,r,new By(n.hasPendingWrites,n.fromCache),t.converter)}const nv={maxAttempts:5};class rv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ty(e)}set(e,t,n){this._verifyNotCommitted();const r=iv(e,this._firestore),i=jy(r.converter,t,n),s=ny(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,_u.none())),this}update(e,t,n){this._verifyNotCommitted();const r=iv(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Fe(t))||t instanceof Gg?uy(this._dataReader,"WriteBatch.update",r._key,t,n,o):cy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,_u.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=iv(e,this._firestore);return this._mutations=this._mutations.concat(new Ou(t._key,_u.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Po(Ro.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iv(e,t){if((e=Fe(e)).firestore!==t)throw new Po(Ro.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class sv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ty(e)}get(e){const t=iv(e,this._firestore),n=new Vy(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return xo();const r=e[0];if(r.isFoundDocument())return new _y(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new _y(this._firestore,n,t._key,null,t.converter);throw xo()}))}set(e,t,n){const r=iv(e,this._firestore),i=jy(r.converter,t,n),s=ny(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=iv(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Fe(t))||t instanceof Gg?uy(this._dataReader,"Transaction.update",r._key,t,n,o):cy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=iv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=iv(e,this._firestore),n=new Hy(this._firestore);return super.get(e).then((e=>new zy(this._firestore,n,t._key,e._document,new By(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){So=e}(Nt),St(new Ue("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Mg(new Uo(e.getProvider("auth-internal")),new zo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Po(Ro.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Pt(bo,"4.4.0",e),Pt(bo,"4.4.0","esm2017")}();function ov(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Po("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function av(){if("undefined"===typeof Uint8Array)throw new Po("unimplemented","Uint8Arrays are not available in this environment.")}function lv(){if("undefined"==typeof atob)throw new Po("unimplemented","Blobs are unavailable in Firestore in this environment.")}class cv{constructor(e){this._delegate=e}static fromBase64String(e){return lv(),new cv(Wg.fromBase64String(e))}static fromUint8Array(e){return av(),new cv(Wg.fromUint8Array(e))}toBase64(){return lv(),this._delegate.toBase64()}toUint8Array(){return av(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hv{enableIndexedDbPersistence(e,t){return function(e,t){Kg(e=_g(e,Mg));const n=Fg(e);if(n._uninitializedComponentsProvider)throw new Po(Ro.FAILED_PRECONDITION,"SDK cache is already specified.");ko("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Hm;return jg(n,i,new Wm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Kg(e=_g(e,Mg));const t=Fg(e);if(t._uninitializedComponentsProvider)throw new Po(Ro.FAILED_PRECONDITION,"SDK cache is already specified.");ko("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Hm;return jg(t,r,new Gm(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Po(Ro.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Oo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ma.D())return Promise.resolve();const t=e+"main";await ma.delete(t)}(Nf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class dv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof El||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ko("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Tg(this._delegate,e,t,n)}enableNetwork(){return Bg(this._delegate)}disableNetwork(){return zg(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,yg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Vg(this._delegate)}onSnapshotsInSync(e){return Zy(this._delegate,e)}get app(){if(!this._appCompat)throw new Po("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cv(this,xg(this._delegate,e))}catch(t){throw vv(t,"collection()","Firestore.collection()")}}doc(e){try{return new yv(this,Ag(this._delegate,e))}catch(t){throw vv(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Iv(this,function(e,t){if(e=_g(e,Eg),gg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Po(Ro.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Cg(e,null,function(e){return new kc(Jo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vv(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=_g(e,Mg);const r=Object.assign(Object.assign({},nv),n);return function(e){if(e.maxAttempts<1)throw new Po(Ro.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Oo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await cg(e);new Xm(e.asyncQueue,i,n,t,r).run()})),r.promise}(Fg(e),(n=>t(new sv(e,n))),r)}(this._delegate,(t=>e(new pv(this,t))))}batch(){return Fg(this._delegate),new mv(new rv(this._delegate,(e=>ev(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Fg(e=_g(e,Mg)),r=new Lg;return fg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return qg(this._delegate,e).then((e=>e?new Iv(this,e):null))}}class fv extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new cv(new Wg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yv.forKey(t,this.firestore,null)}}class pv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fv(e)}get(e){const t=kv(e);return this._delegate.get(t).then((e=>new _v(this._firestore,new zy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=kv(e);return n?(ov("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=kv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=kv(e);return this._delegate.delete(t),this}}class mv{constructor(e){this._delegate=e}set(e,t,n){const r=kv(e);return n?(ov("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=kv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=kv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new qy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=gv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new gv(e,new fv(e),t),r.set(t,i)),i}}gv.INSTANCES=new WeakMap;class yv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Po("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new yv(t,new kg(t._delegate,n,new ea(e)))}static forKey(e,t,n){return new yv(t,new kg(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Cv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cv(this.firestore,xg(this._delegate,e))}catch(t){throw vv(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Fe(e))instanceof kg&&Dg(this._delegate,e)}set(e,t){t=ov("DocumentReference.set",t);try{return t?$y(this._delegate,e,t):$y(this._delegate,e)}catch(n){throw vv(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Jy(this._delegate,e):Jy(this._delegate,e,t,...r)}catch(s){throw vv(s,"updateDoc()","DocumentReference.update()")}}delete(){return ev(_g((e=this._delegate).firestore,Mg),[new Ou(e._key,_u.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=wv(t),i=bv(t,(e=>new _v(this.firestore,new zy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Xy(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Qy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_g(e,kg);const t=_g(e.firestore,Mg);return hg(Fg(t),e._key,{source:"server"}).then((n=>tv(t,e,n)))}(this._delegate):function(e){e=_g(e,kg);const t=_g(e.firestore,Mg);return hg(Fg(t),e._key).then((n=>tv(t,e,n)))}(this._delegate),t.then((e=>new _v(this.firestore,new zy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new yv(this.firestore,e?this._delegate.withConverter(gv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function vv(e,t,n){return e.message=e.message.replace(t,n),e}function wv(e){for(const t of e)if("object"===typeof t&&!uv(t))return t;return{}}function bv(e,t){var n,r;let i;return i=uv(e[0])?e[0]:uv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _v{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gy(this._delegate,e._delegate)}}class Sv extends _v{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||xo(),t}}class Iv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fv(e)}where(e,t,n){try{return new Iv(this.firestore,ky(this._delegate,function(e,t,n){const r=t,i=Iy("where",e);return Ny._create(i,r,n)}(e,t,n)))}catch(r){throw vv(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Iv(this.firestore,ky(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Iy("orderBy",e);return Ay._create(n,t)}(e,t)))}catch(n){throw vv(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Iv(this.firestore,ky(this._delegate,(Sg("limit",t=e),Dy._create("limit",t,"F"))))}catch(t){throw vv(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Iv(this.firestore,ky(this._delegate,(Sg("limitToLast",t=e),Dy._create("limitToLast",t,"L"))))}catch(t){throw vv(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Iv(this.firestore,ky(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ry._create("startAt",t,!0)}(...arguments)))}catch(e){throw vv(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Iv(this.firestore,ky(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ry._create("startAfter",t,!1)}(...arguments)))}catch(e){throw vv(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Iv(this.firestore,ky(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Py._create("endBefore",t,!1)}(...arguments)))}catch(e){throw vv(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Iv(this.firestore,ky(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Py._create("endAt",t,!0)}(...arguments)))}catch(e){throw vv(e,"endAt()","Query.endAt()")}}isEqual(e){return Rg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Yy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_g(e,Cg);const t=_g(e.firestore,Mg),n=Fg(t),r=new Hy(t);return dg(n,e._query,{source:"server"}).then((n=>new Ky(t,r,e,n)))}(this._delegate):function(e){e=_g(e,Cg);const t=_g(e.firestore,Mg),n=Fg(t),r=new Hy(t);return Ey(e._query),dg(n,e._query).then((n=>new Ky(t,r,e,n)))}(this._delegate),t.then((e=>new Tv(this.firestore,new Ky(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=wv(t),i=bv(t,(e=>new Tv(this.firestore,new Ky(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Xy(this._delegate,r,i)}withConverter(e){return new Iv(this.firestore,e?this._delegate.withConverter(gv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ev{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Iv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Sv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ev(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Sv(this._firestore,n))}))}isEqual(e){return Gy(this._delegate,e._delegate)}}class Cv extends Iv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yv(this.firestore,e):null}doc(e){try{return new yv(this.firestore,void 0===e?Ag(this._delegate):Ag(this._delegate,e))}catch(t){throw vv(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=_g(e.firestore,Mg),r=Ag(e),i=jy(e.converter,t);return ev(n,[ny(ty(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,_u.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new yv(this.firestore,e)))}isEqual(e){return Dg(this._delegate,e._delegate)}withConverter(e){return new Cv(this.firestore,e?this._delegate.withConverter(gv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kv(e){return _g(e,kg)}class Nv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Gg(...t)}static documentId(){return new Nv(Zo.keyField().canonicalString())}isEqual(e){return(e=Fe(e))instanceof Gg&&this._delegate._internalPath.isEqual(e._internalPath)}}class xv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new sy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new xv(e)}static delete(){const e=new ry("deleteField");return e._methodName="FieldValue.delete",new xv(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oy("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new xv(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ay("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new xv(e)}static increment(e){const t=new ly("increment",e);return t._methodName="FieldValue.increment",new xv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Av={Firestore:dv,GeoPoint:Qg,Timestamp:Qo,Blob:cv,Transaction:pv,WriteBatch:mv,DocumentReference:yv,DocumentSnapshot:_v,Query:Iv,QueryDocumentSnapshot:Sv,QuerySnapshot:Tv,CollectionReference:Cv,FieldPath:Nv,FieldValue:xv,setLogLevel:function(e){var t;t=e,Io.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Dv;(function(e,t){e.INTERNAL.registerComponent(new Ue("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Av)))})(Dv=Xt,((e,t)=>new dv(e,t,new hv))),Dv.registerVersion("@firebase/firestore-compat","0.3.23");function Rv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Pv={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ov="EMAIL_SIGNIN",Lv="PASSWORD_RESET",Mv="RECOVER_EMAIL",Fv="REVERT_SECOND_FACTOR_ADDITION",Uv="VERIFY_AND_CHANGE_EMAIL",jv="VERIFY_EMAIL";function Vv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bv=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},zv=Vv,qv=new Ce("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kv=new Qe("@firebase/auth");function Wv(e){if(Kv.logLevel<=qe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kv.error("Auth (".concat(Nt,"): ").concat(e),...n)}}function Gv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $v(e,...n)}function Hv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $v(e,...n)}function Qv(e,t,n){const r=Object.assign(Object.assign({},zv()),{[t]:n});return new Ce("auth","Firebase",r).create(t,{appName:e.name})}function Yv(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gv(e,"argument-error"),Qv(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qv.create(e,...n)}function Jv(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $v(t,...r)}}function Xv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wv(t),new Error(t)}function Zv(e,t){e||Xv(t)}function ew(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tw(){return"http:"===nw()||"https:"===nw()}function nw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class rw{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zv(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())||Se()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tw()||_e()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function iw(e,t){Zv(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class sw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Xv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Xv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Xv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},aw=new rw(3e4,6e4);function lw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function cw(e,t,n,r){return uw(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=De(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),sw.fetch()(dw(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function uw(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ow),t);try{const t=new pw(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw mw(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw mw(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw mw(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw mw(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qv(e,a,o);Gv(e,a)}}catch(i){if(i instanceof Te)throw i;Gv(e,"network-request-failed",{message:String(i)})}}async function hw(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await cw(e,t,n,r,i);return"mfaPendingCredential"in s&&Gv(e,"multi-factor-auth-required",{_serverResponse:s}),s}function dw(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?iw(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function fw(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pw{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Hv(this.auth,"network-request-failed"))),aw.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function mw(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hv(e,t,r);return i.customData._tokenResponse=n,i}function gw(e){return void 0!==e&&void 0!==e.getResponse}function yw(e){return void 0!==e&&void 0!==e.enterprise}class vw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fw(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ww(e,t){return cw(e,"GET","/v2/recaptchaConfig",lw(e,t))}function bw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function _w(e){return 1e3*Number(e)}function Sw(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Wv("JWT malformed, contained fewer than 3 sections"),null;try{const e=fe(n);return e?JSON.parse(e):(Wv("Failed to decode base64 JWT payload"),null)}catch(i){return Wv("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Iw(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Te&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ew{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Tw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bw(this.lastLoginAt),this.creationTime=bw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Cw(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Iw(e,async function(e,t){return cw(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Jv(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Rv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tw(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class kw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jv(e.idToken,"internal-error"),Jv("undefined"!==typeof e.idToken,"internal-error"),Jv("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Sw(e);return Jv(t,"internal-error"),Jv("undefined"!==typeof t.exp,"internal-error"),Jv("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Jv(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await uw(e,{},(async()=>{const n=De({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=dw(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",sw.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new kw;return n&&(Jv("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Jv("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Jv("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kw,this.toJSON())}_performRefresh(){return Xv("not implemented")}}function Nw(e,t){Jv("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class xw{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Rv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ew(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Tw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Iw(this,this.stsTokenManager.getToken(this.auth,e));return Jv(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Fe(e),r=await n.getIdToken(t),i=Sw(r);Jv(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:bw(_w(i.auth_time)),issuedAtTime:bw(_w(i.iat)),expirationTime:bw(_w(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Fe(e);await Cw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Jv(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xw(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Jv(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Cw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Iw(this,async function(e,t){return cw(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;Jv(v&&S,e,"internal-error");const I=kw.fromJSON(this.name,S);Jv("string"===typeof v,e,"internal-error"),Nw(u,e.name),Nw(h,e.name),Jv("boolean"===typeof w,e,"internal-error"),Jv("boolean"===typeof b,e,"internal-error"),Nw(d,e.name),Nw(f,e.name),Nw(p,e.name),Nw(m,e.name),Nw(g,e.name),Nw(y,e.name);const E=new xw({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new kw;r.updateFromServerResponse(t);const i=new xw({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Cw(i),i}}const Aw=new Map;function Dw(e){Zv(e instanceof Function,"Expected a class definition");let t=Aw.get(e);return t?(Zv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Aw.set(e,t),t)}class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Rw.type="NONE";const Pw=Rw;function Ow(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Lw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ow(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ow("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xw._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Lw(Dw(Pw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Dw(Pw);const s=Ow(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=xw._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Lw(i,e,n)):new Lw(i,e,n)}}function Mw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zw(t))return"Blackberry";if(qw(t))return"Webos";if(Uw(t))return"Safari";if((t.includes("chrome/")||jw(t))&&!t.includes("edge/"))return"Chrome";if(Bw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Fw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/firefox\//i.test(e)}function Uw(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:we()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/crios\//i.test(e)}function Vw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iemobile/i.test(e)}function Bw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/android/i.test(e)}function zw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/blackberry/i.test(e)}function qw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/webos/i.test(e)}function Kw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ww(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return Kw(e)||Bw(e)||qw(e)||zw(e)||/windows phone/i.test(e)||Vw(e)}function Gw(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mw(we());break;case"Worker":t="".concat(Mw(we()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nt,"/").concat(r)}class Hw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Qw{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Yw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new Hw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dw(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Lw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Jv(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cw(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Fe(e):null;return t&&Jv(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Jv(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Dw(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return cw(e,"GET","/v2/passwordPolicy",lw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Qw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ce("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return cw(e,"POST","/v2/accounts:revokeToken",lw(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dw(e)||this._popupRedirectResolver;Jv(t,this,"argument-error"),this.redirectPersistenceManager=await Lw.create(this,[Dw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jv(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jv(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Kv.logLevel<=qe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kv.warn("Auth (".concat(Nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function $w(e){return Fe(e)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Oe((e=>this.observer=e))}get next(){return Jv(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xw(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Hv("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Zw(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class eb{constructor(e){this.type="recaptcha-enterprise",this.auth=$w(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;yw(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ww(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new vw(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&yw(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Xw("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function tb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new eb(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nb(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tb(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await tb(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function rb(e,t,n){const r=$w(e);Jv(r._canInitEmulator,r,"emulator-config-failed"),Jv(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ib(t),{host:o,port:a}=function(e){const t=ib(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:sb(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:sb(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ib(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sb(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ob{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xv("not implemented")}_getIdTokenResponse(e){return Xv("not implemented")}_linkToIdToken(e,t){return Xv("not implemented")}_getReauthenticationResolver(e){return Xv("not implemented")}}async function ab(e,t){return cw(e,"POST","/v1/accounts:resetPassword",lw(e,t))}async function lb(e,t){return cw(e,"POST","/v1/accounts:signUp",t)}async function cb(e,t){return hw(e,"POST","/v1/accounts:signInWithPassword",lw(e,t))}async function ub(e,t){return cw(e,"POST","/v1/accounts:sendOobCode",lw(e,t))}async function hb(e,t){return ub(e,t)}async function db(e,t){return ub(e,t)}class fb extends ob{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fb(e,t,"password")}static _fromEmailAndCode(e,t){return new fb(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return nb(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",cb);case"emailLink":return async function(e,t){return hw(e,"POST","/v1/accounts:signInWithEmailLink",lw(e,t))}(e,{email:this._email,oobCode:this._password});default:Gv(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nb(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lb);case"emailLink":return async function(e,t){return hw(e,"POST","/v1/accounts:signInWithEmailLink",lw(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Gv(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pb(e,t){return hw(e,"POST","/v1/accounts:signInWithIdp",lw(e,t))}class mb extends ob{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gv("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Rv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new mb(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return pb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pb(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=De(t)}return e}}const gb={USER_NOT_FOUND:"user-not-found"};class yb extends ob{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return hw(e,"POST","/v1/accounts:signInWithPhoneNumber",lw(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await hw(e,"POST","/v1/accounts:signInWithPhoneNumber",lw(e,t));if(n.temporaryProof)throw mw(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return hw(e,"POST","/v1/accounts:signInWithPhoneNumber",lw(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),gb)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new yb({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vb{constructor(e){var t,n,r,i,s,o;const a=Re(Pe(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Jv(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Re(Pe(e)).link,n=t?Re(Pe(t)).deep_link_id:null,r=Re(Pe(e)).deep_link_id;return(r?Re(Pe(r)).link:null)||r||n||t||e}(e);try{return new vb(t)}catch(n){return null}}}class wb{constructor(){this.providerId=wb.PROVIDER_ID}static credential(e,t){return fb._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vb.parseLink(t);return Jv(n,"argument-error"),fb._fromEmailAndCode(e,n.code,n.tenantId)}}wb.PROVIDER_ID="password",wb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _b extends bb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sb extends _b{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Jv("providerId"in t&&"signInMethod"in t,"argument-error"),mb._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Jv(e.idToken||e.accessToken,"argument-error"),mb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Sb.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Sb.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Sb(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class Ib extends _b{constructor(){super("facebook.com")}static credential(e){return mb._fromParams({providerId:Ib.PROVIDER_ID,signInMethod:Ib.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ib.credentialFromTaggedObject(e)}static credentialFromError(e){return Ib.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ib.credential(t.oauthAccessToken)}catch(n){return null}}}Ib.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ib.PROVIDER_ID="facebook.com";class Eb extends _b{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mb._fromParams({providerId:Eb.PROVIDER_ID,signInMethod:Eb.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eb.credentialFromTaggedObject(e)}static credentialFromError(e){return Eb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Eb.credential(n,r)}catch(i){return null}}}Eb.GOOGLE_SIGN_IN_METHOD="google.com",Eb.PROVIDER_ID="google.com";class Tb extends _b{constructor(){super("github.com")}static credential(e){return mb._fromParams({providerId:Tb.PROVIDER_ID,signInMethod:Tb.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tb.credentialFromTaggedObject(e)}static credentialFromError(e){return Tb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Tb.credential(t.oauthAccessToken)}catch(n){return null}}}Tb.GITHUB_SIGN_IN_METHOD="github.com",Tb.PROVIDER_ID="github.com";class Cb extends ob{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return pb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pb(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Cb(n,i):null}static _create(e,t){return new Cb(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kb extends bb{constructor(e){Jv(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return kb.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return kb.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Cb.fromJSON(e);return Jv(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Cb._create(r,n)}catch(i){return null}}}class Nb extends _b{constructor(){super("twitter.com")}static credential(e,t){return mb._fromParams({providerId:Nb.PROVIDER_ID,signInMethod:Nb.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Nb.credentialFromTaggedObject(e)}static credentialFromError(e){return Nb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Nb.credential(n,r)}catch(i){return null}}}async function xb(e,t){return hw(e,"POST","/v1/accounts:signUp",lw(e,t))}Nb.TWITTER_SIGN_IN_METHOD="twitter.com",Nb.PROVIDER_ID="twitter.com";class Ab{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await xw._fromIdTokenResponse(e,n,r),s=Db(n);return new Ab({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Db(n);return new Ab({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Db(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Rb extends Te{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Rb.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Rb(e,t,n,r)}}function Pb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Rb._fromErrorAndOperation(e,n,t,r);throw n}))}function Ob(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Lb(e,t){const n=Fe(e);await Fb(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return cw(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ob(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Mb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Iw(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ab._forOperation(e,"link",r)}async function Fb(e,t,n){await Cw(t);const r=!1===e?"provider-already-linked":"no-such-provider";Jv(Ob(t.providerData).has(n)===e,t.auth,r)}async function Ub(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Iw(e,Pb(r,i,t,e),n);Jv(s.idToken,r,"internal-error");const o=Sw(s.idToken);Jv(o,r,"internal-error");const{sub:a}=o;return Jv(e.uid===a,r,"user-mismatch"),Ab._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Gv(r,"user-mismatch"),s}}async function jb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Pb(e,r,t),s=await Ab._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Vb(e,t){return jb($w(e),t)}async function Bb(e,t){const n=Fe(e);return await Fb(!1,n,t.providerId),Mb(n,t)}async function zb(e,t){return Ub(Fe(e),t)}async function qb(e,t){const n=$w(e),r=await async function(e,t){return hw(e,"POST","/v1/accounts:signInWithCustomToken",lw(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ab._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Kb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Wb._fromServerResponse(e,t):"totpInfo"in t?Gb._fromServerResponse(e,t):Gv(e,"internal-error")}}class Wb extends Kb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Wb(t)}}class Gb extends Kb{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Gb(t)}}function Hb(e,t,n){var r;Jv((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Jv("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Jv(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Jv(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Qb(e){const t=$w(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Yb(e,t){await async function(e,t){return cw(e,"POST","/v1/accounts:update",lw(e,t))}(Fe(e),{oobCode:t})}async function $b(e,t){const n=Fe(e),r=await ab(n,{oobCode:t}),i=r.requestType;switch(Jv(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Jv(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Jv(r.mfaInfo,n,"internal-error");default:Jv(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Kb._fromServerResponse($w(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Jb(e,t){const n={identifier:t,continueUri:tw()?ew():"http://localhost"},{signinMethods:r}=await async function(e,t){return cw(e,"POST","/v1/accounts:createAuthUri",lw(e,t))}(Fe(e),n);return r||[]}async function Xb(e,t){const n=Fe(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Hb(n.auth,r,t);const{email:i}=await async function(e,t){return ub(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Zb(e,t,n){const r=Fe(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Hb(r.auth,i,n);const{email:s}=await async function(e,t){return ub(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function e_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Fe(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Iw(i,async function(e,t){return cw(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function t_(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Iw(e,async function(e,t){return cw(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class n_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class r_ extends n_{constructor(e,t,n,r){super(e,t,n),this.username=r}}class i_ extends n_{constructor(e,t){super(e,"facebook.com",t)}}class s_ extends r_{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class o_ extends n_{constructor(e,t){super(e,"google.com",t)}}class a_ extends r_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function l_(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Sw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new n_(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new i_(s,i);case"github.com":return new s_(s,i);case"google.com":return new o_(s,i);case"twitter.com":return new a_(s,i,e.screenName||null);case"custom":case"anonymous":return new n_(s,null);default:return new n_(s,r,i)}}(n)}class c_{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new c_("enroll",e,t)}static _fromMfaPendingCredential(e){return new c_("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return c_._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return c_._fromIdtoken(e.multiFactorSession.idToken)}return null}}class u_{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=$w(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Kb._fromServerResponse(n,e)));Jv(r.mfaPendingCredential,n,"internal-error");const s=c_._fromMfaPendingCredential(r.mfaPendingCredential);return new u_(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ab._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Jv(t.user,n,"internal-error"),Ab._forOperation(t.user,t.operationType,o);default:Gv(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class h_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Kb._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new h_(e)}async getSession(){return c_._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Iw(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Iw(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},cw(r,"POST","/v2/accounts/mfaEnrollment:withdraw",lw(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const d_=new WeakMap;const f_="__sak";class p_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(f_,"1"),this.storage.removeItem(f_),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class m_ extends p_{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=we();return Uw(e)||Kw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ww(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ie()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m_.type="LOCAL";const g_=m_;class y_ extends p_{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}y_.type="SESSION";const v_=y_;class w_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new w_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function b_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}w_.receivers=[];class __{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=b_("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function S_(){return window}function I_(){return"undefined"!==typeof S_().WorkerGlobalScope&&"function"===typeof S_().importScripts}const E_="firebaseLocalStorageDb",T_="firebaseLocalStorage",C_="fbase_key";class k_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function N_(e,t){return e.transaction([T_],t?"readwrite":"readonly").objectStore(T_)}function x_(){const e=indexedDB.open(E_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(T_,{keyPath:C_})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(T_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(E_);return new k_(e).toPromise()}(),t(await x_()))}))}))}async function A_(e,t,n){const r=N_(e,!0).put({[C_]:t,value:n});return new k_(r).toPromise()}function D_(e,t){const n=N_(e,!0).delete(t);return new k_(n).toPromise()}class R_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await x_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w_._getInstance(I_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new __(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await x_();return await A_(e,f_,"1"),await D_(e,f_),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>A_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=N_(e,!1).get(t),r=await new k_(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>D_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=N_(e,!1).getAll();return new k_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}R_.type="LOCAL";const P_=R_;const O_=1e12;class L_{constructor(e){this.auth=e,this.counter=O_,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new M_(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||O_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||O_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||O_;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class M_{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Jv(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const F_=Zw("rcb"),U_=new rw(3e4,6e4);class j_{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=S_().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Jv(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&gw(S_().grecaptcha)?Promise.resolve(S_().grecaptcha):new Promise(((n,r)=>{const i=S_().setTimeout((()=>{r(Hv(e,"network-request-failed"))}),U_.get());S_()[F_]=()=>{S_().clearTimeout(i),delete S_()[F_];const s=S_().grecaptcha;if(!s||!gw(s))return void r(Hv(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Xw("".concat("https://www.google.com/recaptcha/api.js?","?").concat(De({onload:F_,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Hv(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=S_().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class V_{async load(e){return new L_(e)}clearedOneInstance(){}}const B_="recaptcha",z_={theme:"light",type:"image"};class q_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},z_);this.parameters=n,this.type=B_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$w(e),this.isInvisible="invisible"===this.parameters.size,Jv("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Jv(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new V_:new j_,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Jv(!this.parameters.sitekey,this.auth,"argument-error"),Jv(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Jv("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=S_()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Jv(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Jv(tw()&&!I_(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await cw(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Jv(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Jv(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class K_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=yb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function W_(e,t,n){var r;const i=await n.verify();try{let s;if(Jv("string"===typeof i,e,"argument-error"),Jv(n.type===B_,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Jv("enroll"===t.type,e,"internal-error");const n=await function(e,t){return cw(e,"POST","/v2/accounts/mfaEnrollment:start",lw(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Jv("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Jv(n,e,"missing-multi-factor-info");const o=await function(e,t){return cw(e,"POST","/v2/accounts/mfaSignIn:start",lw(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return cw(e,"POST","/v1/accounts:sendVerificationCode",lw(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class G_{constructor(e){this.providerId=G_.PROVIDER_ID,this.auth=$w(e)}verifyPhoneNumber(e,t){return W_(this.auth,e,Fe(t))}static credential(e,t){return yb._fromVerification(e,t)}static credentialFromResult(e){const t=e;return G_.credentialFromTaggedObject(t)}static credentialFromError(e){return G_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yb._fromTokenResponse(n,r):null}}function H_(e,t){return t?Dw(t):(Jv(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}G_.PROVIDER_ID="phone",G_.PHONE_SIGN_IN_METHOD="phone";class Q_ extends ob{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pb(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y_(e){return jb(e.auth,new Q_(e),e.bypassAuthState)}function $_(e){const{auth:t,user:n}=e;return Jv(n,t,"internal-error"),Ub(n,new Q_(e),e.bypassAuthState)}async function J_(e){const{auth:t,user:n}=e;return Jv(n,t,"internal-error"),Mb(n,new Q_(e),e.bypassAuthState)}class X_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y_;case"linkViaPopup":case"linkViaRedirect":return J_;case"reauthViaPopup":case"reauthViaRedirect":return $_;default:Gv(this.auth,"internal-error")}}resolve(e){Zv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Z_=new rw(2e3,1e4);class eS extends X_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,eS.currentPopupAction&&eS.currentPopupAction.cancel(),eS.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jv(e,this.auth,"internal-error"),e}async onExecution(){Zv(1===this.filter.length,"Popup operations only handle one event");const e=b_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Hv(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Hv(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eS.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Hv(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Z_.get())};e()}}eS.currentPopupAction=null;const tS="pendingRedirect",nS=new Map;class rS extends X_{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=nS.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=aS(t),r=oS(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}nS.set(this.auth._key(),e)}return this.bypassAuthState||nS.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function iS(e,t){return oS(e)._set(aS(t),"true")}function sS(e,t){nS.set(e._key(),t)}function oS(e){return Dw(e._redirectPersistence)}function aS(e){return Ow(tS,e.config.apiKey,e.name)}function lS(e,t,n){return async function(e,t,n){const r=$w(e);Yv(e,t,bb),await r._initializationPromise;const i=H_(r,n);return await iS(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function cS(e,t,n){return async function(e,t,n){const r=Fe(e);Yv(r.auth,t,bb),await r.auth._initializationPromise;const i=H_(r.auth,n);await iS(i,r.auth);const s=await dS(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function uS(e,t,n){return async function(e,t,n){const r=Fe(e);Yv(r.auth,t,bb),await r.auth._initializationPromise;const i=H_(r.auth,n);await Fb(!1,r,t.providerId),await iS(i,r.auth);const s=await dS(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function hS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=$w(e),i=H_(r,t),s=new rS(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function dS(e){const t=b_("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class fS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!mS(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hv(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pS(e))}saveEventToCache(e){this.cachedEventUids.add(pS(e)),this.lastProcessedEventTime=Date.now()}}function pS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function mS(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function gS(e){return cw(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const yS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vS=/^https?/;function wS(e){const t=ew(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!vS.test(n))return!1;if(yS.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bS=new rw(3e4,6e4);function _S(){const e=S_().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let SS=null;function IS(e){return SS=SS||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){_S(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_S(),n(Hv(e,"network-request-failed"))},timeout:bS.get()})}if(null===(i=null===(r=S_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=S_().gapi)||void 0===s?void 0:s.load)){const t=Zw("iframefcb");return S_()[t]=()=>{gapi.load?o():n(Hv(e,"network-request-failed"))},Xw("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw SS=null,e}))}(e),SS}const ES=new rw(5e3,15e3),TS="__/auth/iframe",CS="emulator/auth/iframe",kS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xS(e){const t=e.config;Jv(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?iw(t,CS):"https://".concat(e.config.authDomain,"/").concat(TS),r={apiKey:t.apiKey,appName:e.name,v:Nt},i=NS.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(De(r).slice(1))}const AS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class DS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function RS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},AS),{width:r.toString(),height:i.toString(),top:s,left:o}),c=we().toLowerCase();n&&(a=jw(c)?"_blank":n),Fw(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Kw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:we())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new DS(null);const h=window.open(t||"",a,u);Jv(h,e,"popup-blocked");try{h.focus()}catch(d){}return new DS(h)}const PS="__/auth/handler",OS="emulator/auth/handler",LS=encodeURIComponent("fac");async function MS(e,t,n,r,i,s){Jv(e.config.authDomain,e,"auth-domain-config-required"),Jv(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nt,eventId:i};if(t instanceof bb){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof _b){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(LS,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(PS);return iw(t,OS)}(e),"?").concat(De(a).slice(1)).concat(c)}const FS="webStorageSupport";const US=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v_,this._completeRedirectFn=hS,this._overrideRedirectResult=sS}async _openPopup(e,t,n,r){var i;Zv(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return RS(e,await MS(e,t,n,ew(),r),b_())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){S_().location.href=e}(await MS(e,t,n,ew(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zv(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await IS(e),n=S_().gapi;return Jv(n,e,"internal-error"),t.open({where:document.body,url:xS(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kS,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Hv(e,"network-request-failed"),s=S_().setTimeout((()=>{r(i)}),ES.get());function o(){S_().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new fS(e);return t.register("authEvent",(t=>{Jv(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(FS,{type:FS},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[FS];void 0!==i&&t(!!i),Gv(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await gS(e);for(const r of t)try{if(wS(r))return}catch(n){}Gv(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ww()||Uw()||Kw()}};class jS{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Xv("unexpected MultiFactorSessionType")}}}class VS extends jS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new VS(e)}_finalizeEnroll(e,t,n){return function(e,t){return cw(e,"POST","/v2/accounts/mfaEnrollment:finalize",lw(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return cw(e,"POST","/v2/accounts/mfaSignIn:finalize",lw(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class BS{constructor(){}static assertion(e){return VS._fromCredential(e)}}BS.FACTOR_ID="phone";var zS="@firebase/auth",qS="1.5.1";class KS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Jv(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ge())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var WS;function GS(){return window}WS="Browser",St(new Ue("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Jv(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:WS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gw(WS)},c=new Yw(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),St(new Ue("auth-internal",(e=>(e=>new KS(e))($w(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Pt(zS,qS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(WS)),Pt(zS,qS,"esm2017");async function HS(e,t,n){var r;const{BuildInfo:i}=GS();Zv(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Zv(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Kw()?o.ibi=i.packageName:Bw()?o.apn=i.packageName:Gv(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,MS(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function QS(e){const{cordova:t}=GS();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const YS=20;class $S extends fS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function JS(e){const t=await eI()._get(tI(e));return t&&await eI()._remove(tI(e)),t}function XS(e,t){var n,r;const i=function(e){const t=nI(e),n=t.link?decodeURIComponent(t.link):void 0,r=nI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return nI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=nI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Hv(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ZS(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<YS;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function eI(){return Dw(g_)}function tI(e){return Ow("authEvent",e.config.apiKey,e.name)}function nI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Re(n.join("?"))}const rI=class{constructor(){this._redirectPersistence=v_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hS,this._overrideRedirectResult=sS}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new $S(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Gv(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=GS();Jv("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Jv("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Jv("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jv("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jv("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),nS.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ZS(),postBody:null,tenantId:e.tenantId,error:Hv(e,"no-auth-event")}}(e,n,r);await function(e,t){return eI()._set(tI(e),t)}(e,s);const o=await HS(e,s,t);return async function(e,t,n){const{cordova:r}=GS();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Hv(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Bw()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await QS(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=GS(),n={};Kw()?n.iosBundleId=t.packageName:Bw()?n.androidPackageName=t.packageName:Gv(e,"operation-not-supported-in-this-environment"),await gS(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=GS(),s=setTimeout((async()=>{await JS(e),t.onEvent(iI())}),500),o=async n=>{clearTimeout(s);const r=await JS(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=XS(r,n.url)),t.onEvent(i||iI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");GS().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function iI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Hv("no-auth-event")}}function sI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function oI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return!("file:"!==sI()&&"ionic:"!==sI()&&"capacitor:"!==sI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function aI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return Ie()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/Edge\/\d+/.test(e)}(e)}function lI(){try{const e=self.localStorage,t=b_();if(e)return e.setItem(t,"1"),e.removeItem(t),!aI()||Ee()}catch(e){return cI()&&Ee()}return!1}function cI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function uI(){return("http:"===sI()||"https:"===sI()||_e()||oI())&&!(Se()||be())&&lI()&&!cI()}function hI(){return oI()&&"undefined"!==typeof document}const dI={LOCAL:"local",NONE:"none",SESSION:"session"},fI=Jv,pI="persistence";async function mI(e){await e._initializationPromise;const t=gI(),n=Ow(pI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function gI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const yI=Jv;class vI{constructor(){this.browserResolver=Dw(US),this.cordovaResolver=Dw(rI),this.underlyingResolver=null,this._redirectPersistence=v_,this._completeRedirectFn=hS,this._overrideRedirectResult=sS}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return hI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!hI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function wI(e){return e.unwrap()}function bI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new EI(e,function(e,t){var n;const r=Fe(e),i=t;return Jv(t.customData.operationType,r,"argument-error"),Jv(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),u_._fromError(r,i)}(e,t))}else if(r){const e=_I(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function _I(e){const{_tokenResponse:t}=e instanceof Te?e.customData:e;if(!t)return null;if(!(e instanceof Te)&&"temporaryProof"in t&&"phoneNumber"in t)return G_.credentialFromResult(e);const n=t.providerId;if(!n||n===Pv.PASSWORD)return null;let r;switch(n){case Pv.GOOGLE:r=Eb;break;case Pv.FACEBOOK:r=Ib;break;case Pv.GITHUB:r=Tb;break;case Pv.TWITTER:r=Nb;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Cb._create(n,o):mb._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Sb(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Te?r.credentialFromError(e):r.credentialFromResult(e)}function SI(e,t){return t.catch((t=>{throw t instanceof Te&&bI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,_I(r)),additionalUserInfo:l_(e),user:TI.getOrCreate(n)};var r}))}async function II(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>SI(e,n.confirm(t))}}class EI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return SI(wI(this.auth),this.resolver.resolveSignIn(e))}}class TI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Fe(e);return d_.has(t)||d_.set(t,h_._fromUser(t)),d_.get(t)}(e)}static getOrCreate(e){return TI.USER_MAP.has(e)||TI.USER_MAP.set(e,new TI(e)),TI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return SI(this.auth,Bb(this._delegate,e))}async linkWithPhoneNumber(e,t){return II(this.auth,async function(e,t,n){const r=Fe(e);await Fb(!1,r,"phone");const i=await W_(r.auth,t,Fe(n));return new K_(i,(e=>Bb(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return SI(this.auth,async function(e,t,n){const r=Fe(e);Yv(r.auth,t,bb);const i=H_(r.auth,n);return new eS(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vI))}async linkWithRedirect(e){return await mI($w(this.auth)),uS(this._delegate,e,vI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return SI(this.auth,zb(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return II(this.auth,async function(e,t,n){const r=Fe(e),i=await W_(r.auth,t,Fe(n));return new K_(i,(e=>zb(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return SI(this.auth,async function(e,t,n){const r=Fe(e);Yv(r.auth,t,bb);const i=H_(r.auth,n);return new eS(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vI))}async reauthenticateWithRedirect(e){return await mI($w(this.auth)),cS(this._delegate,e,vI)}sendEmailVerification(e){return Xb(this._delegate,e)}async unlink(e){return await Lb(this._delegate,e),this}updateEmail(e){return function(e,t){return t_(Fe(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return t_(Fe(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Mb(Fe(e),t)}(this._delegate,e)}updateProfile(e){return e_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Zb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}TI.USER_MAP=new WeakMap;const CI=Jv;class kI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;CI(n,"invalid-api-key",{appName:e.name}),CI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?vI:void 0;this._delegate=t.initialize({options:{persistence:xI(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Bv),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?TI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){rb(this._delegate,e,t)}applyActionCode(e){return Yb(this._delegate,e)}checkActionCode(e){return $b(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ab(Fe(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qb(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return SI(this._delegate,async function(e,t,n){const r=$w(e),i=nb(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xb),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qb(e),t})),o=await Ab._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Jb(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=vb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){CI(uI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await $w(e)._initializationPromise,hS(e,t,!1)}(this._delegate,vI);return e?SI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){$w(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=NI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=NI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=$w(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Jv(t.handleCodeInApp,r,"argument-error"),t&&Hb(r,e,t)}(i,n),await nb(r,i,"getOobCode",db)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=$w(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Hb(r,i,n),await nb(r,i,"getOobCode",hb)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){fI(Object.values(dI).includes(t),e,"invalid-persistence-type"),Se()?fI(t!==dI.SESSION,e,"unsupported-persistence-type"):be()?fI(t===dI.NONE,e,"unsupported-persistence-type"):cI()?fI(t===dI.NONE||t===dI.LOCAL&&Ee(),e,"unsupported-persistence-type"):fI(t===dI.NONE||lI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case dI.SESSION:t=v_;break;case dI.LOCAL:t=await Dw(P_)._isAvailable()?P_:g_;break;case dI.NONE:t=Pw;break;default:return Gv("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return SI(this._delegate,async function(e){var t;const n=$w(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ab({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await xb(n,{returnSecureToken:!0}),i=await Ab._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return SI(this._delegate,Vb(this._delegate,e))}signInWithCustomToken(e){return SI(this._delegate,qb(this._delegate,e))}signInWithEmailAndPassword(e,t){return SI(this._delegate,function(e,t,n){return Vb(Fe(e),wb.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qb(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return SI(this._delegate,async function(e,t,n){const r=Fe(e),i=wb.credentialWithLink(t,n||ew());return Jv(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vb(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return II(this._delegate,async function(e,t,n){const r=$w(e),i=await W_(r,t,Fe(n));return new K_(i,(e=>Vb(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return CI(uI(),this._delegate,"operation-not-supported-in-this-environment"),SI(this._delegate,async function(e,t,n){const r=$w(e);Yv(e,t,bb);const i=H_(r,n);return new eS(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,vI))}async signInWithRedirect(e){return CI(uI(),this._delegate,"operation-not-supported-in-this-environment"),await mI(this._delegate),lS(this._delegate,e,vI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await $b(Fe(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function NI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&TI.getOrCreate(e)),error:t,complete:n}}function xI(e,t){const n=function(e,t){const n=gI();if(!n)return[];const r=Ow(pI,e,t);switch(n.getItem(r)){case dI.NONE:return[Pw];case dI.LOCAL:return[P_,v_];case dI.SESSION:return[v_];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(P_)||n.push(P_),"undefined"!==typeof window)for(const r of[g_,v_])n.includes(r)||n.push(r);return n.includes(Pw)||n.push(Pw),n}kI.Persistence=dI;class AI{constructor(){this.providerId="phone",this._delegate=new G_(wI(Xt.auth()))}static credential(e,t){return G_.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}AI.PHONE_SIGN_IN_METHOD=G_.PHONE_SIGN_IN_METHOD,AI.PROVIDER_ID=G_.PROVIDER_ID;const DI=Jv;class RI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xt.app();var r;DI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new q_(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Ue("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new kI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ov,PASSWORD_RESET:Lv,RECOVER_EMAIL:Mv,REVERT_SECOND_FACTOR_ADDITION:Fv,VERIFY_AND_CHANGE_EMAIL:Uv,VERIFY_EMAIL:jv}},EmailAuthProvider:wb,FacebookAuthProvider:Ib,GithubAuthProvider:Tb,GoogleAuthProvider:Eb,OAuthProvider:Sb,SAMLAuthProvider:kb,PhoneAuthProvider:AI,PhoneMultiFactorGenerator:BS,RecaptchaVerifier:RI,TwitterAuthProvider:Nb,Auth:kI,AuthCredential:ob,Error:Te}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.1")}(Xt);Xt.initializeApp({apiKey:"AIzaSyCXLAsebzzSfcoXOapmY7P7VhyyCx9smtY",authDomain:"keoghsport-logfiles.firebaseapp.com",projectId:"keoghsport-logfiles",storageBucket:"keoghsport-logfiles.appspot.com",messagingSenderId:"1046833789454",appId:"1:1046833789454:web:5328f857faa8324a01da5f",measurementId:"G-TDTE7CKWK6"});const PI=Xt.firestore();var OI=n(184);function LI(){return"Keoghs_Port_"+(new Date).getFullYear()}function MI(){return"curUser"+(new Date).getFullYear()}function FI(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes();return"["+((n<10?"0"+n:n)+"/"+(r<10?"0"+r:r)+"/"+t%1e3+" "+(i<10?"0"+i:i)+":"+(s<10?"0"+s:s))+"]"}function UI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(console.log(e),""!==e)try{console.log("saveEvent"),PI.collection(LI()).add({time_stamp:Qo.fromDate(new Date),message:e})}catch(t){console.log(t)}else console.log("No message to create event")}const jI=()=>{const[e,n]=(0,t.useState)(!0),[r,i]=(0,t.useState)([]);(0,t.useEffect)((()=>{try{const e=[],t=PI.collection(LI()).orderBy("time_stamp").onSnapshot((t=>{t.forEach((t=>{e.push({...t.data(),key:t.id})})),i(e),n(!1)}));return()=>t()}catch(e){console.log(e)}}),[e]);return(0,OI.jsx)("div",{id:"logFilePage",children:(0,OI.jsxs)("div",{id:"logFileContainer",children:[(0,OI.jsxs)("h3",{id:"logFileHeader",children:["Log File for ",(new Date).getFullYear(),(0,OI.jsx)("button",{id:"downloadLogFile",onClick:()=>{const e=document.createElement("a"),t=new Blob([document.getElementById("logFileTableBody").innerText],{type:"text/plain;charset=utf-8"});e.href=URL.createObjectURL(t),e.download=LI()+".txt",document.body.appendChild(e),e.click()},children:"Download"})]}),(0,OI.jsx)("div",{id:"logFileTableContainer",children:(0,OI.jsxs)("table",{id:"logFileTable",children:[(0,OI.jsx)("thead",{children:(0,OI.jsxs)("tr",{children:[(0,OI.jsx)("th",{width:"175px",id:"timeStampTableHeader",className:"logFileTableHeader timestamp",children:"Timestamp"}),(0,OI.jsx)("th",{id:"messageTableHeader",className:"logFileTableHeader message",children:"Message"})]})}),(0,OI.jsx)("tbody",{id:"logFileTableBody",children:r.map((e=>(0,OI.jsxs)("tr",{children:[(0,OI.jsxs)("td",{className:"logInput timestamp",children:[FI(e.time_stamp.toDate())," "]},e.id),(0,OI.jsx)("td",{className:"logInput message",children:e.message},e.id)]})))})]})})]})})},VI=n.p+"static/media/Logo_3.1fdf4cd0eca4775ea2e4.png";class BI extends t.Component{submitSignIn(e){try{e.preventDefault();let t=document.getElementById("signIn"),n=t.value.trim();if(t.value="",""!=n&&n.length<=256)return void async function(e){try{const t=(await PI.collection(MI()).doc("1").get()).data();if(console.log(t),void 0===t)console.log("!existis"),PI.collection(MI()).doc("1").set({name:e}),UI(e+" logged in"),console.log(e+" logged in");else{let n=t.name;UI(n+" logged out"),console.log(n+" logged out"),PI.collection(MI()).doc("1").update({name:e}),UI(e+" logged in"),console.log(e+" logged in")}}catch(t){console.log(t)}}(n);n.length>256?alert("Username too long"):alert("No value entered, please type your name to sign in")}catch(t){}}endOfYearSignOut(e){try{e.preventDefault(),"YES"===prompt('Initiate END OF YEAR SIGN OUT PROTOCOL?\nType "YES" if you want to initialte protocol')&&(UI("Signed out for the year"),window.location.href="/Signed-out")}catch(t){}}render(){return(0,OI.jsxs)("div",{className:"siteHeader",children:[(0,OI.jsx)("div",{className:"keoghLogoContainer",children:(0,OI.jsx)("img",{src:VI,className:"headerLogo",alt:"Keoghs Logo"})}),(0,OI.jsxs)("div",{className:"rightSideOfHeader",children:[(0,OI.jsx)("h1",{className:"headerTitle",children:this.props.value}),(0,OI.jsx)("div",{className:"signInContainer",children:(0,OI.jsxs)("form",{id:"signInForm",children:[(0,OI.jsx)("input",{id:"signIn",className:"signInInput",type:"text",placeholder:"Username",name:"username",max:"256",onChange:this.updateInput}),(0,OI.jsx)("button",{className:"signInButton",type:"submit",onClick:e=>this.submitSignIn(e),children:"Sign-in"})]})})]}),this.props.signOut&&(0,OI.jsx)("button",{id:"endOfYearSignOut",onClick:e=>this.endOfYearSignOut(e),children:"End of Year"})]})}}const zI=BI,qI=n.p+"static/media/Instructionional_guide.9072e503292334514986.pdf";class KI extends t.Component{render(){return(0,OI.jsxs)("div",{id:"homeOptions",className:"page",children:[(0,OI.jsx)("h2",{children:"Options"}),(0,OI.jsx)("a",{href:"/LoadUnload",children:(0,OI.jsx)("button",{id:"load-unload",children:"Load and Unload"})}),(0,OI.jsx)("a",{href:"/Weight",children:(0,OI.jsx)("button",{id:"weight-balancing",children:"Weight Balancing"})}),(0,OI.jsx)("a",{href:qI,target:"_blank",rel:"noreferrer",children:(0,OI.jsx)("button",{id:"helpButton",children:"Help"})})]})}}const WI=KI;function GI(){return document.getElementById("noteInput"),(0,OI.jsx)("div",{className:"footer",children:(0,OI.jsxs)("footer",{children:[(0,OI.jsx)("div",{className:"note",children:(0,OI.jsxs)("form",{id:"noteForm",onSubmit:function(e){e.preventDefault();try{let e=document.getElementById("noteInput").value.trim();if(0===e.length)return void alert("Must enter a note to submit a note");UI("Note by Operator: "+e)}catch(t){alert(t)}document.getElementById("noteInput").value=""},children:[(0,OI.jsx)("textarea",{id:"noteInput",maxLength:"1000",minLength:"1",placeholder:"Insert note to log file here..."}),(0,OI.jsx)("input",{id:"noteSubmitButton",type:"submit",value:"Submit"})]})}),(0,OI.jsxs)("div",{className:"heap",children:[(0,OI.jsx)("br",{}),"Created and maintained by H.E.A.P."]})]})})}const HI=function(){return(0,OI.jsxs)("div",{className:"homePage",children:[(0,OI.jsx)(zI,{value:"Move Generator",signOut:!0}),(0,OI.jsx)(WI,{}),(0,OI.jsx)(GI,{})]})};class QI extends t.Component{constructor(){super(...arguments),this.textFromFile="none",this.fileName="none",this.state={selectedFile:null,errorMessage:"No File Selected"},this.sendDataUp=e=>{this.props.parentCallback({name:this.fileName,text:this.textFromFile.trim()})},this.onFileChange=e=>{if(0===e.target.files.length)this.setState({errorMessage:"INVALID ACTION: No File is Selected"}),document.getElementById("fileUploadButton").style.visibility="hidden",document.getElementById("fileNameh2").style.visibility="hidden",document.getElementById("dispalyValidationMessage").style.color="red",document.getElementById("dispalyValidationMessage").innerHTML="INVALID ACTION: No File is Selected";else{var t=e.target.files[0];this.setState({selectedFile:t}),document.getElementById("showFileDataContainer").style.visibility="visible","text/plain"===t.type?(this.setState({errorMessage:"File Is Permitted"}),document.getElementById("dispalyValidationMessage").style.color="limeGreen",document.getElementById("fileNameh2").style.visibility="visible",document.getElementById("fileNameEcho").innerHTML=t.name,document.getElementById("fileUploadButton").style.visibility="visible",document.getElementById("dispalyValidationMessage").innerHTML="File Is Permitted"):"text/plain"!==t.type&&(document.getElementById("dispalyValidationMessage").style.color="red",document.getElementById("fileNameh2").style.visibility="hidden",document.getElementById("fileUploadButton").style.visibility="hidden",this.setState({errorMessage:"INVALID FILE TYPE: please upload a .txt file"}),document.getElementById("dispalyValidationMessage").innerHTML="INVALID FILE TYPE: please upload a .txt file")}},this.onFileUpload=()=>{let e=new FileReader;e.readAsText(this.state.selectedFile),e.onload=()=>{this.textFromFile=e.result,this.fileName=this.state.selectedFile.name,this.sendDataUp()},e.onerror=()=>{alert(e.error)}}}render(){return(0,OI.jsxs)("div",{id:"fileUploadContainer",children:[(0,OI.jsx)("div",{id:"fileUploadInput",children:(0,OI.jsx)("input",{id:"manifestFileInput",type:"file",accept:".txt",onChange:this.onFileChange})}),(0,OI.jsxs)("div",{id:"fileInformationContainer",children:[(0,OI.jsxs)("div",{id:"showFileDataContainer",children:[(0,OI.jsxs)("h2",{id:"fileNameh2",children:["File Name: ",(0,OI.jsx)("span",{id:"fileNameEcho"})]}),(0,OI.jsx)("p",{id:"dispalyValidationMessage"})]}),(0,OI.jsx)("button",{id:"fileUploadButton",onClick:this.onFileUpload,children:"Upload!"})]})]})}}const YI=QI;function $I(e){for(let n=8;n>=0;n--){let t=[];t.push(n+1);for(let r=0;r<12;r++)e[n][r].container?t.push(e[n][r].container.weight):e[n][r].deadSpace?t.push("X"):t.push("\u2022");console.log(t.join("\t"))}let t=[];t.push(" ");for(let n=1;n<13;n++)t.push(n);console.log(t.join("\t"))}class JI{constructor(e){this.state=structuredClone(e),this.pathCost=0,this.heuristicCost=0,this.move=[[8,0],[8,0]],this.parent=null,this.stateMap=[]}}const XI=0,ZI=1,eE=0,tE=1;async function nE(e){return console.log("Initial State:"),$I(e),console.log("HEURISTIC COST: "+pE(e,[8,0],uE(e))),console.log("CHECKING BALANCE..."),function(e){let t=_E(e),n=0;t.forEach((e=>{n+=e}));let r=n/2;return iE(r*(18/19),r*(20/19),0,n,t)}(e)?(rE(e)?console.log("ALREADY BALANCED"):console.log("UNBALANCED & BALANCE POSSIBLE, BALANCING..."),function(e){let t=new JI(e);t.stateMap=uE(e);let n=[t];var r=new Array(1e7).fill(null);r[oE(e)]=[e];for(;n.length>0;){n.sort((function(e,t){return e.pathCost+e.heuristicCost-(t.pathCost+t.heuristicCost)}));let e=n.shift();if(rE(e.state))return console.log("SUCCESS!"),console.log("Balanced State:"),$I(e.state),SE(e);n=sE(n,r,e)}return console.log("ERROR: No Balance found!"),null}(e)):(wE(e)?console.log("UNBALANCED & IMPOSSIBLE TO BALANCE, ALREADY SIFTED"):console.log("UNBALANCED & IMPOSSIBLE TO BALANCE, SIFTING..."),yE(e))}function rE(e){let t=0,n=0,r=!0;for(let i=0;i<12;i++){let s=0;for(;s<8&&1==e[s][i].deadSpace;)s++;for(;s<9&&null!==e[s][i].container;)i<6?t+=e[s][i].container.weight:n+=e[s][i].container.weight,8==s&&(r=!1),s++}return!(!(Math.min(t,n)/Math.max(t,n)>=.9)&&t+n!=0||!r)}function iE(e,t,n,r,i){if(i.length>0&&n<t){let s=structuredClone(i),o=s.shift();if((n+=o)>=e&&n<=t)return!0;if(n+(r-=o)>e)return iE(e,t,n,r,s)||iE(e,t,n-o,r,s)}return!1}function sE(e,t,n){console.log("EXPANDING NODE");for(let r=0;r<12;r++)if(r!=n.move[ZI][tE]||n.move[XI]==n.move[ZI])for(let i=0;i<12;i++)if(i!=r&&null===n.state[8][i].container){let s=lE(n.state,r,i);if(s.length>0){let r=cE(n.state,s),i=hE(n.stateMap,s),o=oE(r);if(null===t[o]){let a=new JI(r);a.pathCost=n.pathCost+dE(n.state,n.move[ZI],s),a.heuristicCost=pE(r,n.move[ZI],i),a.move=s,a.parent=n,a.stateMap=i,e.push(a),null===t[o]?t[o]=[r]:t[o].push(r)}}}return e}function oE(e){let t=0;for(let n=0;n<12;n++){let r=0;for(;r<8&&1==e[r][n].deadSpace;)r++;for(;r<9&&null!==e[r][n].container;)t+=(e[r][n].container.weight+(r+1)*(10*(n+1)))*((r+1)*(n+1)+r+n),r++}return t%1e7}function aE(e,t){for(let n=0;n<12;n++){let r=0;for(;r<8&&(1==e[r][n].deadSpace||1==t[r][n].deadSpace);){if(e[r][n].deadSpace!=t[r][n].deadSpace)return!1;r++}for(;r<9&&(null!==e[r][n].container||null!==t[r][n].container);){if(null==e[r][n].container||null==t[r][n].container)return!1;if(e[r][n].container.weight!=t[r][n].container.weight)return!1;r++}}return!0}function lE(e,t,n){let r=Math.min(t+1,n+1);for(;r<Math.max(t,n);){if(1==e[8][r].deadSpace||null!==e[8][r].container)return[];r++}let i=0;for(;i<8&&1==e[i][t].deadSpace;)i++;if(null===e[i][t].container)return[];for(;i<8&&null!==e[i+1][t].container;)i++;let s=0;for(;s<8&&(null!==e[s][n].container||1==e[s][n].deadSpace);)s++;return[[i,t],[s,n]]}function cE(e,t){var n=structuredClone(e);return n[t[XI][eE]][t[XI][tE]]={container:null,deadSpace:!1},n[t[ZI][eE]][t[ZI][tE]]=e[t[XI][eE]][t[XI][tE]],n}function uE(e){let t=structuredClone(e);for(let n=0;n<9;n++)for(let r=0;r<12;r++)null!==e[n][r].container?t[n][r]=100*n+r:t[n][r]=-1;return t}function hE(e,t){var n=structuredClone(e);return n[t[XI][eE]][t[XI][tE]]=-1,n[t[ZI][eE]][t[ZI][tE]]=e[t[XI][eE]][t[XI][tE]],n}function dE(e,t,n){let r=0,i=Math.max(t[eE],n[XI][eE]),s=Math.min(t[tE],n[XI][tE]),o=Math.max(t[tE],n[XI][tE]);for(let a=0;a<2;a++){0==a?(r+=Math.abs(t[eE]-n[XI][eE]),r+=Math.abs(t[tE]-n[XI][tE])):(r+=Math.abs(n[ZI][eE]-n[XI][eE]),r+=Math.abs(n[ZI][tE]-n[XI][tE]),i=Math.max(n[ZI][eE],n[XI][eE]),s=Math.min(n[ZI][tE],n[XI][tE]),o=Math.max(n[ZI][tE],n[XI][tE]));let l=i;for(let t=s+1;t<o;t++){let n=0;for(;n<8&&1==e[n][t].deadSpace;)n++;for(;n<8&&null!==e[n][t].container;)n++;n>l&&(l=n)}r+=2*(l-i)}return r}let fE=[];function pE(e,t,n){if(rE(e))return 0;let r=[],i=[],s=[];for(let h=0;h<6;h++){let t=9,o=9;for(let i=8;i>=0;i--){let s=5-h;0==e[i][s].deadSpace&&(null==e[i][s].container?t--:r.push({id:n[i][s],weight:e[i][s].container.weight,pos:[i,s],moveCost:0,craneCost:0})),s=6+h,0==e[i][s].deadSpace&&(null==e[i][s].container?o--:r.push({id:n[i][s],weight:e[i][s].container.weight,pos:[i,s],moveCost:0,craneCost:0}))}t<9&&i.push([t,5-h]),o<9&&s.push([o,6+h])}let o=0;r.forEach((e=>{e.craneCost=Math.abs(t[eE]-e.pos[eE]),e.craneCost+=Math.abs(t[tE]-e.pos[tE]);let n=Number.POSITIVE_INFINITY;e.pos[tE]<6?s.forEach((t=>{let r=Math.abs(t[eE]-e.pos[eE]);r+=Math.abs(t[tE]-e.pos[tE]),r<n&&(n=r)})):i.forEach((t=>{let r=Math.abs(t[eE]-e.pos[eE]);r+=Math.abs(t[tE]-e.pos[tE]),r<n&&(n=r)})),e.moveCost=n,o+=e.weight}));let a=o/2,l=a*(18/19),c=a*(20/19),u=Number.POSITIVE_INFINITY;if(0==fE.length){let e=[];u=mE(l,c,0,r,[],e,Number.POSITIVE_INFINITY,r,o);structuredClone(e);for(let t=0;t<e.length;t++)for(let n=0;n<e.length;n++)if(e[n].length>e[t].length){let r=!0,i=0;for(;r&&i<e[t].length;){let s=0;for(;s<e[n].length&&(e[t][i].pos[eE]!=e[n][s].pos[eE]||e[t][i].pos[tE]!=e[n][s].pos[tE]);)s++;s==e[n].length&&(r=!1),i++}r&&(e[n]=[])}e.forEach((e=>{e.length>0&&fE.push(e)})),console.log("Minimizing number of combinations: "+e.length+" -> "+fE.length)}else{let e=structuredClone(fE);for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)r.forEach(((r,i)=>{e[t][n].id==r.id&&(e[t][n]=r)}));e.forEach((e=>{let t=gE(e,l,c,r);t<u&&(u=t)}))}return u}function mE(e,t,n,r,i,s,o,a,l){if(r.length>0&&n<t){let c=structuredClone(r),u=c.shift(),h=u.weight,d=structuredClone(i);if(l-=h,(n+=h)>t)return mE(e,t,n-h,c,d,s,o,a,l);if(n+l<e)return o;let f=structuredClone(i);f.push(u);let p=gE(f,e,t,a);if(p>=o)return o;if(n>=e&&n<=t){let r=mE(e,t,n-h,c,d,s,p,a,l);return s.push(f),Math.min(p,r)}if(n<e){let r=mE(e,t,n,c,f,s,o,a,l),i=mE(e,t,n-h,c,d,s,o,a,l);return Math.min(r,i,o)}}return o}function gE(e,t,n,r){let i=0,s=[],o=[],a=0,l=Number.POSITIVE_INFINITY,c=-1;e.forEach((e=>{e.craneCost<l&&(l=e.craneCost,c=e.id),e.pos[tE]<6?s.push(e):o.push(e),a+=e.weight}));let u=a>=t&&a<=n;if(0==s.length||0==o.length){if(u){let t=0==s.length,n=0==o.length,a=0;r.forEach((r=>{if(t&&r.pos[tE]<6||n&&r.pos[tE]>5){let t=!0,n=0;for(;n<e.length;){if(r.id==e[n].id){t=!1;break}n++}t&&r.craneCost<l&&(l=r.craneCost,c=r.id)}})),a=0,r.forEach((r=>{if(t&&r.pos[tE]<6||n&&r.pos[tE]>5){let t=!0,n=0;for(;n<e.length;){if(r.id==e[n].id){t=!1;break}n++}t&&(r.id==c?i+=r.moveCost:i+=2*r.moveCost)}else{let t=!0,n=!1,s=0;for(;s<e.length;){if(r.id==e[s].id){t=!1;break}r.pos[tE]==e[s].pos[tE]&&r.pos[eE]>e[s].pos[eE]&&(n=!0),s++}t&&n&&(i+=2)}}))}return i+=l,e.forEach((e=>{e.id==c?i+=e.moveCost:i+=2*e.moveCost})),i}let h=0;s.forEach((e=>{e.id==c?h+=e.moveCost:h+=2*e.moveCost}));let d=l;if(u){let t=0;r.forEach((t=>{if(t.pos[tE]>5){let n=!0,r=0;for(;r<e.length;){if(t.id==e[r].id){n=!1;break}r++}n&&t.craneCost<l&&(l=t.craneCost,c=t.id)}})),t=0,r.forEach((t=>{if(t.pos[tE]>5){let n=!0,r=0;for(;r<e.length;){if(t.id==e[r].id){n=!1;break}r++}n&&(t.id==c?h+=t.moveCost:h+=2*t.moveCost)}else{let n=!0,r=!1,s=0;for(;s<e.length;){if(t.id==e[s].id){n=!1;break}t.pos[tE]==e[s].pos[tE]&&t.pos[eE]>e[s].pos[eE]&&(r=!0),s++}n&&r&&(i+=2)}}))}l=d;let f=0;if(o.forEach((e=>{e.id==c?f+=e.moveCost:f+=2*e.moveCost})),u){let t=0;r.forEach((t=>{if(t.pos[tE]<6){let n=!0,r=0;for(;r<e.length;){if(t.id==e[r].id){n=!1;break}r++}n&&t.craneCost<l&&(l=t.craneCost,c=t.id)}})),t=0,r.forEach((t=>{if(t.pos[tE]<6){let n=!0,r=0;for(;r<e.length;){if(t.id==e[r].id){n=!1;break}r++}n&&(t.id==c?f+=t.moveCost:f+=2*t.moveCost)}else{let n=!0,r=!1,s=0;for(;s<e.length;){if(t.id==e[s].id){n=!1;break}t.pos[tE]==e[s].pos[tE]&&t.pos[eE]>e[s].pos[eE]&&(r=!0),s++}n&&r&&(i+=2)}}))}return i+=Math.min(h,f),i+=l,i}function yE(e){let t=[new JI(e)];var n=new Array(1e7).fill(null);for(n[oE(e)]=[e];t.length>0;){t.sort((function(e,t){return e.pathCost+e.heuristicCost-(t.pathCost+t.heuristicCost)}));let e=t.shift();if(wE(e.state))return console.log("SUCCESS!"),console.log("SIFTed State:"),$I(e.state),SE(e);t=vE(t,n,e)}return console.log("ERROR: No SIFT found!"),null}function vE(e,t,n){console.log("EXPANDING NODE");for(let r=0;r<12;r++)if(r!=n.move[ZI][tE]||n.move[XI]==n.move[ZI])for(let i=0;i<12;i++)if(i!=r&&null===n.state[8][i].container){let s=lE(n.state,r,i);if(s.length>0){let r=cE(n.state,s),i=oE(r),o=!0;if(null!==t[i])for(let e=0;e<t[i].length;e++)aE(r,t[i][e])&&(o=!1);if(o){let o=new JI(r);o.pathCost=n.pathCost+dE(n.state,n.move[ZI],s),o.heuristicCost=bE(r),o.move=s,o.parent=n,e.push(o),null===t[i]?t[i]=[r]:t[i].push(r)}}}return e}function wE(e){let t=_E(e),n=0;for(;t.length>0&&n<8;){for(let i=0;i<6;i++)for(let s=0;s<2;s++){var r;if(r=0==s?5-i:6+i,0==e[n][r].deadSpace){if(!(t.length>0))return!0;{let i=t.shift();if(null==e[n][r].container||e[n][r].container.weight!=i)return!1}}}n++}return!0}function bE(e){let t=_E(e),n=0,r=0;for(;t.length>0&&r<8;){for(let s=0;s<6;s++)for(let o=0;o<2;o++){var i;i=0==o?5-s:6+s;let a=r;if(0==e[r][i].deadSpace&&t.length>0){let s=t.shift();if(null==e[r][i].container||e[r][i].container.weight!=s)for(;r<9&&null!==e[r][i].container;)n+=1e5,r++;else n-=1e5}r=a}r++}return n}function _E(e){let t=[];for(let n=0;n<12;n++){let r=0;for(;r<8&&1==e[r][n].deadSpace;)r++;for(;r<9&&null!==e[r][n].container;)e[r][n].container.weight>0&&t.push(e[r][n].container.weight),r++}return t.sort((function(e,t){return t-e})),t}function SE(e){var t=[];t=IE(e,0,t);let n=new Array(4).fill(new Array(24).fill({container:null,deadSpace:!1})),r={ship:e.state,buffer:n,truck:0};return t.push({cost:0,state:r,initialPos:{pos:[-1,-1],loc:1},finalPos:{pos:[-1,-1],loc:1}}),console.log("ACTUAL COST: "+t[0].cost),t}function IE(e,t,n){if(null===e.parent)return n;t+=e.pathCost-e.parent.pathCost,null!=e.parent&&null!=e.parent.parent&&IE(e.parent,t,n);let r=new Array(4).fill(new Array(24).fill({container:null,deadSpace:!1})),i={ship:e.parent.state,buffer:r,truck:0};return n.push({cost:t,state:i,initialPos:{pos:e.move[XI],loc:1},finalPos:{pos:e.move[ZI],loc:1}}),n}const EE=function(e){const[n,r]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{!async function(){r(!0);try{s(await nE(e.grid))}catch(t){console.error(t)}finally{r(!1)}}()}),[]),n?(0,OI.jsx)("div",{id:"loadingBalanceSteps",children:(0,OI.jsx)("h3",{style:{color:"black"},children:"Generating Steps..."})}):i?(e.parentRecieveSteps({steps:i}),s(null),void r(!1)):(0,OI.jsx)("div",{id:"loadingBalanceSteps",children:(0,OI.jsx)("h3",{style:{color:"black"},children:"Done!"})})};let TE=[];const CE=e=>{let{index:n,cost:r,initialPos:i,finalPos:s,state:o,stepIndex:a,length:l,fileName:c,ParentRecieveButtonInput:u,task:h}=e;const[d,f]=(0,t.useState)(""),[p,m]=(0,t.useState)([]);function g(e,t,n){let r=0;if(1===e)r=o.ship;else{if(2!==e){let r=e===s.loc,o=e===i.loc;if(!0===o){let e="";return void 0!==i.newContainer&&(e=i.newContainer.name),(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+t+","+n+"]",className:"displayCell gridToggleButton containerPresent ".concat(o?" start ":""),children:e})})}return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+t+","+n+"]",className:"displayCell gridToggleButton empty ".concat(r?" end ":"")})})}r=o.buffer}let a=r[t-1][n-1];if(null===a.container&&!0===a.deadSpace)return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+t+","+n+"]",className:"displayCell gridToggleButton unusable"})});if(null===a.container&&!1===a.deadSpace){let r=t-1===s.pos[0]&&n-1===s.pos[1]&&e===s.loc;return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+t+","+n+"]",className:"displayCell gridToggleButton empty ".concat(r?" end ":"")})})}if(null!==a.container){let r=t-1===i.pos[0]&&n-1===i.pos[1]&&e===i.loc;return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+t+","+n+"]",className:"displayCell gridToggleButton containerPresent ".concat(r?" start ":""),children:1===h?a.container.name:a.container.weight})})}}let y="nonActive";a===n&&(y="activeSlide");const v=()=>{console.log(TE);let e="";TE.forEach((e=>{o.ship[e.location.pos[0]][e.location.pos[1]].container.weight=e.weight}));for(var t=0;t<8;t++)for(var n=0;n<12;n++){let r="0"+(t+1),i=(n+1<10?"0":"")+(n+1),s=o.ship[t][n];if(null===s.container&&!1===s.deadSpace)e+="["+r+","+i+"], {00000}, UNUSED\n";else if(null===s.container&&!0===s.deadSpace)e+="["+r+","+i+"], {00000}, NAN\n";else{let t=s.container.weight.toString();for(;t.length<5;)t="0"+t;e+="["+r+","+i+"], {"+t+"}, "+s.container.name+"\n"}}const r=document.createElement("a"),i=new Blob([e],{type:"text/plain;charset=utf-8"});r.href=URL.createObjectURL(i);let s=c.replace(".txt","")+"_OUTBOUND.txt";r.download=s,document.body.appendChild(r),r.click(),UI("Finished a Cycle. Manifest "+s+" was downloaded, and a reminder pop-up to operator to send the file was displayed."),window.location.href="/"};return(0,OI.jsx)("div",{className:"individualStepContainerOuter "+y,children:(0,OI.jsxs)("div",{className:"individualStepContainerInner",children:[(0,OI.jsxs)("div",{className:"buffer",children:[(0,OI.jsx)("div",{className:"statsContainer",children:(0,OI.jsx)("div",{className:"statsContainerInner",children:l-1===n?(0,OI.jsxs)("div",{children:[(0,OI.jsx)("h3",{children:"Task Completed:"}),(0,OI.jsx)("h4",{children:1===l?"Paremeters for task completion already met":""}),"Remember to download the OutBound Manifest and email it to the ship captain:",(0,OI.jsx)("button",{onClick:v,children:"Download File"})]}):(0,OI.jsxs)(OI.Fragment,{children:[(0,OI.jsx)("h3",{children:"Information:"}),(0,OI.jsxs)("p",{children:["Time Remaining: ",r>60?1==Math.floor(r/60)?Math.floor(r/60)+" hour "+(r-60*Math.floor(r/60))+" minute ("+r+" minutes total)":Math.floor(r/60)+" hours "+(r-60*Math.floor(r/60))+" minute ("+r+" minutes total)":1==r?r+" minute":r+" minutes"]}),(0,OI.jsxs)("p",{children:["Step: ",n+1," of ",l-1]}),void 0!==i.newContainer?(0,OI.jsxs)(OI.Fragment,{children:[(0,OI.jsxs)("label",{htmlFor:"addWeight",children:["Pick Up Container: '",i.newContainer.name,"' and input its weight: "]}),(0,OI.jsx)("input",{type:"number",value:d,id:"addWeight",name:"addWeight",min:"0",max:"99999",onChange:e=>f(e.target.value)})]}):(0,OI.jsx)(OI.Fragment,{}),(0,OI.jsx)("button",{id:"nextStepButton",className:"next",onClick:()=>function(){try{return console.log(i),3!==i.loc?(1===i.loc&&3===s.loc&&UI('"'+o.ship[i.pos[0]][i.pos[1]].container.name+'" is offloaded'),u(),!0):void 0===d||""===d?(alert("Remember to Insert the Container Weight!"),!1):d>=0&&d<=99999?(console.log(d),TE.push({location:s,weight:d}),UI('"'+i.newContainer.name+'" is onloaded'),m(TE),f(""),u(),!0):(alert("Make sure the weight is within the range 0-99999"),!1)}catch(e){return console.log(e),!1}return!1}(),children:"Next Step"})]})})}),(0,OI.jsxs)("div",{id:"bufferRow_4",className:"bufferRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"4"}),g(2,4,1),g(2,4,2),g(2,4,3),g(2,4,4),g(2,4,5),g(2,4,6),g(2,4,7),g(2,4,8),g(2,4,9),g(2,4,10),g(2,4,11),g(2,4,12),g(2,4,13),g(2,4,14),g(2,4,15),g(2,4,16),g(2,4,17),g(2,4,18),g(2,4,19),g(2,4,20),g(2,4,21),g(2,4,22),g(2,4,23),g(2,4,24)]}),(0,OI.jsxs)("div",{id:"bufferRow_3",className:"bufferRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"3"}),g(2,3,1),g(2,3,2),g(2,3,3),g(2,3,4),g(2,3,5),g(2,3,6),g(2,3,7),g(2,3,8),g(2,3,9),g(2,3,10),g(2,3,11),g(2,3,12),g(2,3,13),g(2,3,14),g(2,3,15),g(2,3,16),g(2,3,17),g(2,3,18),g(2,3,19),g(2,3,20),g(2,3,21),g(2,3,22),g(2,3,23),g(2,3,24)]}),(0,OI.jsxs)("div",{id:"bufferRow_2",className:"bufferRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"2"}),g(2,2,1),g(2,2,2),g(2,2,3),g(2,2,4),g(2,2,5),g(2,2,6),g(2,2,7),g(2,2,8),g(2,2,9),g(2,2,10),g(2,2,11),g(2,2,12),g(2,2,13),g(2,2,14),g(2,2,15),g(2,2,16),g(2,2,17),g(2,2,18),g(2,2,19),g(2,2,20),g(2,2,21),g(2,2,22),g(2,2,23),g(2,2,24)]}),(0,OI.jsxs)("div",{id:"bufferRow_1",className:"bufferRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"1"}),g(2,1,1),g(2,1,2),g(2,1,3),g(2,1,4),g(2,1,5),g(2,1,6),g(2,1,7),g(2,1,8),g(2,1,9),g(2,1,10),g(2,1,11),g(2,1,12),g(2,1,13),g(2,1,14),g(2,1,15),g(2,1,16),g(2,1,17),g(2,1,18),g(2,1,19),g(2,1,20),g(2,1,21),g(2,1,22),g(2,1,23),g(2,1,24)]}),(0,OI.jsxs)("div",{id:"displayColNumbers",children:[(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"1"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"2"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"3"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"4"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"5"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"6"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"7"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"8"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"9"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"10"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"11"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"12"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"13"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"14"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"15"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"16"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"17"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"18"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"19"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"20"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"21"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"22"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"23"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"24"})]})]}),(0,OI.jsxs)("div",{className:"truck",children:[g(3,1,1),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"Truck"})]}),(0,OI.jsxs)("div",{className:"ship",children:[(0,OI.jsxs)("div",{id:"shipRow_9",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"9"}),g(1,9,1),g(1,9,2),g(1,9,3),g(1,9,4),g(1,9,5),g(1,9,6),g(1,9,7),g(1,9,8),g(1,9,9),g(1,9,10),g(1,9,11),g(1,9,12)]}),(0,OI.jsxs)("div",{id:"shipRow_8",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"8"}),g(1,8,1),g(1,8,2),g(1,8,3),g(1,8,4),g(1,8,5),g(1,8,6),g(1,8,7),g(1,8,8),g(1,8,9),g(1,8,10),g(1,8,11),g(1,8,12)]}),(0,OI.jsxs)("div",{id:"shipRow_7",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"7"}),g(1,7,1),g(1,7,2),g(1,7,3),g(1,7,4),g(1,7,5),g(1,7,6),g(1,7,7),g(1,7,8),g(1,7,9),g(1,7,10),g(1,7,11),g(1,7,12)]}),(0,OI.jsxs)("div",{id:"shipRow_6",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"6"}),g(1,6,1),g(1,6,2),g(1,6,3),g(1,6,4),g(1,6,5),g(1,6,6),g(1,6,7),g(1,6,8),g(1,6,9),g(1,6,10),g(1,6,11),g(1,6,12)]}),(0,OI.jsxs)("div",{id:"shipRow_5",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"5"}),g(1,5,1),g(1,5,2),g(1,5,3),g(1,5,4),g(1,5,5),g(1,5,6),g(1,5,7),g(1,5,8),g(1,5,9),g(1,5,10),g(1,5,11),g(1,5,12)]}),(0,OI.jsxs)("div",{id:"shipRow_4",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"4"}),g(1,4,1),g(1,4,2),g(1,4,3),g(1,4,4),g(1,4,5),g(1,4,6),g(1,4,7),g(1,4,8),g(1,4,9),g(1,4,10),g(1,4,11),g(1,4,12)]}),(0,OI.jsxs)("div",{id:"shipRow_3",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"3"}),g(1,3,1),g(1,3,2),g(1,3,3),g(1,3,4),g(1,3,5),g(1,3,6),g(1,3,7),g(1,3,8),g(1,3,9),g(1,3,10),g(1,3,11),g(1,3,12)]}),(0,OI.jsxs)("div",{id:"shipRow_2",className:"shipRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"2"}),g(1,2,1),g(1,2,2),g(1,2,3),g(1,2,4),g(1,2,5),g(1,2,6),g(1,2,7),g(1,2,8),g(1,2,9),g(1,2,10),g(1,2,11),g(1,2,12)]}),(0,OI.jsxs)("div",{id:"shipRow_1",className:"shipRow",children:[(0,OI.jsx)("span",{className:"rowNumber label",children:"1"}),g(1,1,1),g(1,1,2),g(1,1,3),g(1,1,4),g(1,1,5),g(1,1,6),g(1,1,7),g(1,1,8),g(1,1,9),g(1,1,10),g(1,1,11),g(1,1,12)]}),(0,OI.jsxs)("div",{id:"colNumbers",children:[(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"1"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"2"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"3"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"4"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"5"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"6"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"7"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"8"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"9"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"10"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"11"}),(0,OI.jsx)("div",{className:"label displayColumnNumbers",children:"12"})]})]})]})})};const kE=function(e){const[n,r]=(0,t.useState)(e.steps),[i,s]=(0,t.useState)(0),o=()=>{s(i+1)};return(0,OI.jsx)("div",{id:"displayStepsContainer",children:n.map(((t,r)=>(0,OI.jsx)(CE,{ParentRecieveButtonInput:o,...t,stepIndex:r,index:i,length:n.length,fileName:e.fileName,task:e.task},r)))})},NE=0,xE=1,AE=2,DE=3;class RE{constructor(e,t){this.name=e,this.weight=t}}let PE=[[{container:new RE("amazon warehous",100),deadSpace:!1},{container:null,deadSpace:!0},{container:null,deadSpace:!0},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:new RE("THIS STRING here",90),deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}]],OE=null;class LE extends t.Component{constructor(){super(...arguments),this.state={current:NE,textFromFile:"null",loadedFileName:null,gridState:[],stepsFound:null},this.handleFileCallback=e=>{try{let l=0;this.setState({textFromFile:e.text,loadedFileName:e.name});for(var t=e.text.split("\n"),n=0;n<t.length;n++){var r=t[n].match(/(\d+)/g),i=parseInt(r[0])-1,s=parseInt(r[1])-1,o=parseInt(r[2]),a=t[n].replace(/^(?:[^,]*,){2}[^,]*,/," ").trim();"UNUSED"===a?PE[i][s]={container:null,deadSpace:!1}:"NAN"===a?PE[i][s]={container:null,deadSpace:!0}:(PE[i][s]={container:new RE(a,o),deadSpace:!1},l++)}for(n=0;n<12;n++)PE[8][n]={container:null,deadSpace:!1};this.setState({gridState:PE}),UI("Manifest "+e.name+" is opened. There are "+l+" container(s) on the ship"),this.transition(xE)}catch(l){alert("ERROR: File not of correct format"+l),this.transition(NE)}},this.recieveSteps=e=>{OE=e.steps,this.setState({steps:e}),console.log(OE),this.transition(AE)}}transition(e){this.setState({current:e})}render(){switch(this.state.current){case xE:return this.renderComputeSteps();case AE:return this.renderShowSteps();case DE:return this.renderFinishProcedure();default:return this.renderInit()}}renderInit(){return(0,OI.jsx)("div",{className:"page",children:(0,OI.jsx)(YI,{parentCallback:this.handleFileCallback})})}renderComputeSteps(){return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)(EE,{parentRecieveSteps:this.recieveSteps,grid:PE})})}renderShowSteps(){return(0,OI.jsxs)(OI.Fragment,{children:[(0,OI.jsxs)("div",{className:"loadedFileName",children:["Current File: ",this.state.loadedFileName]}),(0,OI.jsx)(kE,{fileName:this.state.loadedFileName,steps:OE,task:2})]})}renderFinishProcedure(){return(0,OI.jsx)("button",{onClick:()=>this.transition(NE),children:"No Logic Yet"})}}const ME=LE;const FE=function(){return(0,OI.jsxs)("div",{className:"weightBalancingContainer",children:[(0,OI.jsx)(zI,{value:"Weight Balancing"}),(0,OI.jsx)(ME,{}),(0,OI.jsx)(GI,{})]})};class UE extends t.Component{constructor(){super(...arguments),this.state={numberOfContainersToOffload:0},this.sendInputDataUp=(e,t)=>{this.props.parentToggleButton({row:e,col:t})},this.showCellData=(e,t)=>{try{let n=this.props.grid[e-1][t-1];document.getElementById("selectedButtonInfo").innerHTML="<h2>Cell Data</h2><p>Location: ["+e+", "+t+"]</p><p>Name: "+n.container.name+"</p><p>Weight: "+n.container.weight}catch(n){}},this.clearCellData=()=>{document.getElementById("selectedButtonInfo").innerHTML="<h2>Cell Data</h2>"},this.determineTypeOfCell=(e,t)=>{let n=this.props.grid[e-1][t-1];return null===n.container&&!0===n.deadSpace?(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+e+","+t+"]",className:"gridCell gridToggleButton unusable"})}):null===n.container&&!1===n.deadSpace?(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+e+","+t+"]",className:"gridCell gridToggleButton empty"})}):null!==n.container?(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)("button",{id:"toggleCell_["+e+","+t+"]",className:"gridCell gridToggleButton containerPresent ".concat(n.offload?"active":""),onMouseOver:()=>this.showCellData(e,t),onMouseLeave:()=>this.clearCellData,onClick:()=>this.sendInputDataUp(e,t),children:(0,OI.jsx)("span",{className:"displayContainerName",children:n.container.name})})}):void 0}}render(){return(0,OI.jsxs)("div",{id:"selectUnload",className:"inputSection",children:[(0,OI.jsx)("h3",{id:"containersToUnloadInput_header",children:"Select Containers to Unload"}),(0,OI.jsxs)("div",{id:"OffloadCounter",children:["Unloading ",this.props.numberToOffload," containers"]}),(0,OI.jsxs)("div",{id:"containersToUnloadInput",children:[(0,OI.jsxs)("div",{id:"cargoGridDisplayContainer",children:[(0,OI.jsxs)("div",{id:"gridRow_8",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"8"}),this.determineTypeOfCell(8,1),this.determineTypeOfCell(8,2),this.determineTypeOfCell(8,3),this.determineTypeOfCell(8,4),this.determineTypeOfCell(8,5),this.determineTypeOfCell(8,6),this.determineTypeOfCell(8,7),this.determineTypeOfCell(8,8),this.determineTypeOfCell(8,9),this.determineTypeOfCell(8,10),this.determineTypeOfCell(8,11),this.determineTypeOfCell(8,12)]}),(0,OI.jsxs)("div",{id:"gridRow_7",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"7"}),this.determineTypeOfCell(7,1),this.determineTypeOfCell(7,2),this.determineTypeOfCell(7,3),this.determineTypeOfCell(7,4),this.determineTypeOfCell(7,5),this.determineTypeOfCell(7,6),this.determineTypeOfCell(7,7),this.determineTypeOfCell(7,8),this.determineTypeOfCell(7,9),this.determineTypeOfCell(7,10),this.determineTypeOfCell(7,11),this.determineTypeOfCell(7,12)]}),(0,OI.jsxs)("div",{id:"gridRow_6",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"6"}),this.determineTypeOfCell(6,1),this.determineTypeOfCell(6,2),this.determineTypeOfCell(6,3),this.determineTypeOfCell(6,4),this.determineTypeOfCell(6,5),this.determineTypeOfCell(6,6),this.determineTypeOfCell(6,7),this.determineTypeOfCell(6,8),this.determineTypeOfCell(6,9),this.determineTypeOfCell(6,10),this.determineTypeOfCell(6,11),this.determineTypeOfCell(6,12)]}),(0,OI.jsxs)("div",{id:"gridRow_5",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"5"}),this.determineTypeOfCell(5,1),this.determineTypeOfCell(5,2),this.determineTypeOfCell(5,3),this.determineTypeOfCell(5,4),this.determineTypeOfCell(5,5),this.determineTypeOfCell(5,6),this.determineTypeOfCell(5,7),this.determineTypeOfCell(5,8),this.determineTypeOfCell(5,9),this.determineTypeOfCell(5,10),this.determineTypeOfCell(5,11),this.determineTypeOfCell(5,12)]}),(0,OI.jsxs)("div",{id:"gridRow_4",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"4"}),this.determineTypeOfCell(4,1),this.determineTypeOfCell(4,2),this.determineTypeOfCell(4,3),this.determineTypeOfCell(4,4),this.determineTypeOfCell(4,5),this.determineTypeOfCell(4,6),this.determineTypeOfCell(4,7),this.determineTypeOfCell(4,8),this.determineTypeOfCell(4,9),this.determineTypeOfCell(4,10),this.determineTypeOfCell(4,11),this.determineTypeOfCell(4,12)]}),(0,OI.jsxs)("div",{id:"gridRow_3",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"3"}),this.determineTypeOfCell(3,1),this.determineTypeOfCell(3,2),this.determineTypeOfCell(3,3),this.determineTypeOfCell(3,4),this.determineTypeOfCell(3,5),this.determineTypeOfCell(3,6),this.determineTypeOfCell(3,7),this.determineTypeOfCell(3,8),this.determineTypeOfCell(3,9),this.determineTypeOfCell(3,10),this.determineTypeOfCell(3,11),this.determineTypeOfCell(3,12)]}),(0,OI.jsxs)("div",{id:"gridRow_2",className:"gridRow",children:[(0,OI.jsx)("span",{className:"label rowNumber",children:"2"}),this.determineTypeOfCell(2,1),this.determineTypeOfCell(2,2),this.determineTypeOfCell(2,3),this.determineTypeOfCell(2,4),this.determineTypeOfCell(2,5),this.determineTypeOfCell(2,6),this.determineTypeOfCell(2,7),this.determineTypeOfCell(2,8),this.determineTypeOfCell(2,9),this.determineTypeOfCell(2,10),this.determineTypeOfCell(2,11),this.determineTypeOfCell(2,12)]}),(0,OI.jsxs)("div",{id:"gridRow_1",className:"gridRow",children:[(0,OI.jsx)("span",{className:"rowNumber label",children:"1"}),this.determineTypeOfCell(1,1),this.determineTypeOfCell(1,2),this.determineTypeOfCell(1,3),this.determineTypeOfCell(1,4),this.determineTypeOfCell(1,5),this.determineTypeOfCell(1,6),this.determineTypeOfCell(1,7),this.determineTypeOfCell(1,8),this.determineTypeOfCell(1,9),this.determineTypeOfCell(1,10),this.determineTypeOfCell(1,11),this.determineTypeOfCell(1,12)]}),(0,OI.jsxs)("div",{id:"colNumbers",children:[(0,OI.jsx)("div",{className:"label columnNumbers",children:"1"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"2"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"3"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"4"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"5"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"6"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"7"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"8"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"9"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"10"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"11"}),(0,OI.jsx)("div",{className:"label columnNumbers",children:"12"})]})]}),(0,OI.jsx)("div",{id:"selectedButtonInfo",children:(0,OI.jsx)("h2",{children:"Cell Data"})})]})]})}}const jE=UE;let VE=!1,BE=!1;const zE=0,qE=1,KE=0,WE=1;let GE=[];var HE=new Map;let QE=2e4,YE=0;class $E{constructor(e,t){this.shipState=structuredClone(e),this.bufferState=structuredClone(t),this.pathCost=0,this.heuristicCost=0,this.parent=null,this.unloads_left=[],this.loads_left=[],this.initial_loc={pos:[8,0],loc:1},this.final_loc={pos:[8,0],loc:1}}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){if(e[n].length!==t[n].length)return!1;for(let r=0;r<e[n].length;r++)if(e[n][r]!==t[n][r])return!1}return!0}(this.shipState,e.shipState)}isLessThan(e){let t=this.pathCost+this.heuristicCost,n=e.pathCost+e.heuristicCost;return t==n?this.heuristicCost<e.heuristicCost:t<n}isGreaterThan(e){let t=this.pathCost+this.heuristicCost,n=e.pathCost+e.heuristicCost;return t==n?this.heuristicCost>e.heuristicCost:t>n}}function JE(e,t,n){console.log("Starting algo");let r=new $E(structuredClone(e),[]);HE.set(JSON.stringify(r.shipState),r),0!=n.length&&(r.unloads_left=n),0!=t&&(r.loads_left=t),console.log("---Printing initial node--"),function(e){let t="";t+="G: "+e.pathCost,t+="\tH: "+e.heuristicCost,t+="\tF: "+e.f,console.log("----------------------------------"),console.log("\tUnloads left: "+e.unloads_left.length),console.log("\tLoads left: "+e.loads_left.length),console.log(t),console.log("----------------------------------")}(r),console.log(r),console.log("---Printing initial node done -- ");let i=[r],s=[];for(;i.length>0;){if(YE++,YE>QE)return console.log("FAILURE: Unable to find load/unload operation list in time"),void console.log("Final manifest preview shown below:\n");i.sort((function(e,t){return e.pathCost+e.heuristicCost-(t.pathCost+t.heuristicCost)}));let e=i.shift();if(s.push(e),sT(e))return console.log("SUCCESS! Instructions:"),XE(e);i=iT(i,e)}return console.log("ERROR: No paths left to explore found!"),null}function XE(e){var t=[];t=ZE(e,0,t);let n=new Array(4).fill(new Array(24).fill({container:null,deadSpace:!1})),r={ship:e.shipState,buffer:n,truck:0};return t.push({cost:0,state:r,initialPos:{pos:[-1,-1],loc:1},finalPos:{pos:[-1,-1],loc:1}}),console.log("ACTUAL COST: "+t[0].cost),t}function ZE(e,t,n){if(null===e.parent)return n;t+=e.pathCost-e.parent.pathCost,null!=e.parent&&null!=e.parent.parent&&ZE(e.parent,t,n);let r=new Array(4).fill(new Array(24).fill({container:null,deadSpace:!1})),i={ship:e.parent.shipState,buffer:r,truck:0},s=e.initial_loc;return 3===e.initial_loc.loc&&(s.newContainer=e.parent.loads_left[0]),n.push({cost:t,state:i,initialPos:s,finalPos:e.final_loc}),n}function eT(e,t,n){let r=t.col,i=n.col;if(1===t.loc&&1===n.loc){let t=Math.min(r+1,i+1);for(;t<Math.max(r,i);){if(1==e[8][t].deadSpace||null!==e[8][t].container)return[];t++}let n=0;for(;n<9&&1==e[n][r].deadSpace;)n++;if(9==n||null===e[n][r].container)return[];for(;n<8&&null!==e[n+1][r].container;)n++;let s=0;for(;s<9&&(null!==e[s][i].container||1==e[s][i].deadSpace);)s++;return[{pos:[n,r],loc:1},{pos:[s,i],loc:1}]}if(1===t.loc&&3===n.loc){let t=r;for(;t>=0;){if(1==e[8][t].deadSpace||null!==e[8][t].container)return[];t--}let n=0;for(;n<8&&1==e[n][r].deadSpace;)n++;if(8==n||null===e[n][r].container)return[];for(;n<9&&null!==e[n+1][r].container;)n++;return[{pos:[n,r],loc:1},{pos:[0,0],loc:3}]}if(3===t.loc&&1===n.loc){let t=0;for(;t<=i;){if(1==e[8][t].deadSpace||null!==e[8][t].container)return[];t++}let n=0;for(;n<8&&(null!==e[n][i].container||1==e[n][i].deadSpace);)n++;return 8===n?[]:[{pos:[0,0],loc:3},{pos:[n,i],loc:1}]}return[]}function tT(e,t,n){let r=t[zE].loc,i=t[zE].pos,s=t[qE].loc,o=t[qE].pos;var a=structuredClone(e);return 1===r&&1===s?(a[i[KE]][i[WE]]={container:null,deadSpace:!1},a[o[KE]][o[WE]]=e[i[KE]][i[WE]],a):1===r&&3===s?(a[i[KE]][i[WE]]={container:null,deadSpace:!1},a):3===r&&1===s?(a[o[KE]][o[WE]]={container:n,deadSpace:!1,offload:!1},a):a}function nT(e,t){let n=t[zE].loc,r=t[zE].pos,i=t[qE].loc,s=t[qE].pos,o=0;if(1===n&&1===i){let t=Math.max(e.final_loc.pos[KE],r[KE]),n=Math.min(e.final_loc.pos[WE],r[WE]),i=Math.max(e.final_loc.pos[WE],r[WE]);for(let a=0;a<2;a++){0==a?(o+=Math.abs(e.final_loc.pos[KE]-r[KE]),o+=Math.abs(e.final_loc.pos[WE]-r[WE])):(o+=Math.abs(s[KE]-r[KE]),o+=Math.abs(s[WE]-r[WE]),t=Math.max(s[KE],r[KE]),n=Math.min(s[WE],r[WE]),i=Math.max(s[WE],r[WE]));let l=t;for(let t=n+1;t<i;t++){let n=0;for(;n<9&&1==e.shipState[n][t].deadSpace;)n++;for(;n<9&&null!==e.shipState[n][t].container;)n++;n>l&&(l=n)}o+=2*(l-t)}return o}if(1===n&&3===i){let t=0,n=r[WE];o+=Math.abs(e.final_loc.pos[WE]-r[WE]),o+=Math.abs(e.final_loc.pos[KE]-r[KE]);let i=Math.max(e.final_loc.pos[KE],r[KE]);t=Math.min(e.final_loc.pos[WE],r[WE]),n=Math.max(e.final_loc.pos[WE],r[WE]);let s=i;for(let r=t+1;r<n;r++){let t=0;for(;t<9&&1==e.shipState[t][r].deadSpace;)t++;for(;t<9&&null!==e.shipState[t][r].container;)t++;t>s&&(s=t)}return o+=2*(s-i),o+=Math.abs(8-r[KE]),o+=Math.abs(0-r[WE]),o+=2,o}if(3===n&&1===i){1===e.final_loc.loc&&(o+=2,o+=Math.abs(8-e.final_loc.pos[KE]),o+=Math.abs(0-e.final_loc.pos[WE])),o+=2;s[WE];return o+=Math.abs(0-s[WE]),o+=Math.abs(8-s[KE]),o}return o}function rT(e,t,n){let r=0;return r+=1e5*n.length,t.forEach((t=>{let n=t[KE],i=t[WE];for(;n<9&&null!==e[n][i].container;)r+=1e5,n++})),r}function iT(e,t){console.log("EXPANDING NODE ");let n=[];for(let i=0;i<t.unloads_left.length;i++)n.push(t.unloads_left[i][WE]);for(let i=0;i<12;i++)try{null!==t.shipState[8][i].container&&n.push(i)}catch(r){console.log(r)}n=[...new Set(n)];for(let i=0;i<n.length;i++){let r=n[i],s=0;for(;s<8&&(!0===t.shipState[s+1][r].deadSpace||null!=t.shipState[s+1][r].container);)s++;let o={loc:1,col:r};if(!0!==t.shipState[s][r].offload){if(r!=t.final_loc.pos[WE]||null===t.parent)for(let n=0;n<12;n++){let i={loc:1,col:n};if(n!==r&&null===t.shipState[8][n].container){let n=eT(t.shipState,o,i);if(n.length>0){let r=tT(t.shipState,n);if(void 0===HE.get(JSON.stringify(r.shipState))){let i=new $E(r,[]),s=structuredClone(t.unloads_left),o=structuredClone(t.loads_left);i.heuristicCost=rT(r,s,o),i.loads_left=o,i.unloads_left=s,i.pathCost=t.pathCost+nT(t,n),i.initial_loc=n[zE],i.final_loc=n[qE],i.parent=structuredClone(t),HE.set(JSON.stringify(i.shipState),i),e.push(i)}}}}}else{let n={loc:3,col:0},r=eT(t.shipState,o,n);if(r.length>0){let n=tT(t.shipState,r);if(void 0===HE.get(JSON.stringify(n.shipState))){let i=new $E(n,[]),s=structuredClone(t.loads_left),o=structuredClone(t.unloads_left);for(let e=0;e<o.length;e++)if(r[zE].pos[WE]===o[e][WE]&&r[zE].pos[KE]===o[e][KE]){o.splice(e,1);break}i.heuristicCost=rT(n,o,s),i.loads_left=s,i.unloads_left=o,i.pathCost=t.pathCost+nT(t,r),i.initial_loc=r[zE],i.final_loc=r[qE],i.parent=structuredClone(t),HE.set(JSON.stringify(i.shipState),i),e.push(i)}}}}if(t.loads_left.length>0){let r=[0,1,2,3,4,5,6,7,8,9,10,11].filter((e=>!n.includes(e)));for(let n in r){let r=eT(t.shipState,{loc:3,col:1},{loc:1,col:parseInt(n)});if(r.length>0){let n=structuredClone(t.loads_left),i=n.shift(),s=tT(t.shipState,r,i);if(void 0===HE.get(JSON.stringify(s.shipState))){let i=new $E(s,[]),o=structuredClone(t.unloads_left);i.heuristicCost=rT(s,o,n),i.loads_left=n,i.unloads_left=o,i.pathCost=t.pathCost+nT(t,r),i.initial_loc=r[zE],i.final_loc=r[qE],i.parent=structuredClone(t),HE.set(JSON.stringify(i.shipState),i),e.push(i)}}}}return e}function sT(e){if(e.loads_left.length<=0&&e.unloads_left.length<=0){for(let t=0;t<=11;t++)if(null!==e.shipState[8][t].container)return!1;return VE=!0,BE=!0,!0}return!1}const oT=function(e){const[n,r]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{!async function(){r(!0);try{s(await async function(e,t){for(let n=0;n<8;n++)for(let t=0;t<11;t++)1==e[n][t].offload&&GE.push([n,t]);return JE(e,t,GE)}(e.grid,e.load))}catch(t){console.error(t)}finally{r(!1)}}()}),[e.grid,e.load]),n?(0,OI.jsx)("div",{id:"UbloadingSteps",children:(0,OI.jsx)("h3",{style:{color:"black"},children:"Generating Steps..."})}):i?(e.parentRecieveSteps({steps:i}),s(null),void r(!1)):(0,OI.jsx)("div",{id:"UnloadingSteps",children:(0,OI.jsx)("h3",{style:{color:"black"},children:"Done!"})})};class aT{constructor(e,t){this.name=e,this.weight=t}}class lT extends t.Component{constructor(){super(...arguments),this.state={listitems:[]},this.validateContainerName=()=>{const e=/[a-zA-Z0-9!@#/\\$%^&*)(+=._-]/g;try{let t=document.getElementById("inputContainerName").value.trim();"UNUSED"===t||"NAN"===t?alert('"'+t+'" is not allowed'):null===t.match(e)?alert('"'+t+'" Does not contain recognizable printable english character'):(this.state.listitems.push(new aT(t,null)),this.setState({listitems:this.state.listitems}),this.props.parentAddContainers(this.state.listitems))}catch(t){alert(t)}document.getElementById("inputContainerName").value=""}}removeContainerToAdd(e){this.state.listitems.splice(e,1),this.setState({listitems:this.state.listitems}),this.props.parentAddContainers(this.state.listitems)}render(){return(0,OI.jsxs)("div",{id:"inputContainerNamesContainer",className:"inputSection",children:[(0,OI.jsx)("h3",{id:"containerToAddHeader",children:"Add Containers to Load"}),(0,OI.jsxs)("div",{id:"inputContainersUserInput",children:[(0,OI.jsx)("input",{minLength:1,maxLength:255,id:"inputContainerName",type:"text",name:"name"}),(0,OI.jsx)("input",{type:"submit",value:"Submit",onClick:()=>{this.validateContainerName()}})]}),(0,OI.jsxs)("div",{id:"userContainerShowContainers",children:[(0,OI.jsxs)("div",{id:"containerCount",children:["Loading ",this.state.listitems.length," Containers"]}),this.state.listitems.map(((e,t)=>(0,OI.jsx)("div",{className:"individualContainers",children:(0,OI.jsxs)("div",{className:"individualContainerName",children:[e.name,(0,OI.jsx)("button",{className:"removeContainerButton",onClick:()=>{this.removeContainerToAdd(t)},children:"X"})]})},t)))]})]})}}const cT=lT,uT=0,hT=1,dT=2,fT=3,pT=4;class mT{constructor(e,t){this.name=e,this.weight=t}}let gT=[[{container:new mT("amazon warehous",2432),deadSpace:!1,offload:!0},{container:null,deadSpace:!1},{container:null,deadSpace:!0},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:new mT("THIS STRING here",5442),deadSpace:!1,offload:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}],[{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1},{container:null,deadSpace:!1}]],yT=null,vT=[],wT=0;class bT extends t.Component{constructor(){super(...arguments),this.state={current:uT,textFromFile:"null",loadedFileName:null,gridState:gT,offloadStateCounter:wT,addContainersState:!1,stepsFound:null},this.handleNewContainers=e=>{vT=e,this.setState({addContainersState:!this.state.addContainersState}),console.log(e)},this.handleButtonToggle=e=>{gT[e.row-1][e.col-1].offload=!gT[e.row-1][e.col-1].offload,!0===gT[e.row-1][e.col-1].offload?wT+=1:!1===gT[e.row-1][e.col-1].offload&&(wT-=1),this.setState({gridState:gT,offloadStateCounter:wT})},this.handleFileCallback=e=>{try{let l=0,c=e.text;this.setState({textFromFile:c,loadedFileName:e.name});for(var t=c.split("\n"),n=0;n<t.length;n++){var r=t[n].match(/(\d+)/g),i=parseInt(r[0])-1,s=parseInt(r[1])-1,o=parseInt(r[2]),a=t[n].replace(/^(?:[^,]*,){2}[^,]*,/," ").trim();"UNUSED"===a?gT[i][s]={container:null,deadSpace:!1}:"NAN"===a?gT[i][s]={container:null,deadSpace:!0}:(gT[i][s]={container:new mT(a,o),deadSpace:!1,offload:!1},l++),this.setState({gridState:gT})}UI("Manifest "+e.name+" is opened. There are "+l+" container(s) on the ship"),this.transition(hT)}catch(l){alert(l),this.transition(uT)}},this.recieveSteps=e=>{yT=e.steps,this.setState({steps:e}),console.log(yT),this.transition(fT)}}transition(e){this.setState({current:e})}render(){switch(this.state.current){case hT:return this.renderAllowInputs();case dT:return this.renderComputeSteps();case fT:return this.renderShowSteps();case pT:return this.renderFinishProcedure();default:return this.renderInit()}}renderInit(){return(0,OI.jsx)("div",{children:(0,OI.jsx)(YI,{parentCallback:this.handleFileCallback})})}renderAllowInputs(){return(0,OI.jsxs)("div",{children:[(0,OI.jsxs)("div",{className:"loadedFileName",children:["Current File: ",this.state.loadedFileName]}),(0,OI.jsxs)("div",{id:"loadUnloadInputs",className:"page",children:[(0,OI.jsx)(cT,{parentAddContainers:this.handleNewContainers}),(0,OI.jsx)(jE,{parentToggleButton:this.handleButtonToggle,numberToOffload:wT,grid:gT}),(0,OI.jsxs)("div",{id:"submitInputsSection",className:"inputSection",children:[(0,OI.jsx)("h3",{id:"submitInputsHeader",children:"Ready to Continue: "}),(0,OI.jsx)("button",{id:"submitInputs",onClick:()=>this.transition(dT),children:"Compute Steps"})]})]}),(0,OI.jsx)("br",{}),(0,OI.jsx)("br",{}),(0,OI.jsx)("br",{})]})}renderComputeSteps(){return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)(oT,{parentRecieveSteps:this.recieveSteps,load:vT,grid:gT})})}renderShowSteps(){return(0,OI.jsx)(OI.Fragment,{children:(0,OI.jsx)(kE,{fileName:this.state.loadedFileName,steps:yT,task:1})})}renderFinishProcedure(){return(0,OI.jsx)("button",{onClick:()=>this.transition(uT),children:"No Logic Yet"})}}const _T=bT;const ST=function(){return(0,OI.jsxs)("div",{className:"loadingUnloadingContainer",children:[(0,OI.jsx)(zI,{value:"Loading & Unloading"}),(0,OI.jsx)(_T,{}),(0,OI.jsx)("br",{}),(0,OI.jsx)("br",{}),(0,OI.jsx)("br",{}),(0,OI.jsx)(GI,{})]})};const IT=function(){return(0,t.useEffect)((()=>{console.log("Program Closed"),UI("Program Closed")}),[]),(0,OI.jsxs)("div",{id:"signedOutPage",children:[(0,OI.jsxs)("div",{id:"signedOutPageContent",children:[(0,OI.jsx)("h1",{children:"Software Signing Out"}),(0,OI.jsx)("h2",{children:"Happy Holidys!"}),(0,OI.jsx)("p",{children:"You May Now Close the Website"}),(0,OI.jsx)("iframe",{width:"860",title:"",height:"484",src:"/logFiles"})]}),(0,OI.jsxs)("div",{className:"snowflakes","aria-hidden":"true",children:[(0,OI.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2744"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2744"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2745"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2746"}),(0,OI.jsx)("div",{className:"snowflake",children:"\u2744"})]})]})};const ET=function(){return(0,OI.jsxs)("div",{className:"pageNotFound",children:[(0,OI.jsx)("h1",{children:"404: Page Not Found"}),(0,OI.jsx)("a",{href:"/",children:(0,OI.jsx)("button",{children:"Return to Home Page"})})]})};const TT=function(){return(0,OI.jsx)(oe,{children:(0,OI.jsxs)(re,{children:[(0,OI.jsx)(te,{path:"/",element:(0,OI.jsx)(HI,{})}),(0,OI.jsx)(te,{path:"/LoadUnload",element:(0,OI.jsx)(ST,{})}),(0,OI.jsx)(te,{path:"/Weight",element:(0,OI.jsx)(FE,{})}),(0,OI.jsx)(te,{path:"/LogFiles",element:(0,OI.jsx)(jI,{})}),(0,OI.jsx)(te,{path:"/Signed-out",element:(0,OI.jsx)(IT,{})}),(0,OI.jsx)(te,{path:"*",element:(0,OI.jsx)(ET,{})})]})})};i.createRoot(document.getElementById("root")).render((0,OI.jsx)(TT,{})),s()})()})();
//# sourceMappingURL=main.2e20089c.js.map